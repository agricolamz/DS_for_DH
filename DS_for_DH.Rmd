--- 
title: "Наука о данных в R для программы Цифровых гуманитарных исследований"
author: "Г. А. Мороз, И. С. Поздняков"
bibliography:
- bibliography.bib
editor_options:
  chunk_output_type: console
link-citations: yes
documentclass: book
site: bookdown::bookdown_site
biblio-style: apalike
---
--- 
title: "Наука о данных в R для программы Цифровых гуманитарных исследований"
author: "Г. А. Мороз, И. С. Поздняков"
bibliography:
- bibliography.bib
editor_options:
  chunk_output_type: console
link-citations: yes
documentclass: book
site: bookdown::bookdown_site
biblio-style: apalike
---

# О курсе

Материалы для курса Наука о данных для магистерской программы Цифровых гуманитарные исследования НИУ ВШЭ.

<!--chapter:end:index.Rmd-->


# Введение в R {#intro}

Placeholder


## Наука о данных
## Установка R и RStudio
## Полезные ссылки
## Rstudio
## Введение в R
### R как калькулятор  {#calc}
### Функции  {#func}
### Переменные  {#variables}
## Типы данных  {#data_types}
## Вектор  {#atomic}
### Coercion   {#coercion}
### Операции с векторами   {#vector_op}
### Recycling {#recycling}
### Индексирование векторов {#index_atomic}  
### NA --- пропущенные значения  {#na} 
### В любой непонятной ситуации --- ищите в поисковике  {#google}
## Матрицы (matrix)  {#matrix}
## Списки (list)  {#list}
## Data.frame  {#df}
## Начинаем работу с реальными данными {#real_data}  
### Рабочая папка и проекты {#wd}
### Импорт данных  {#import}
## Препроцессинг данных в R {#prep}
### Исследование данных  {#explore}
### Subsetting  {#subset}
### Создание новых колонок {#newcol}
### data.table vs. tidyverse {#dtvstidy} 

<!--chapter:end:01-intro_to_r.Rmd-->


# `tidyverse`: Загрузка и трансформация данных {#tidy_dplyr}

Placeholder


## Загрузка данных
### Рабочая директория
### Форматы данных: `.csv`
### Загрузка данных: readr, readxl
#### Misspelling dataset
#### `diamonds`
## `tibble`
## `dplyr`
### `dplyr::filter()`
### `dplyr::slice()`
### `dplyr::select()`
### `dplyr::arrange()`
### `dplyr::distinct()`
### `dplyr::mutate()`
### `dplyr::group_by(...) %>% summarise(...)`
## Соединение датафреймов
### `bind_...`
### `dplyr::.._join()`
## `tidyr` package
## Полезные надстройки

<!--chapter:end:02-transform.Rmd-->


# Визуализация данных {#viz_1}

Placeholder


## Зачем визуализировать данные?
### Квартет Анскомба
### Датазаурус
## Основы `ggplot2`
### Диаграмма рассеяния (Scaterplot)
### Слои
### `aes()`
### Оформление
### Логарифмические шкалы
### `annotate()`
## Столбчатые диаграммы (barplots)
## Факторы
## Дотплот
## Гистограммы
## Функции плотности
## Точки, джиттер (jitter), вайолинплот (violinplot), ящики с усами (boxplot),
## Фасетизация
## Визуализация комбинаций признаков
### Потоковая Диаграмма (Sankey diagram)
### UpSet Plot

<!--chapter:end:03-data_visualisation.Rmd-->


# Работа со строками {#strings}

Placeholder


## Работа со строками в R
## Как получить строку?
## Соединение и разделение строк
## Количество символов
### Подсчет количества символов
### Подгонка количества символов
## Сортировка
## Поиск подстроки
## Изменение строк
### Изменение регистра
### Выделение подстроки
### Замена подстроки
### Удаление подстроки
### Транслитерация строк
## Регулярные выражения
### Экранирование метасимволов
### Классы знаков
### Квантификация
### Позиционная проверка (look arounds)
## Определение языка
## Расстояния между строками

<!--chapter:end:04-strings.Rmd-->


# Работа со списками {#lists}

Placeholder


## Что такое списки?
### Превращение JSON в список и обратно
### Превращение `.xml` в список и обратно
### Просмотр списков в R 
## Пакет `purrr`
### Функция `map()` и `map...()`
### Фильтрация списков
### Операции со списками

<!--chapter:end:05-purrr.Rmd-->


# Представление данных: rmarkdown, shiny {#data_presentation}

Placeholder


## `rmarkdown`
### Установка
### Составляющие `rmarkdown`-документа
### Пример `rmarkdown`-документа
### `Markdown`
#### Заголовки
#### Форматирование
#### Списки
#### Ссылки и картинки
#### Код
#### Цитаты
#### Разрыв страницы
#### HTML
#### Таблицы
### `Pandoc`
#### Верхние и нижние индексы
#### Нумерованные примеры
#### Сноски
#### Математика: $\LaTeX$
### Code chunks
#### Язык программирования
#### Появление и исполнение кода
#### Другие полезные аргументы
#### Pets or livestock?
### YAML шапка
#### Тип получившегося файла
#### Библиография
#### Оглавление и пр.
#### Отображение датафреймов
### Где хостить `.html`?
## Бывают и другие способы представления данных

<!--chapter:end:06-markdown.Rmd-->


# Собственные функции и использование их в `tidyverse` {#functions}

Placeholder


## Напоминание: логические операции
## Создание собственных функций
## Использование условий в tidyverse
### Условия в строчках
### Условия в столбцах
## Reinvent the `map` function

<!--chapter:end:07-functions.Rmd-->


# Работа с текстами: gutenbergr, tidytext, udpipe {#tidytext}

Placeholder


## Пакет `gutenbergr`
## Библиотека `tidytext`
## Пакет udpipe

<!--chapter:end:08-texts.Rmd-->

# Работа с геоданными: leaflet, geojson


<!--chapter:end:09-leaflet.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# Работа со временем: `lubridate`

```{r, message=FALSE}
library(tidyverse)
```


Мы обсуждали, что переменные бывают разные. О них, возможно, следует думать как о шкале:

```{r,echo=FALSE}
types <- c("категориальные", "порядковые", "время", "числовые")
examples <- c("голубые глаза, карие глаза, зеленые глаза...", 
              "младшая школа, средняя школа, техникум/колледж, бакалавриат...", 
              "понедельник, вторник, среда...", 
              "2, -3.2, pi")
tibble(x = factor(types, levels = types),
       caption = factor(examples, levels = examples),
       y = 1.05) %>% 
  ggplot(aes(x, y, label = caption))+
  geom_text(hjust = 0)+
  geom_segment(aes(x=1, xend=4, y=1, yend=1), arrow = arrow(type = "open", ends = "both", length = unit(0.1, "inches"))) +
  ylim(1, 2)+
  theme_minimal()+
  coord_flip()+
  labs(x = "", y = "")+
  theme(axis.text.x = element_blank(), panel.grid.major = element_blank(), panel.grid.minor = element_blank())
```


# `lubridate`

Для работы со временем в R написали пакет lubridate ([https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf](cheatsheet), туториал доступен [здесь](https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html) и по команде `vignette("lubridate")`)

[Страница Левады центра](https://www.levada.ru/indikatory/otnoshenie-k-stranam/)

```{r}
library(lubridate)
df <- read_csv("data/2019.01_levada_countries.csv")
## Bad graph
df %>% 
  filter(!str_detect(date, "2003")) %>% 
  mutate(date = factor(date, levels = date)) %>% 
  pivot_longer(names_to = "answer", values_to = "number", good:no_answer) %>% 
  ggplot(aes(date, number, color = answer, group = answer))+
  geom_line()
# Good graph
df %>% 
  mutate(date = str_c("1-", date),
         data = dmy(date)) %>% 
  pivot_longer(names_to = "answer", values_to = "number", good:no_answer) %>% 
  ggplot(aes(data, number, color = answer))+
  geom_line()+
  facet_wrap(~towards, scales = "free")
```

<!--chapter:end:10-lubridate.Rmd-->

# Сбор данных из интернета: rvest


<!--chapter:end:10-rvest.Rmd-->

# Distributions

https://ben18785.shinyapps.io/distribution-zoo/

<!--chapter:end:11-distributions.Rmd-->

# Центральная предельная теорема

<!--chapter:end:12-CLT.Rmd-->

# Статистические тесты для работы с категориальными данными

<!--chapter:end:13-chi-squared-test.Rmd-->

# Регрессия

<!--chapter:end:14-regression.Rmd-->

# Кластеризация

<!--chapter:end:15-clusterization.Rmd-->

# Методы уменьшения размерностей

<!--chapter:end:16-PCA.Rmd-->

# Работа с сетями

<!--chapter:end:17-networks.Rmd-->


# Задания {#tasks}

Placeholder


## Вектор {#vec_task_1}
## Вектор. Операции с векторами {#vec_op}
## Вектор. Индексирование {#vec_task_2}
## Списки {#list_ta}
## Матрицы {#t}
## Датафрейм {#df_task}

<!--chapter:end:18-tasks.Rmd-->


# Решения_заданий {#solutions}

Placeholder


## Вектор {#solvvec_task_1}
## Вектор. Операции с векторами {#solvvec_op}
## Вектор. Индексирование {#solvvec_task_2}
## Списки {#solvlist_ta}
## Матрицы {#solvt}
## Датафрейм {#solvdf_task}

<!--chapter:end:19-solutions.Rmd-->

`r if (knitr::is_html_output()) '
# Ссылки на литературу {-}
'`

<!--chapter:end:20-references.Rmd-->

