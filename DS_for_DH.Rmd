--- 
title: "–ù–∞—É–∫–∞ –æ –¥–∞–Ω–Ω—ã—Ö –≤ R –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –¶–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π"
author: "–ì. –ê. –ú–æ—Ä–æ–∑, –ò. –°. –ü–æ–∑–¥–Ω—è–∫–æ–≤"
bibliography:
- bibliography.bib
editor_options:
  chunk_output_type: console
link-citations: yes
documentclass: book
site: bookdown::bookdown_site
biblio-style: apalike
---

# –û –∫—É—Ä—Å–µ

–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∫—É—Ä—Å–∞ –ù–∞—É–∫–∞ –æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –¶–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ù–ò–£ –í–®–≠.

<!--chapter:end:index.Rmd-->

# –í–≤–µ–¥–µ–Ω–∏–µ –≤ R {#intro}

## –ù–∞—É–∫–∞ –æ –¥–∞–Ω–Ω—ã—Ö
–ù–∞—É–∫–∞ –æ –¥–∞–Ω–Ω—ã—Ö --- —ç—Ç–æ –Ω–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –∑–Ω–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä–∞—è –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è. –û–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –Ω–∞—É–∫, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏, –∏ —Ç—Ä—É–¥–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –Ω–∞—É–∫–∞. –ü—Ä–∏ —ç—Ç–æ–º —ç—Ç–æ –¥–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –≤ —Å–∞–º—ã—Ö —Ä–∞–∑–Ω—ã—Ö –Ω–∞—É—á–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö, –∏–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –æ—Ñ–æ—Ä–º–ª—è—è—Å—å –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –æ—Ç—Ä–∞—Å–ª—å:

* –±–∏–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞
* –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è –∫—Ä–∏–º–∏–Ω–∞–ª–∏—Å—Ç–∏–∫–∞
* —Ü–∏—Ñ—Ä–æ–≤—ã–µ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
* –¥–∞—Ç–∞–∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∏–∫–∞
* ...

–í—Å–µ –±–æ–ª—å—à–µ –∫–Ω–∏–≥ "Data Science for ...":

* psychologists [@hansjoerg19]
* immunologists [@thomas19]
* business [@provost13]
* public policy [@brooks13]
* fraud detection [@baesens15]
* ...

–°—Ä–µ–¥–∏ —É–º–µ–Ω–∏–π –¥–∞—Ç–∞—Å–∞–µ–Ω—Ç–∏—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ:

* —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
* —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
* –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
* —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
* –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
* –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ–π —Ä–∞–±–æ—Ç—ã **–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º —Å–ø–æ—Å–æ–±–æ–º**

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —ç—Ç–∏—Ö —Ç–µ–º –≤ —Ç–æ–π –∏–ª–∏ –∏–Ω–æ–π –º–µ—Ä–µ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ –Ω–∞—à–µ–º –∫—É—Ä—Å–µ.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ R –∏ RStudio

–í –¥–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ R [@r_core_team19], —Ç–∞–∫ —á—Ç–æ –¥–ª—è –∑–∞–Ω—è—Ç–∏–π –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è:

* R
    * [–Ω–∞ Windows](https://cran.r-project.org/bin/windows/base/)
    * [–Ω–∞ Mac](https://cran.r-project.org/bin/macosx/)
    * [–Ω–∞ Linux](https://cran.rstudio.com/bin/linux/), —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–µ—Ä–∫–∞–ª–æ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
    
```
sudo apt-get install r-cran-base
```

* RStudio --- IDE –¥–ª—è R ([–º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∑–¥–µ—Å—å](https://www.rstudio.com/products/rstudio/download/))
* –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞–∫–µ—Ç—ã –Ω–∞ R

–ß–∞—Å—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∏–ª–∏ —É—Å–ª—ã—à–∞—Ç—å, —á—Ç–æ R --- —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è "—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö". –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Ç–æ, –∫–æ–Ω–µ—á–Ω–æ, –±—ã–ª–æ –ø—Ä–∞–≤–¥–æ–π, –Ω–æ —É–∂–µ –¥–∞–≤–Ω–æ R --- —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Å–≤–æ–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ—à–∞—Ç—å –æ–≥—Ä–æ–º–Ω—ã–π —Å–ø–µ–∫—Ç—Ä –∑–∞–¥–∞—á. –í –¥–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –≤–µ—Ä—Å–∏—è R:

```{r}
sessionInfo()$R.version$version.string
```

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –Ω–µ –ª—é–±—è—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–∏—à–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å–µ–±–µ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä, –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –µ—Å—Ç—å –∏ –¥–ª—è –Ω–∏—Ö:

* [RStudio cloud](https://rstudio.cloud/) --- –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å RStudio, –ø–æ–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è, –Ω–æ —Å–∫–æ—Ä–æ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤—è—Ç;
* [RStudio on rollApp](https://www.rollapp.com/app/rstudio) --- –æ–±–ª–∞—á–Ω–∞—è —Å—Ä–µ–¥–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã.

–ü–µ—Ä–≤—ã–π –∏ –≤–ø–æ–ª–Ω–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –∑–∞—á–µ–º –º—ã —Å—Ç–∞–≤–∏–ª–∏ R –∏ –æ—Ç–¥–µ–ª—å–Ω–æ –µ—â–µ –∫–∞–∫–æ–π-—Ç–æ RStudio?
–ï—Å–ª–∏ –æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏, —Ç–æ R --- —ç—Ç–æ —Å–∞–º —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ RStudio --- —ç—Ç–æ —Å—Ä–µ–¥–∞ (IDE), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ —ç—Ç–æ–º —è–∑—ã–∫–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

–í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã –ø–æ —Å–∞–º—ã–º —Ä–∞–∑–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ R, —Ç–∞–∫ —á—Ç–æ –≥–ª–∞–≤–Ω—ã–π –∑–∞–ª–æ–≥ —É—Å–ø–µ—Ö–∞ --- –≥—Ä–∞–º–æ—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–º, –∏ –ª—É—á—à–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ.

* [–∫–Ω–∏–≥–∞ [@wickham16]](https://r4ds.had.co.nz/) —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–ª—å–Ω–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –≤—Å–µ–º—É –∫—É—Ä—Å—É
* [stackoverflow](https://stackoverflow.com) --- —Å–µ—Ä–≤–∏—Å, –≥–¥–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ R)
* [RStudio community](https://community.rstudio.com/) --- –±—ã—Å—Ç—Ä–æ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å R
* [—Ä—É—Å—Å–∫–∏–π stackoverflow](https://ru.stackoverflow.com)
* [R-bloggers](https://www.r-bloggers.com/) --- —Å–∞–π—Ç, –≥–¥–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –Ω–æ–≤–∏–Ω–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å R
* [—á–∞—Ç](https://t.me/rlang_ru), –≥–¥–µ –º–æ–∂–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø—Ä–æ R –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–Ω–æ –ø–æ—á–∏—Ç–∞–π—Ç–µ [–ø—Ä–∞–≤–∏–ª–∞ —á–∞—Ç–∞](https://github.com/r-lang-group-ru/group-rules/blob/master/README.md), –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å)
* [—á–∞—Ç](https://t.me/joinchat/CxZg5goGc6rlWGjcvOYrpA) –ø–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, [—á–∞—Ç](https://t.me/ddjrus) –¥–∞—Ç–∞–∂—É—Ä–Ω–∞–ª–∏—Å—Ç–æ–≤
* [–∫–∞–Ω–∞–ª –ø—Ä–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é ](https://t.me/chartomojka), [–¥–∞—Ç–∞-–±–ª–æ–≥ "–ù–æ–≤–æ–π –≥–∞–∑–µ—Ç—ã"](https://t.me/novaya_data), ...

## Rstudio
–ö–æ–≥–¥–∞ –≤—ã –æ—Ç–∫—Ä–æ–µ—Ç–µ RStudio –ø–µ—Ä–≤—ã–π —Ä–∞–∑, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ç—Ä–∏ –ø–∞–Ω–µ–ª–∏: –∫–æ–Ω—Å–æ–ª—å, –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—é, –∞ —Ç–∞–∫–∂–µ –ø–∞–Ω–µ–ª—å –¥–ª—è –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ. –ï—Å–ª–∏ —Ç–∫–Ω—É—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞ –∑–Ω–∞—á–æ–∫ —É–º–µ–Ω—å—à–µ–Ω–∏—è, —Ç–æ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø–∞–Ω–µ–ª—å, –≥–¥–µ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç.

```{r, echo=FALSE}
knitr::include_graphics("images/01_01_rstudio.png")
```

–°—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –æ–¥–Ω–∏ –ª—é–±—è—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ (–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —ç—Ç–æ **2 --- R Console**), –¥—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç —Å–∫—Ä–∏–ø—Ç—ã (**1 --- Code Editor**). –ö–æ–Ω—Å–æ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –∫–æ–º–∞–Ω–¥–∞-–æ—Ç–≤–µ—Ç, –∞ —Å–∫—Ä–∏–ø—Ç —è–≤–ª—è–µ—Ç—Å—è –ø–æ —Å—É—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º, —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏.

**3 --- Workspace and History**: –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –≠—Ç–æ –ø–æ–ª–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ –í—ã –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å—Ç—Ä–æ—á–∫–∏ –∫–æ–¥–∞ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ï—â–µ —Ç–∞–º –µ—Å—Ç—å –≤–∫–ª–∞–¥–∫–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã.

**4 --- Plots and files**: –ó–¥–µ—Å—å –µ—Å—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ. –í–æ-–ø–µ—Ä–≤—ã—Ö, –Ω–µ–±–æ–ª—å—à–æ–π —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä, –≤–æ-–≤—Ç–æ—Ä—ã—Ö, —Ç–∞–º –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≥—Ä–∞—Ñ–∏–∫–∏, –∫–æ–≥–¥–∞ –≤—ã –±—É–¥–µ—Ç–µ –∏—Ö —Ä–∏—Å–æ–≤–∞—Ç—å. –¢–∞–º –∂–µ –µ—Å—Ç—å –≤–∫–ª–∞–¥–∫–∞ —Å –≤–∞—à–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ (Packages) –∏ Help –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º. –ù–æ –æ–± —ç—Ç–æ–º –ø–æ—Ç–æ–º.  

## –í–≤–µ–¥–µ–Ω–∏–µ –≤ R

### R –∫–∞–∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä  {#calc}

–û–π-–µ–π, –∫–æ–Ω—Å–æ–ª—å, —Å–∫—Ä–∏–ø—Ç —á–µ-—Ç–æ –≤—Å–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ.  
–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –∏ –ø–æ–ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å R –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä. `+`, `-`, `*`, `/`, `^` (—Å—Ç–µ–ø–µ–Ω—å), `()` –∏ —Ç.–¥.

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–∫–∞ –Ω–µ –Ω–∞–¥–æ–µ—Å—Ç:  

```{r}
40+2
3-2
5*6
99/9
2^3
(2+2)*2
```

–ù–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ, –≤–µ—Ä–Ω–æ? –í–≤–æ–¥–∏–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–∫ –≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ, —Ç–∞–∫ —á—Ç–æ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ —Å–∫–æ–±–æ—á–∫–∏.

> –ï—Å–ª–∏ –í—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã –≤ —Ç–æ–º, –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫–æ–±–æ—á–∫–∏, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –æ–±–æ–∑–Ω–∞—á–∏—Ç—å, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏.

![](images/ThePracticalDev_2016-Apr-13.jpg)

### –§—É–Ω–∫—Ü–∏–∏  {#func}

–î–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å –∏–∑–≤–ª–µ—á–µ–º –∫–æ—Ä–µ–Ω—å –∏–∑ –∫–∞–∫–æ–≥–æ-–Ω–∏–±—É–¥—å —á–∏—Å–ª–∞. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ, —Ç–µ–º, –∫—Ç–æ –ø–æ–º–Ω–∏—Ç —à–∫–æ–ª—å–Ω—ã–π –∫—É—Ä—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏, –≤–æ–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Å—Ç–µ–ø–µ–Ω—å –≤–ø–æ–ª–Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:

```{r}
16^0.5
```


–ù—É –∞ –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π **—Ñ—É–Ω–∫—Ü–∏–µ–π**: —ç—Ç–æ –æ–±—ã—á–Ω–æ –∫–∞–∫–∏–µ-—Ç–æ –±—É–∫–≤–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —Å –∫—Ä—É–≥–ª—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏. –ú—ã –ø–æ–¥–∞–µ–º –Ω–∞ –≤—Ö–æ–¥ (–≤–Ω—É—Ç—Ä—å —Å–∫–æ–±–æ—á–µ–∫) –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ, –≤–Ω—É—Ç—Ä–∏ —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∫–∞–∫–∏–µ-—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–¥–∞—é—Ç –≤ –æ—Ç–≤–µ—Ç –∫–∞–∫–∏–µ-—Ç–æ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ (–∏–ª–∏ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª, —Ä–∏—Å—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –∏ —Ç.–¥.).

–í–æ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ—Ä–Ω—è:

```{r}
sqrt(16)
```

> R --- case-sensitive —è–∑—ã–∫, —Ç.–µ. —Ä–µ–≥–∏—Å—Ç—Ä –≤–∞–∂–µ–Ω. `SQRT(16)` –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–ê –≤–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ñ—É–Ω–∫—Ü–∏—è –ª–æ–≥–∞—Ä–∏—Ñ–º–∞:  

```{r}
log(8)
```

–¢–∞–∫, –≤—Ä–æ–¥–µ –±—ã –≤—Å–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ... –ï—Å–ª–∏ –í—ã –µ—â–µ —á—Ç–æ-—Ç–æ –ø–æ–º–Ω–∏—Ç–µ –∏–∑ —à–∫–æ–ª—å–Ω–æ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏, —Ç–æ –¥–æ–ª–∂–Ω—ã –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —á—Ç–æ-—Ç–æ –∑–¥–µ—Å—å –Ω–µ —Ç–∞–∫.  

–ó–¥–µ—Å—å –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è –ª–æ–≥–∞—Ä–∏—Ñ–º–∞!   

> –õ–æ–≥–∞—Ä–∏—Ñ–º --- –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–ø–µ–Ω–∏, –≤ –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ –≤–æ–∑–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ, –Ω–∞–∑—ã–≤–∞–µ–º–æ–µ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ.  

–¢–æ –µ—Å—Ç—å —É –ª–æ–≥–∞—Ä–∏—Ñ–º–∞ 8 –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é 2 –±—É–¥–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ 3:

$\log_2 8 = 3$

–¢–æ –µ—Å—Ç—å –µ—Å–ª–∏ –≤–æ–∑–≤–µ—Å—Ç–∏ 2 –≤ —Å—Ç–µ–ø–µ–Ω—å 3 —É –Ω–∞—Å –±—É–¥–µ—Ç 8:

$2^3 = 8$

–¢–æ–ª—å–∫–æ –Ω–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç –≤—Å–µ –∫–∞–∫-—Ç–æ –Ω–µ —Ç–∞–∫.  

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–ª–µ–∑—Ç—å –≤ —Ö—ç–ª–ø —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:  

```{r, eval = F}
?log
```

–°–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É –≤ RStudio –ø–æ—è–≤–∏—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–æ–µ –æ–∫–Ω–æ:

![](images/help.png)


–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, —É —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –µ—â–µ –∞—Ä–≥—É–º–µ–Ω—Ç *`base =`*. –ü–æ –¥–µ—Ñ–æ–ª—Ç—É –æ–Ω —Ä–∞–≤–µ–Ω —á–∏—Å–ª—É –≠–π–ª–µ—Ä–∞ (`r exp(1)`...), —Ç.–µ. —Ñ—É–Ω–∫—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –ª–æ–≥–∞—Ä–∏—Ñ–º. 
–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ñ—É–Ω–∫—Ü–∏–π R –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω–ø—É—Ç --- –¥–∞–Ω–Ω—ã–µ –≤ —Ç–æ–º –∏–ª–∏ –∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∞ –µ—Å—Ç—å –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞—Å –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç.

```{r}
log(x = 8, base = 2)
```

...–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ (–µ—Å–ª–∏ –í—ã —É–≤–µ—Ä–µ–Ω—ã –≤ –ø–æ—Ä—è–¥–∫–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤):

```{r}
log(8,2)
```

–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—É—Ç–ø—É—Ç –æ–¥–Ω–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∫–∞–∫ –∏–Ω–ø—É—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö:  

```{r}
log(8, sqrt(4))
```

–ï—Å–ª–∏ —ç–∫—Å–ø–ª–∏—Ü–∏—Ç–Ω–æ –ø–∏—Å–∞—Ç—å –∏–º–µ–Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —Ç–æ –∏—Ö –ø–æ—Ä—è–¥–æ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –≤–∞–∂–µ–Ω:

```{r}
log(base = 2, x = 8)
```

–ê –µ—â–µ –º–æ–∂–Ω–æ –Ω–µ–¥–æ–ø–∏—Å—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –¥—Ä—É–≥–∏–º–∏:

```{r}
log(b = 2, x = 8)
```

–ú—ã –µ—â–µ –º–Ω–æ–≥–æ —Ä–∞–∑ –±—É–¥–µ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ñ—É–Ω–∫—Ü–∏—è–º. –í–æ–æ–±—â–µ, —Ñ—É–Ω–∫—Ü–∏–∏ --- —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö —à—Ç—É–∫ –≤ R (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ –≤ Python). –ú—ã –±—É–¥–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ –∏–Ω–ø—É—Ç –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –º–Ω–æ–≥–æ–µ-–º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –í R –æ—á–µ–Ω—å –∫—Ä—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏. –ü–æ—ç—Ç–æ–º—É –ø–æ–¥—Ä—É–∂–∏—Ç–µ—Å—å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –æ–Ω–∏ –∫–ª–µ–≤—ã–µ.  

> –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏: +,-,/,^ –∏ —Ç.–¥. –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏** –∏ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç–æ–∂–µ —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏:

```{r}
'+'(3,4)
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ  {#variables}

–í–∞–∂–Ω–∞—è —à—Ç—É–∫–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±–æ–º —è–∑—ã–∫–µ --- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**. –í R —ç—Ç–æ –æ–±—ã—á–Ω–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤–æ—Ç —ç—Ç–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤: *<-* (–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –æ–±—ã—á–Ω–æ–µ *=*, —Ö–æ—Ç—è —ç—Ç–æ –Ω–µ –æ—á–µ–Ω—å –ø—Ä–∏–Ω—è—Ç–æ). –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å —É–¥–æ–±–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à: –Ω–∞–∂–º–∏—Ç–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ `Alt -` (–∏–ª–∏ `option -` –Ω–∞ –ú–∞–∫–µ).

```{r}
a <- 2
a
```

–ü–æ—Å–ª–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ –≤–∫–ª–∞–¥–∫–µ **Environment** –≤ RStudio:

![](images/env.png)

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏ –ø—Ä–æ—Å—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö:

```{r}
b <- a^a+a*a
b
log(b,a)
```

–í—ã –º–æ–∂–µ—Ç–µ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```{r}
a == b
```

–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—è –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–≤–∞ –∑–Ω–∞–∫–∞ —Ä–∞–≤–Ω–æ ==, –∞ –Ω–µ –æ–¥–∏–Ω =. –ò–Ω–∞—á–µ —ç—Ç–æ –±—É–¥–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ.

```{r}
a = b
a
```

–¢–µ–ø–µ—Ä—å –í—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–Ω—è—Ç—å –∫–æ–º–∏–∫—Å –ø—Ä–æ –≤–æ—Å—Å—Ç–∞–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–≤ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø—É—Å—Ç—å –æ–Ω –∏ —Å–æ–≤—Å–µ–º –ø—Ä–æ –¥—Ä—É–≥–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è)  

![](images/WaCM5x3mvQM.jpg)

–≠—Ç–æ—Ç –∫–æ–º–∏–∫—Å –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –≤–∞–∂–Ω–æ –Ω–µ –ø—É—Ç–∞—Ç—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ *(—Ö–æ—Ç—è —è –∏–Ω–æ–≥–¥–∞ –ø—É—Ç–∞—é –¥–æ —Å–∏—Ö –ø–æ—Ä =( )*.

–ò–Ω–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ *–Ω–µ*—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ:
```{r}
a <- 2
b <- 3

a==b
a!=b
```

–í–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π —è–∑—ã–∫ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–æ–æ–±—â–µ –∏ –≤ R –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ.

–ï—â–µ –º—ã –º–æ–∂–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–∞ –±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ:

```{r}
a>b
a<b
a>=b
a<=b
```

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö  {#data_types}

–î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –º—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Å —á–∏—Å–ª–∞–º–∏ (numeric):

```{r}
class(a)
```


> –í–æ–æ–±—â–µ, –≤ R –º–Ω–æ–≥–æ —Ç–∏–ø–æ–≤ numeric: integer (—Ü–µ–ª—ã–µ), double (—Å –¥–µ—Å—è—Ç–∏—á–Ω–æ–π –¥—Ä–æ–±—å—é), complex (–∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —á–∏—Å–ª–∞). –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∏—à—É—Ç—Å—è —Ç–∞–∫: `complexnumber <- 2+2i`
> –û–¥–Ω–∞–∫–æ –≤ R —Å —ç—Ç–∏–º –æ–±—ã—á–Ω–æ –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –Ω–µ –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è, R —Å–∞–º –±—É–¥–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ç—å –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –ù–µ–º–Ω–æ–≥–æ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –∑–¥–µ—Å—å:  

[–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É numeric –∏ integer](https://stackoverflow.com/questions/23660094/whats-the-difference-between-integer-class-and-numeric-class-in-r), [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏ –≤ R](http://www.r-tutor.com/r-introduction/basic-data-types/complex)

–¢–µ–ø–µ—Ä—å –∂–µ –Ω–∞–º –Ω—É–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–≤—É–º—è –¥—Ä—É–≥–∏–º–∏ –≤–∞–∂–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ R:

1. **character**: —Å—Ç—Ä–æ–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤. –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–¥–µ–ª—è—Ç—å—Å—è –∫–∞–≤—ã—á–∫–∞–º–∏. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ `"`, —Ç–∞–∫ –∏ `'` (—á—Ç–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ —Å—Ç—Ä–æ—á–∫–∞ –≤–Ω—É—Ç—Ä–∏ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∫–∏–µ-—Ç–æ –∫–∞–≤—ã—á–∫–∏).

```{r}
s <- "–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç!"
s
class(s)
```

2. **logical**: –ø—Ä–æ—Å—Ç–æ `TRUE` –∏–ª–∏ `FALSE`. 

```{r}
t1 <- TRUE
f1 <- FALSE

t1
f1
```
–í–æ–æ–±—â–µ, –º–æ–∂–Ω–æ –µ—â–µ –ø–∏—Å–∞—Ç—å `T` –∏ `F` (–Ω–æ –Ω–µ `True` –∏ `False`!)
```{r}
t2 <- T
f2 <- F
```

–≠—Ç–æ –¥—É—Ä–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, —Ç–∞–∫ –∫–∞–∫ R –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `TRUE` –∏ `FALSE`, –Ω–æ –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —ç—Ç–æ–≥–æ `T` –∏ `F`
```{r error=TRUE}
TRUE <- FALSE
TRUE
T <- FALSE
T
```

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å–ª–æ–≤—ã—Ö –∏–ª–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ–∂–µ!

```{r}
comparison <- a == b
comparison
```

–≠—Ç–æ –Ω–∞–º –æ—á–µ–Ω—å –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏: –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞, –∞ —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –∏–≥—Ä–µ —Å–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.  

–ß—Ç–æ–±—ã —ç—Ç–∏–º —Ö–æ—Ä–æ—à–æ —É–º–µ—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –Ω–∞–º –Ω—É–∂–Ω–æ –µ—â–µ –æ—Å–≤–æ–∏—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏. –ü—Ä–æ –æ–¥–∏–Ω –º—ã –Ω–µ–º–Ω–æ–≥–æ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–∏ --- —ç—Ç–æ –Ω–µ (`!`):

```{r}
t1
!t1
!!t1 #–î–≤–æ–π–Ω–æ–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ!
```

–ï—â–µ –µ—Å—Ç—å –ò (–≤—ã–¥–∞—Å—Ç `TRUE` —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –æ–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `TRUE`):

```{r}
t1&t2
t1&f1
```

–ê –µ—â–µ –ò–õ–ò (–≤—ã–¥–∞—Å—Ç `TRUE` –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `TRUE`):

```{r}
t1 | f1
f1 | f2
```

–ï—Å–ª–∏ –∫–æ–º—É-—Ç–æ –≤–¥—Ä—É–≥ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥—Ä—É–≥–æ–µ –ò–õ–ò --- –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `xor()`, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞.

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å —Å —Å–∞–º–æ–π –∑–∞–Ω—É–¥–Ω–æ–π —á–∞—Å—Ç—å—é.
–ü–æ—Ä–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –≤–∞–∂–Ω–æ–º—É –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–º—É. –í–ï–ö–¢–û–†–ê–ú!

## –í–µ–∫—Ç–æ—Ä  {#atomic}

–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ –±—ã–ª–æ –ª–∏–Ω–µ–π–Ω–æ–π –∞–ª–≥–µ–±—Ä—ã (–∏–ª–∏ —É –≤–∞—Å —Å –Ω–µ–π –±—ã–ª–æ –≤—Å–µ –ø–ª–æ—Ö–æ), —Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ **–≤–µ–∫—Ç–æ—Ä** (–∏–ª–∏ **atomic vector** –∏–ª–∏ **atomic**) --- —ç—Ç–æ –Ω–∞–±–æ—Ä (—Å—Ç–æ–ª–±–∏–∫) —á–∏—Å–µ–ª –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.  

> P.S. –ï—Å–ª–∏ –≤—ã –ø—Ä–∏–≤—ã–∫–ª–∏ –∏–∑ —à–∫–æ–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å–∞ —Ñ–∏–∑–∏–∫–∏ —Å—á–∏—Ç–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–∞ —Å—Ç—Ä–µ–ª–æ—á–∫–∞–º–∏, —Ç–æ –Ω–µ —Å–ø–µ—à–∏—Ç–µ –≤–æ–∑–º—É—â–∞—Ç—å—Å—è –∏ –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä–µ–ª–æ—á–∫–∏ –∫–∞–∫ —Ç–æ—á–∫–∏ –∏–∑ –Ω—É–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç {0,0} –¥–æ –∫–∞–∫–æ–π-—Ç–æ —Ç–æ—á–∫–∏ –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, {2,1}. –í–æ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–∞ —á–∏—Å–ª–∞ –∏ –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–º. –ü–æ—ç—Ç–æ–º—É –ø–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –Ω–∞ –≤—Ä–µ–º—è –≤—ã–±—Ä–æ—Å–∏—Ç—å —Å—Ç—Ä–µ–ª–æ—á–∫–∏ –∏–∑ –≥–æ–ª–æ–≤—ã.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –º—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤ R, –Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ, –í—ã –æ–± —ç—Ç–æ–º –¥–∞–∂–µ –Ω–µ –¥–æ–≥–∞–¥—ã–≤–∞–ª–∏—Å—å. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –≤ R –Ω–µ—Ç –∫–∞–∫ —Ç–∞–∫–æ–≤—ã—Ö "–∑–Ω–∞—á–µ–Ω–∏–π", **–µ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–∞ –¥–ª–∏–Ω–æ–π 1**. –¢–∞–∫–∏–µ –¥–µ–ª–∞!

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –Ω—É–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π *`c()`*:

```{r}
c(4,8,15,16,23,42)
c("–•—ç–π", "–•—ç–π", "–•–∞")
```

>–û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –º–µ—Ä–∑–∫–∏—Ö –∏ —Ä–∞–∑–¥—Ä–∞–∂–∞—é—â–∏—Ö –ø—Ä–∏—á–∏–Ω –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ --- —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `—Å` –∏–∑ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤–º–µ—Å—Ç–æ `c` –∏–∑ –ª–∞—Ç–∏–Ω–∏—Ü—ã. –í–∏–¥–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É? –ò —è –Ω–µ –≤–∏–∂—É. –ê R –≤–∏–¥–∏—Ç. –ò –æ–± —ç—Ç–æ–º —Å–æ–æ–±—â–∞–µ—Ç:

```{r error=TRUE}
—Å(3, 4, 5)
```

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –µ—Å—Ç—å —É–¥–æ–±–Ω—ã–π **–æ–ø–µ—Ä–∞—Ç–æ—Ä** `:`

```{r}
1:10
5:-3
```

–≠—Ç–æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –æ—Ç –ø–µ—Ä–≤–æ–≥–æ —á–∏—Å–ª–∞ –¥–æ –≤—Ç–æ—Ä–æ–≥–æ —Å —à–∞–≥–æ–º 1. –í—ã –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç–µ, –∫–∞–∫ —á–∞—Å—Ç–æ —ç—Ç–∞ —à—Ç—É–∫–∞ –Ω–∞–º –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è... –ï—Å–ª–∏ –∂–µ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–µ–∫—Ç–æ—Ä —Å –¥—Ä—É–≥–∏–º —à–∞–≥–æ–º, —Ç–æ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `seq()`:

```{r}
seq(10,100, by = 10)
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –Ω–µ —à–∞–≥, –∞ –¥–ª–∏–Ω—É –≤–µ–∫—Ç–æ—Ä–∞. –¢–æ–≥–¥–∞ —à–∞–≥ —Ñ—É–Ω–∫—Ü–∏—è `seq()` –ø–æ—Å—á–∏—Ç–∞–µ—Ç —Å–∞–º–∞:

```{r}
seq(1,13, length.out = 4)
```

–î—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏—è --- `rep()` --- –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–∞ —Å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç --- –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å, –∞ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç --- —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä—è—Ç—å.

```{r}
rep(1, 5)
```

–ò –ø–µ—Ä–≤—ã–π, –∏ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –º–æ–≥—É—Ç –±—ã—Ç—å –≤–µ–∫—Ç–æ—Ä–∞–º–∏!

```{r}
rep(1:3, 3)
rep(1:3, 1:3)
```


–ï—â–µ –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –≤–µ–∫—Ç–æ—Ä–∞ (—á—Ç–æ –º—ã, –ø–æ —Å—É—Ç–∏, –∏ –¥–µ–ª–∞–ª–∏, –ø—Ä–æ—Å—Ç–æ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –¥–ª–∏–Ω–æ–π 1):
```{r}
v1 <- c("Hey", "Ho")
v2 <- c("Let's", "Go!")
c(v1,v2)
```

### Coercion   {#coercion}

–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –≤—ã –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∞ —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤? –û—à–∏–±–∫–∞? 
–ú—ã —É–∂–µ –æ–±—Å—É–∂–¥–∞–ª–∏, —á—Ç–æ –≤ *atomic* –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º—ã –±—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É. –ê –≤–æ—Ç –≤ R –ø—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ –ø—Ä–æ–π–∑–æ–π–¥–µ—Ç –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ç–∏–ø—ã –∫ "–æ–±—â–µ–º—É –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—é", —Ç–æ –µ—Å—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ–ª–µ–µ "—à–∏—Ä–æ–∫–∏–π" —Ç–∏–ø.

–ù–∞–ø—Ä–∏–º–µ—Ä:  
```{r}
c(FALSE, 2)
```

`FALSE` –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –≤ `0` (–∞ `TRUE` –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –±—ã –≤ `1`), —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ–±–∞ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –≤–µ–∫—Ç–æ—Ä. –¢–æ –∂–µ —Å–∞–º–æ–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –±—ã –≤ —Å–ª—É—á–∞–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏:

```{r}
2 + TRUE
```

–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **coercion**.
–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```{r}
c(TRUE, 3, "–ü—Ä–∏–≤–µ—Ç")
```

–£ R –µ—Å—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–æ—ç—Ä—Å–∏–Ω–≥–∞: 
`NULL < raw < logical < integer < double < complex < character < list < expression`. 
–ú—ã –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ –µ—â–µ –º–Ω–æ–≥–æ–≥–æ –Ω–µ –∑–Ω–∞–µ–º, —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ --- `TRUE` –∏ `FALSE` --- –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ `0` –∏ `1` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –∞ `0` –∏ `1` –≤ —Å—Ç—Ä–æ—á–∫–∏ `"0"` –∏ `"1"`. 

–ï—Å–ª–∏ –í—ã –±–æ–∏—Ç–µ—Å—å –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ coercion, —Ç–æ –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `as.–Ω—É–∂–Ω—ã–π—Ç–∏–ø–¥–∞–Ω–Ω—ã—Ö`:

```{r}
as.numeric(c(TRUE, FALSE, FALSE))
as.character(as.numeric(c(TRUE, FALSE, FALSE)))
```

–ú–æ–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –∏ –æ–±—Ä–∞—Ç–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —á–∏—Å–ª–æ–≤—ã–µ. –ï—Å–ª–∏ —Å—Ä–µ–¥–∏ —á–∏—Å–ª–∞ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—Å—è –±—É–∫–≤–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–π –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π –∑–Ω–∞–∫, —Ç–æ –º—ã –ø–æ–ª—É—á–∏–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ `NA` --- –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–º—ã –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ –Ω–∞—É—á–∏–º—Å—è —Å –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å).

```{r}
as.numeric(c("1", "2", "—Ç—Ä–∏"))
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏   {#vector_op}

–í—Å–µ —Ç–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —á—Ç–æ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –¥–ª–∏–Ω—ã:

```{r}
n <- 1:4
m <- 4:1
n + m
n - m
n * m
n / m
n ^ m + m * (n - m)
```

> –ï—Å–ª–∏ –ø–æ—Å–ª–µ –∫–∞–∫–æ–≥–æ-–Ω–∏–±—É–¥—å MATLAB –í—ã –ø—Ä–∏–≤—ã–∫–ª–∏, —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –ª–∏–Ω–µ–π–Ω–æ–π –∞–ª–≥–µ–±—Ä—ã –∏ `m*n` –±—É–¥–µ—Ç –¥–∞–≤–∞—Ç—å —Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (dot product), —Ç–æ —Å–Ω–æ–≤–∞ –Ω–µ—Ç. –î–ª—è —Å–∫–∞–ª—è—Ä–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å `%` –ø–æ –∫—Ä–∞—è–º:  

```{r}
n %*% m
```

> –ê–±—Å–æ–ª—é—Ç–Ω–æ —Ç–∞–∫ –∂–µ –∏ —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å –º–∞—Ç—Ä–∏—Ü–∞–º–∏ –≤ R, —Ö–æ—Ç—è –ø—Ä–æ –º–∞—Ç—Ä–∏—Ü—ã –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∑–∂–µ.  

–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π –≤ R, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —Ç–∞–∫ –∂–µ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Å —Ü–µ–ª—ã–º–∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏. –°–∫–∞–∂–µ–º, –í—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–≤–ª–µ—á—å –∫–æ—Ä–µ–Ω—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∏—Å–µ–ª, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–µ –Ω—É–∂–Ω—ã –Ω–∏–∫–∞–∫–∏–µ —Ü–∏–∫–ª—ã (–∫–∞–∫ —ç—Ç–æ –æ–±—ã—á–Ω–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è). –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ "—Å–∫–æ—Ä–º–∏—Ç—å" –≤–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –≤–µ–∫—Ç–æ—Ä–∞:

```{r}
sqrt(1:10)
```

### Recycling {#recycling}

–î–æ–ø—É—Å—Ç–∏–º –º—ã —Ö–æ—Ç–∏–º —Å–æ–≤–µ—Ä—à–∏—Ç—å –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –æ–ø–µ—Ä–∞—Ü–∏—é —Å –¥–≤—É–º—è –≤–µ–∫—Ç–æ—Ä–∞–º–∏. –ö–∞–∫ –º—ã —É–±–µ–¥–∏–ª–∏—Å—å, —Å —ç—Ç–∏–º –æ–±—ã—á–Ω–æ –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º, –µ—Å–ª–∏ –æ–Ω–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø–æ –¥–ª–∏–Ω–µ. –ê —á—Ç–æ –µ—Å–ª–∏ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø–æ –¥–ª–∏–Ω–µ? 
–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ! –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ —Ä–µ—Å–∞–π–∫–ª–∏–Ω–≥–∞ (**recycling** = *–ø—Ä–∞–≤–∏–ª–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è*). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–∏–π –≤–µ–∫—Ç–æ—Ä –∫—Ä–∞—Ç–µ–Ω –ø–æ –¥–ª–∏–Ω–µ –¥–ª–∏–Ω–Ω–æ–º—É, —Ç–æ –æ–Ω –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑:

```{r}
n <- 1:4
m <- 1:2
n * m
```

–ê —á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ —Å–æ–≤–µ—Ä—à–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–µ–∫—Ç–æ—Ä–æ–º –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º? –ú–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å —ç—Ç–æ —á–∞—Å—Ç–Ω—ã–º —Å–ª—É—á–∞–µ–º —Ä–µ—Å–∞–π–∫–ª–∏–Ω–≥–∞: –∫–æ—Ä–æ—Ç–∫–∏–π –≤–µ–∫—Ç–æ—Ä –¥–ª–∏–Ω–æ–π 1 –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—Å—è —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –æ–Ω —Å–æ–≤–ø–∞–¥–∞–ª –ø–æ –¥–ª–∏–Ω–µ —Å –¥–ª–∏–Ω–Ω—ã–º:

```{r}
n * 2
```

–ï—Å–ª–∏ –∂–µ –º–µ–Ω—å—à–∏–π –≤–µ–∫—Ç–æ—Ä –Ω–µ –∫—Ä–∞—Ç–µ–Ω –±–æ–ª—å—à–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö –¥–ª–∏–Ω–æ–π 3, –∞ –¥—Ä—É–≥–æ–π –¥–ª–∏–Ω–æ–π 4), —Ç–æ R –ø–æ—Å—á–∏—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ –≤—ã–¥–∞—Å—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. 

```{r}
n + c(3,4,5)
```

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –º–æ–≥—É—Ç –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π –æ—à–∏–±–æ–∫. –ü–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ç–æ–∏—Ç –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ä–µ—Å–∞–π–∫–ª–∏–Ω–≥ –Ω–µ–∫—Ä–∞—Ç–Ω—ã—Ö –ø–æ –¥–ª–∏–Ω–µ –≤–µ–∫—Ç–æ—Ä–æ–≤. [–°–º. –∑–¥–µ—Å—å](https://stackoverflow.com/questions/6555651/under-what-circumstances-does-r-recycle). –ê –≤–æ—Ç —Ä–µ—Å–∞–π–∫–ª–∏–Ω–≥ –∫—Ä–∞—Ç–Ω—ã—Ö –ø–æ –¥–ª–∏–Ω–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ --- —ç—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–∞—è —à—Ç—É–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—á–µ–Ω—å —á–∞—Å—Ç–æ. 

### –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ {#index_atomic}  

–ò—Ç–∞–∫, –º—ã –ø–æ–¥–æ—à–ª–∏ –∫ –æ–¥–Ω–æ–º—É –∏–∑ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤. –ò –æ–¥–Ω–æ–º—É –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö. –û—Ç —Ç–æ–≥–æ, –∫–∞–∫ —Ö–æ—Ä–æ—à–æ –≤—ã –Ω–∞—É—á–∏—Å—å —Å —ç—Ç–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å, –∑–∞–≤–∏—Å–∏—Ç –≤–µ—Å—å –í–∞—à –¥–∞–ª—å–Ω–µ–π—à–∏–π —É—Å–ø–µ—Ö –Ω–∞ R-–ø–æ–ø—Ä–∏—â–µ!

–†–µ—á—å –ø–æ–π–¥–µ—Ç –æ–± **–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏** –≤–µ–∫—Ç–æ—Ä–æ–≤. –ó–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é –í–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è —Ä–µ—à–∞—Ç—å –∫–∞–∂–¥—ã–µ –ø—è—Ç—å –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã –≤ R - –∫–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∏–∑ –≤–µ–∫—Ç–æ—Ä–∞ (–∏–ª–∏ –∂–µ —Å–ø–∏—Å–∫–∞, –º–∞—Ç—Ä–∏—Ü—ã –∏ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞) –∫–∞–∫—É—é-—Ç–æ –µ–≥–æ —á–∞—Å—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–æ—á–∫–∏ `[]` (–Ω–µ –∫—Ä—É–≥–ª—ã–µ - –æ–Ω–∏ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π!).  

–°–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ - –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–æ–º–µ—Ä—É –∏–Ω–¥–µ–∫—Å–∞, —Ç.–µ. –ø–æ—Ä—è–¥–∫—É –∑–Ω–∞—á–µ–Ω–∏—è –≤ –≤–µ–∫—Ç–æ—Ä–µ. 

```{r}
n <- 1:10
n[1]
n[10]
```

> –ï—Å–ª–∏ –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å –¥—Ä—É–≥–∏–º–∏ —è–∑—ã–∫–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–µ MATLAB, —Ç–∞–º –≤—Å–µ —Ç–∞–∫ –∂–µ) –∏ —É–∂–µ –Ω–∞—É—á–∏–ª–∏—Å—å –¥—É–º–∞—Ç—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å 0 --- —ç—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –∏ –æ—á–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω—É –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–≤—ã–∫–ª–∏—Å—å —Å —ç—Ç–∏–º), —Ç–æ –≤ R –í–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ø–µ—Ä–µ—É—á–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ. –ó–¥–µ—Å—å –ø–µ—Ä–≤—ã–π –∏–Ω–¥–µ–∫—Å --- —ç—Ç–æ 1, –∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–≤–µ–Ω –¥–ª–∏–Ω–µ –≤–µ–∫—Ç–æ—Ä–∞ --- –µ–µ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `length()`. –° –æ–±–æ–∏—Ö —Å—Ç–æ—Ä–æ–Ω –∏–Ω–¥–µ–∫—Å—ã –±–µ—Ä—É—Ç—Å—è –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.   

–° –ø–æ–º–æ—â—å—é –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å –∏–º–µ—é—â–∏–µ—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –≤–µ–∫—Ç–æ—Ä–µ, –Ω–æ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∏–º –Ω–æ–≤—ã–µ:

```{r}
n[3] <- 20
n
```

–ö–æ–Ω–µ—á–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–ª—ã–µ –≤–µ–∫—Ç–æ—Ä—ã –¥–ª—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è:

```{r}
n[4:7]
n[10:1]
```

–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–∏–Ω—É—Å–æ–º –≤—ã–¥–∞—Å—Ç –≤–∞–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ –∫—Ä–æ–º–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö (–ø—Ä–æ—Å—Ç–∏—Ç–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Python, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç –∑–¥–µ—Å—å –æ—Ç—Å—á–µ—Ç —Å –∫–æ–Ω—Ü–∞...):

```{r}
n[-1]
n[c(-4, -5)]
```

–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä –¥–ª—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω—É–∂–µ–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä —Ç–∞–∫–æ–π –∂–µ –¥–ª–∏–Ω—ã:

```{r}
n[c(TRUE,FALSE,TRUE,FALSE,TRUE,FALSE,TRUE,FALSE,TRUE,FALSE)]
```

–ù—É –∞ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Ä–∞–≤–Ω—ã, —Ç–æ —Ç—É—Ç –±—É–¥–µ—Ç —Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ —Ä–µ—Å–∞–π–∫–ª–∏–Ω–≥–∞! 

```{r}
n[c(TRUE,FALSE)] #—Ç–æ –∂–µ —Å–∞–º–æ–µ - recycling rule!
```

–ï—Å—Ç—å –µ—â–µ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤, –Ω–æ –æ–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ–ª–µ–µ —Ä–µ–¥–∫–∏–π: –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –≤–µ–∫—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ (–Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∏–º–µ–Ω–∞:

```{r}
my_named_vector <- c(first = 1, second = 2, third = 3)
my_named_vector['first']
```

–ê –µ—â–µ –º–æ–∂–Ω–æ "–≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å" –∏–º–µ–Ω–∞ –∏–∑ –≤–µ–∫—Ç–æ—Ä–∞ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `names()` –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–æ–≤—ã–µ.

```{r}
d <- 1:4
names(d) <- letters[1:4]
d["a"]
```

> `letters` - —ç—Ç–æ "–∑–∞—à–∏—Ç–∞—è" –≤ R –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ - –≤–µ–∫—Ç–æ—Ä –±—É–∫–≤ –æ—Ç a –¥–æ z. –ò–Ω–æ–≥–¥–∞ —ç—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ! –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `LETTERS` - —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏. –ê –µ—â–µ –µ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ —á–∏—Å–ª–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `pi`.  

–¢–µ–ø–µ—Ä—å –ø–æ—Å—á–∏—Ç–∞–µ–º —Å—Ä–µ–¥–Ω–µ–µ –≤–µ–∫—Ç–æ—Ä–∞ `n`:

```{r}
mean(n)
```

–ê –∫–∞–∫ –≤—ã—Ç–∞—â–∏—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ?  

–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä --- –∫–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–æ–ª—å—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ:  

```{r}
larger <- n > mean(n)
larger
```

–ê —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –¥–ª—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ `n`:  

```{r}
n[larger]
```

–ú–æ–∂–Ω–æ –≤—Å–µ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ—á–∫—É:  

```{r}
n[n>mean(n)]
```

–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–æ—á–∫–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ç–æ, —á—Ç–æ –º—ã –±—É–¥–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–µ–ª–∞—Ç—å –≤ R: –≤—ã—á–ª–µ–Ω—è—Ç—å (subset) –∏–∑ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫—É—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.   

### NA --- –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è  {#na} 

–í —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —É –Ω–∞—Å —á–∞—Å—Ç–æ —á–µ–≥–æ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –∑–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –∏–∑–º–µ—Ä–µ–Ω–∏–µ. –î–ª—è —ç—Ç–æ–≥–æ –≤ R –µ—Å—Ç—å `NA`. `NA` --- —ç—Ç–æ –Ω–µ —Å—Ç—Ä–æ–∫–∞ `"NA"`, –Ω–µ `0`, –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `""` –∏ –Ω–µ `FALSE`. `NA` --- —ç—Ç–æ `NA`.
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ `NA` –±—É–¥—É—Ç –≤—ã–¥–∞–≤–∞—Ç—å `NA`:

```{r}
missed <- NA
missed == "NA"
missed == ""
missed == NA
```

–ó–∞–º–µ—Ç—å—Ç–µ: –¥–∞–∂–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `NA`  c  `NA` –≤—ã–¥–∞–µ—Ç `NA`!

–ò–Ω–æ–≥–¥–∞ `NA` –≤ –¥–∞–Ω–Ω—ã—Ö –æ—á–µ–Ω—å –±–µ—Å–∏—Ç:

```{r}
n[5] <- NA
n
mean(n)
```

–ß—Ç–æ –∂–µ –¥–µ–ª–∞—Ç—å?  
–ù–∞–≤–µ—Ä–Ω–æ–µ, –Ω–∞–¥–æ —Å—Ä–∞–≤–Ω–∏—Ç—å –≤–µ–∫—Ç–æ—Ä —Å `NA` –∏ –∏—Å–∫–ª—é—á–∏—Ç—å —ç—Ç–∏—Ö –ø–∞–∫–æ—Å—Ç–Ω–∏–∫–æ–≤. –î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º:

```{r}
n == NA
```

–ê—Ö –¥–∞, –º—ã –≤–µ–¥—å —Ç–æ–ª—å–∫–æ —á—Ç–æ —É–∑–Ω–∞–ª–∏, —á—Ç–æ –¥–∞–∂–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `NA` c `NA` –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ `NA`.

–ß—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å—Å—è –∏–∑ —ç—Ç–æ–π –Ω–µ–ø—Ä–æ—Å—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `is.na()`:

```{r}
is.na(n)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `is.na(n)` –≤—ã–¥–∞–µ—Ç `FALSE` –≤ —Ç–µ—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ —É –Ω–∞—Å —á–∏—Å–ª–∞ –∏ `TRUE` —Ç–∞–º, –≥–¥–µ —É –Ω–∞—Å `NA`. –ù–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞–æ–±–æ—Ä–æ—Ç. –ó–¥–µ—Å—å –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä `!` (–º—ã –µ–≥–æ —É–∂–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∏), –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```{r}
n[!is.na(n)]
```

–£—Ä–∞, –º—ã –º–æ–∂–µ–º —Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–µ–µ!

```{r}
mean(n[!is.na(n)])
```

–¢–µ–ø–µ—Ä—å –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –∑–∞—á–µ–º –Ω—É–∂–Ω–æ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ (`!`)
 
–í–æ–æ–±—â–µ, –µ—Å—Ç—å –µ—â–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–µ–µ, –µ—Å–ª–∏ –µ—Å—Ç—å `NA`. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ –∑–∞–ª–µ–∑—Ç—å –≤ —Ö—ç–ª–ø –ø–æ —Ñ—É–Ω–∫—Ü–∏–∏ *mean()*:

```{r, eval = FALSE}
?mean()
```

–í —Ö—ç–ª–ø–µ –º—ã –Ω–∞–π–¥–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä `na.rm =`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –¥–µ—Ñ–æ–ª—Ç—É `FALSE`. –í—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å!

```{r}
mean(n, na.rm = TRUE)
```

–ï–µ–µ–µ–µ!  

> `NA` –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤ –≤–µ–∫—Ç–æ—Ä–∞—Ö –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ —Ç–æ–∂–µ. –ö—Ä–æ–º–µ `NA` –µ—Å—Ç—å –µ—â–µ `NaN` --- —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏. `NaN` —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ Not a Number –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–∞–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∫–∞–∫ `0/0`.

### –í –ª—é–±–æ–π –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ --- –∏—â–∏—Ç–µ –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫–µ  {#google}

–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –∏—Å–∫–∞—Ç—å –≤ —Ö—ç–ª–ø–µ, –∏–ª–∏ —Ö—ç–ª–ø–∞ –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —Ç–æ... –∏—â–∏—Ç–µ –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫–µ!

![](images/2AmXWgVoULk.jpg)

–ù–µ—Ç –Ω–∏—á–µ–≥–æ –ø–æ—Å—Ç—ã–¥–Ω–æ–≥–æ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –∏—Å–∫–∞—Ç—å –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º. –≠—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–æ –±–ª–∞–≥–æ –∏ –¥–∞ –ø–æ–º–æ–≥—É—Ç –í–∞–º *Stackoverflow* –∏ –±–µ—Å—á–∏—Å–ª–µ–Ω–Ω—ã–µ R-—Ç—É—Ç–æ—Ä–∏–∞–ª—ã! 

<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">Computer Programming To Be Officially Renamed ‚ÄúGoogling Stack Overflow‚Äù<br><br>Source: <a href="http://t.co/xu7acfXvFF">http://t.co/xu7acfXvFF</a> <a href="http://t.co/iJ9k7aAVhd">pic.twitter.com/iJ9k7aAVhd</a></p>&mdash; Stack Exchange <a href="https://twitter.com/StackExchange/status/623139544276299776?ref_src=twsrc%5Etfw">July 20, 2015</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
–ì–ª–∞–≤–Ω–æ–µ, –ø–æ–º–Ω–∏—Ç–µ: –∑–∞–≥—É–≥–ª–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –æ—Ç–≤–µ—Ç –≤—Å–µ–≥–¥–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ù–∞–¥–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –∏ –ø–æ—á–µ–º—É –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç. –ò–Ω–∞—á–µ —á—Ç–æ-—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫. 

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—É–≥–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É --- –Ω–µ —Ç–∞–∫ —É–∂ –∏ –ø—Ä–æ—Å—Ç–æ.

<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">Does anyone ever get good at R or do they just get good at googling how to do things in R</p>&mdash; üî¨üñ§Lauren M. Seyler, Ph.D.‚ù§Ô∏è‚öí href="https://twitter.com/mousquemere/status/1125522375141883907?ref_src=twsrc%5Etfw">May 6, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 


–ò—Ç–∞–∫, —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –º—ã –±–æ–ª–µ–µ-–º–µ–Ω–µ–µ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å. –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –≤–µ–∫—Ç–æ—Ä–∞ --- —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –∫—Ä–∞–µ—É–≥–æ–ª—å–Ω—ã—Ö –∫–∞–º–Ω–µ–π –í–∞—à–µ–π —Ä–∞–±–æ—Ç—ã –≤ R. –ï—Å–ª–∏ –í—ã —Ö–æ—Ä–æ—à–æ —Å –Ω–∏–º–∏ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å, —Ç–æ –¥–∞–ª—å—à–µ –≤—Å–µ –±—É–¥–µ—Ç –¥–æ–≤–æ–ª—å–Ω–æ –Ω–µ—Å–ª–æ–∂–Ω–æ. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –≤–µ–∫—Ç–æ—Ä–∞ --- —ç—Ç–æ –Ω–µ –≤—Å–µ. –ï—Å—Ç—å –µ—â–µ –¥–≤–∞ –≤–∞–∂–Ω—ã—Ö —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö: —Å–ø–∏—Å–∫–∏ (**list**) –∏ –º–∞—Ç—Ä–∏—Ü—ã (**matrix**). –ò—Ö –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω–æ–µ "—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ" –≤–µ–∫—Ç–æ—Ä–æ–≤, –∫–∞–∂–¥—ã–π –≤ —Å–≤–æ—é —Å—Ç–æ—Ä–æ–Ω—É. –ù—É –∞ —Å–ø–∏—Å–∫–∏ –∏ –º–∞—Ç—Ä–∏—Ü—ã –Ω—É–∂–Ω—ã —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ R --- **data.frame**.  

![](images/New-Mind-Map.jpg)


## –ú–∞—Ç—Ä–∏—Ü—ã (matrix)  {#matrix}

–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –í–∞—Å –ø—É–≥–∞–µ—Ç —ç—Ç–æ —Å–ª–æ–≤–æ, —Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –∑—Ä—è. –ú–∞—Ç—Ä–∏—Ü–∞ --- —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å "–¥–≤—É–º–µ—Ä–Ω—ã–π" –≤–µ–∫—Ç–æ—Ä: –≤–µ–∫—Ç–æ—Ä, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞, –Ω–æ –∏ —à–∏—Ä–∏–Ω–∞. –°–æ–∑–¥–∞—Ç—å –º–∞—Ç—Ä–∏—Ü—É –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `matrix()` –∏–∑ –≤–µ–∫—Ç–æ—Ä–∞, —É–∫–∞–∑–∞–≤ –ø—Ä–∏ —ç—Ç–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–æ–ª–±—Ü–æ–≤.

```{r}
A <- matrix(1:20, nrow=5,ncol=4)
A
```

–ï—Å–ª–∏ –º—ã –∑–Ω–∞–µ–º —Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –º–∞—Ç—Ä–∏—Ü–µ –∏ —Å–∫–æ–ª—å–∫–æ –º—ã —Ö–æ—Ç–∏–º —Å—Ç—Ä–æ–∫, —Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

```{r}
A <- matrix(1:20, nrow=5)
A
```

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏: –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –º–∞—Ç—Ä–∏—Ü–∞ --- —ç—Ç–æ —É–∂–µ –¥–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤, —Ç–æ —É –Ω–µ–≥–æ –∏–º–µ–µ—Ç—Å—è –¥–≤–∞ –∏–Ω–¥–µ–∫—Å–∞. –≠—Ç–∏ –¥–≤–∞ –∏–Ω–¥–µ–∫—Å–∞ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –∑–∞–ø—è—Ç—ã–º–∏.

```{r}
A[2,3]
A[2:4, 1:3]
```

–ü–µ—Ä–≤—ã–π –∏–Ω–¥–µ–∫—Å --- –≤—ã–±–æ—Ä —Å—Ç—Ä–æ–∫, –≤—Ç–æ—Ä–æ–π –∏–Ω–¥–µ–∫—Å --- –≤—ã–±–æ—Ä –∫–æ–ª–æ–Ω–æ–∫. –ï—Å–ª–∏ –∂–µ –º—ã –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞, —Ç–æ –º—ã –≤—ã–±–∏—Ä–∞–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏/–∫–æ–ª–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –æ—Å—Ç–∞–≤–∏–ª–∏ –º—ã –ø–æ–ª–µ –ø—É—Å—Ç—ã–º –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π:  

```{r}
A[,1:3]
A[2:4,]
A[,]
```


–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, —ç—Ç–æ –≤—Å–µ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –æ –º–∞—Ç—Ä–∏—Ü–∞—Ö. –ú–∞—Ç—Ä–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ R –¥–æ–≤–æ–ª—å–Ω–æ —Ä–µ–¥–∫–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å MATLAB. –ù–æ –≤–æ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç—Ä–∏—Ü—ã —Ö–æ—Ä–æ—à–æ –±—ã —É–º–µ—Ç—å: —ç—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ —Ä–∞–±–æ—Ç–µ —Å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞–º–∏.

> –¢–æ, —á—Ç–æ –º–∞—Ç—Ä–∏—Ü–∞ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –¥–≤—É–º–µ—Ä–Ω—ã–π –≤–µ–∫—Ç–æ—Ä, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–∞—Ñ–æ—Ä–æ–π: –≤ R –º–∞—Ç—Ä–∏—Ü–∞ - —ç—Ç–æ –ø–æ —Å—É—Ç–∏ —Å–≤–æ–µ–π –≤–µ–∫—Ç–æ—Ä —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ *–∞—Ç—Ä–∏–±—É—Ç–∞–º–∏* `dim` –∏ `dimnames`. –ê—Ç—Ä–∏–±—É—Ç—ã --- —ç—Ç–æ –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤, –¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –µ—Å—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Ç–∏–ø–∞ –∏ –¥–ª–∏–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã. –ú–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–ª–∏ —É–¥–∞–ª—è—Ç—å —É–∂–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã–µ: —É–¥–∞–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ `dim` —É –º–∞—Ç—Ä–∏—Ü—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç –µ–µ –≤ –æ–±—ã—á–Ω—ã–π –≤–µ–∫—Ç–æ—Ä. –ü—Ä–æ –∞—Ç—Ä–∏–±—É—Ç—ã –ø–æ–¥—Ä–æ–±–Ω–µ–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](https://perso.esiee.fr/~courivad/R/06-objects.html) –∏–ª–∏ –Ω–∞ —Å—Ç—Ä. 99--101 –∫–Ω–∏–≥–∏ "R in a Nutshell" [@adler2010r].

## –°–ø–∏—Å–∫–∏ (list)  {#list}

–¢–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ –≤–µ–∫—Ç–æ—Ä –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏. –ò –ø–æ–ª—É—á–∏–º —Å–ø–∏—Å–æ–∫!

```{r}
l <- list(42, "–ü–∞–º –ø–∞–º", TRUE)
l
```

–ê —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç–∞–º –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è —Å–∞–º—ã–µ —Ä–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –¥—Ä—É–≥–∏–µ —Å–ø–∏—Å–∫–∏ –∏ –≤–µ–∫—Ç–æ—Ä—ã!  

```{r}
lbig <- list(c("Wow", "this", "list", "is", "so", "big"), "16", l)
lbig
```

–ï—Å–ª–∏ —É –Ω–∞—Å —Å–ª–æ–∂–Ω—ã–π —Å–ø–∏—Å–æ–∫, —Ç–æ –µ—Å—Ç—å –æ—á–µ–Ω—å –∫–ª–∞—Å—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω, –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `str()`:  

```{r}
str(lbig)
```

–ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –º—ã –º–æ–∂–µ–º –¥–∞–≤–∞—Ç—å –∏–º–µ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å–ø–∏—Å–∫–∞:  

```{r}
namedl <- list(age = 24, PhDstudent = T, language = "Russian")
namedl
```

–ö —Å–ø–∏—Å–∫—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é –∏–Ω–¥–µ–∫—Å–æ–≤, —Ç–∞–∫ –∏ –ø–æ –∏–º–µ–Ω–∞–º. –ù–∞—á–Ω–µ–º —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ:  

```{r}
namedl$age
```

–ê –≤–æ—Ç —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ —Å–ª–æ–∂–Ω–µ–µ, –∏ –≤ —ç—Ç–æ–º –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è. –î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, –∫–∞–∫ –º—ã –¥–µ–ª–∞–ª–∏ —ç—Ç–æ —Ä–∞–Ω—å—à–µ:  
```{r}
namedl[1]
```

–ú—ã, –ø–æ —Å—É—Ç–∏, –ø–æ–ª—É—á–∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ - –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ —á–∞—Å—Ç—å —Å–ø–∏—Å–∫–∞, —Ç.–µ. –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –¥–ª–∏–Ω–æ–π –æ–¥–∏–Ω:  

```{r}
class(namedl)
class(namedl[1])
```

–ê –≤–æ—Ç —á—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ —Å–∞–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ (–∏ —Å–¥–µ–ª–∞—Ç—å —Å –Ω–∏–º —á—Ç–æ-—Ç–æ —Ö–æ—Ä–æ—à–µ–µ) –Ω–∞–º –Ω—É–∂–Ω–∞ –Ω–µ –æ–¥–Ω–∞, –∞ –¥–≤–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ—á–∫–∏:  

```{r}
namedl[[1]]
class(namedl[[1]])
```

<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">Indexing lists in <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a>. Inspired by the Residence Inn <a href="http://t.co/YQ6axb2w7t">pic.twitter.com/YQ6axb2w7t</a></p>&mdash; Hadley Wickham (@ href="https://twitter.com/hadleywickham/status/643381054758363136?ref_src=twsrc%5Etfw">September 14, 2015</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8">

</script> 


–ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –≤–µ–∫—Ç–æ—Ä–æ–º, –∫ —ç–ª–µ–º–µ–Ω—Ç—É —Å–ø–∏—Å–∫–∞ –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∏.

```{r list}
namedl[['age']]
```

–•–æ—Ç—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ --- –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞–∫–∞ $.

> –°–ø–∏—Å–∫–∏ –¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ R, –Ω–æ —Ä–µ–∂–µ, —á–µ–º –≤ Python. –°–æ –º–Ω–æ–≥–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ R, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤, –æ–±—ä–µ–∫—Ç—ã ggplot –∏ —Ç.–¥. —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–º–µ–Ω–Ω–æ –∫–∞–∫ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ --- –∫ –Ω–∏–º –≤—Å–µ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –º—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ–º –≤ –≤–∏–¥–µ –¥—Ä–µ–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã --- —Ö–æ—á–µ—à—å –Ω–µ —Ö–æ—á–µ—à—å, –∞ –ø—Ä–∏–¥–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º –∫–∞–∫ —Å–æ —Å–ø–∏—Å–∫–æ–º. –ù–æ –æ–±—ã—á–Ω–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å—Ç–æ–∏—Ç –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º.

## Data.frame  {#df}

–ò—Ç–∞–∫, –º—ã –ø–µ—Ä–µ—à–ª–∏ –∫ —Å–∞–º–æ–º—É –≥–ª–∞–≤–Ω–æ–º—É. –°–∞–º–æ–º—É-—Å–∞–º–æ–º—É. –î–∞—Ç–∞—Ñ—Ä–µ–π–º—ã (**data.frames**). –ë–æ–ª–µ–µ —Ç–æ–≥–æ, —Å–µ–π—á–∞—Å —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ, –∑–∞—á–µ–º –Ω–∞–º –Ω—É–∂–Ω–æ –±—ã–ª–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —Å–æ –≤—Å–µ–º–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Ç–µ–º–∞–º–∏.

–ë–µ–∑ –≤–µ–∫—Ç–æ—Ä–æ–≤ –º—ã –Ω–µ —Å–º–æ–≥–ª–∏ –±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –º–∞—Ç—Ä–∏—Ü–∞–º–∏ –∏ —Å–ø–∏—Å–∫–∞–º–∏. –ê –±–µ–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –º—ã –Ω–µ —Å–º–æ–∂–µ–º –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Ç–∞–∫–æ–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º.  

```{r}
name <- c("Ivan", "Eugeny", "Lena", "Misha", "Sasha") 
age <- c(26, 34, 23, 27, 26) 
student <- c(FALSE, FALSE, TRUE, TRUE, TRUE) 
df = data.frame(name, age, student)  
df
str(df)
```

–í–æ–æ–±—â–µ, –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ —Å–ø–∏—Å–æ–∫, –Ω–µ –ø—Ä–∞–≤–¥–∞ –ª–∏? –¢–∞–∫ –∏ –µ—Å—Ç—å, –¥–∞—Ç–∞—Ñ—Ä–µ–π–º --- —ç—Ç–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ –ø—Ä–æ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞, –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è–µ—Ç—Å—è atomic –≤–µ–∫—Ç–æ—Ä–æ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Å–ø–∏—Å–æ–∫ –í—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª–∏ "–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ". –ï—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, —Ç–æ —Ç–µ–ø–µ—Ä—å "–ø–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ" –µ–≥–æ —É —Å–µ–±—è –≤ –≥–æ–ª–æ–≤–µ. –¢–∞–∫, —á—Ç–æ–± –Ω–∞–∑–≤–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ –æ–∫–∞–∑–∞–ª–∏—Å—å —Å–≤–µ—Ä—Ö—É, –∞ –∫–æ–ª–æ–Ω–∫–∏ —Å—Ç–∞–ª–∏ —Å—Ç–æ–ª–±—Ü–∞–º–∏. –ü–æ—Å–∫–æ–ª—å–∫—É –¥–ª–∏–Ω–∞ –≤—Å–µ—Ö —ç—Ç–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ —Ä–∞–≤–Ω–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ!), —Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ç–∞–±–ª–∏—á–∫—É, –ø–æ—Ö–æ–∂—É—é –Ω–∞ –º–∞—Ç—Ä–∏—Ü—É. –ù–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–∞—Ç—Ä–∏—Ü—ã, —Ä–∞–∑–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –º–æ–≥—É—Ç –∏–º–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö: –ø–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ --- character, –≤—Ç–æ—Ä–∞—è –∫–æ–ª–æ–Ω–∫–∞ --- numeric, —Ç—Ä–µ—Ç—å—è –∫–æ–ª–æ–Ω–∫–∞ --- logical. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–º –º–æ–∂–Ω–æ –∏ –∫–∞–∫ —Å –ø—Ä–æ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º, –∏ –∫–∞–∫ —Å –º–∞—Ç—Ä–∏—Ü–µ–π:  

```{r}
df$age[2:3]
```

–ó–¥–µ—Å—å –º—ã —Å–Ω–∞—á–∞–ª–∞ –≤—ã—Ç–∞—â–∏–ª–∏ –∫–æ–ª–æ–Ω–∫—É `age` —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `$`. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–≤–æ–π –≤–µ–∫—Ç–æ—Ä, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –≤—ã—Ç–∞—â–∏–ª–∏ –∫—É—Å–æ–∫, –≤—ã–±—Ä–∞–≤ –∏–Ω–¥–µ–∫—Å—ã `2` –∏ `3`.

–ò—Å–ø–æ–ª—å–∑—É—è –æ–ø–µ—Ä–∞—Ç–æ—Ä `$` –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞:  

```{r}
df$lovesR <- TRUE #–ø—Ä–∞–≤–∏–ª–æ recycling - —É–∑–Ω–∞–ª–∏? 
df
```

–ù—É –∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é –¥–≤—É—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –∫–∞–∫ –º—ã —ç—Ç–æ –¥–µ–ª–∞–ª–∏ —Å –º–∞—Ç—Ä–∏—Ü–µ–π:

```{r}
df[3:5, 2:3]
```

–ö–∞–∫ –∏ —Å –º–∞—Ç—Ä–∏—Ü–∞–º–∏, –ø–µ—Ä–≤—ã–π –∏–Ω–¥–µ–∫—Å –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ç—Ä–æ—á–∫–∏, –∞ –≤—Ç–æ—Ä–æ–π --- —Å—Ç–æ–ª–±—Ü—ã.

–ê –µ—â–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –≤–Ω—É—Ç—Ä–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫:

```{r}
df[1:2,"age"]
```


–ò –∑–¥–µ—Å—å –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–µ–≤–æ–æ–±—Ä–∞–∑–∏–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏! –£–∑–Ω–∞–µ–º, –ª—é–±—è—Ç –ª–∏ R —Ç–µ, –∫—Ç–æ –º–æ–ª–æ–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ:

```{r}
df[df$age < mean(df$age), 4]
```

–≠—Ç—É –∂–µ –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥—Ä—É–≥–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

```{r dataframe}
df$lovesR[df$age < mean(df$age)]
df[df$age < mean(df$age), 'lovesR']
```

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –ø–æ–¥—Ö–æ–¥—è—Ç —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ --- —Ç–µ–º –Ω–µ –º–µ–Ω–µ–µ, —Å—Ç–æ–∏—Ç –æ–≤–ª–∞–¥–µ—Ç—å –∏–º–∏ –≤—Å–µ–º–∏.

–î–∞—Ç–∞—Ñ—Ä–µ–π–º—ã —É–¥–æ–±–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤ RStudio. –î–ª—è —ç—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `View(df)` –∏–ª–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–∏ –Ω—É–∂–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ —Å–ø–∏—Å–∫–∞ –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞ (—Ç–∞–º –≥–¥–µ Environment). –¢–æ–≥–¥–∞ —É–≤–∏–¥–∏—Ç–µ —Ç–∞–±–ª–∏—á–∫—É, –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂—É—é –Ω–∞ Excel –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏. –¢–∞–º –∂–µ –µ—Å—Ç—å –∏ –≤—Å—è–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –ø–æ–∏—Å–∫–∞... –ù–æ, –∫–æ–Ω–µ—á–Ω–æ, –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ –≤—Å–µ —ç—Ç–∏ –≤–µ—â–∏ –¥–µ–ª–∞—Ç—å —Ä—É–∫–∞–º–∏, —Ç.–µ. —Å –ø–æ–º–æ—â—å—é –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞.

–ù–∞ —ç—Ç–æ–º –ø–æ—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å —Å –≤–≤–µ–¥–µ–Ω–∏–µ–º –∏ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º.


## –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç—É —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ {#real_data}  

–ò—Ç–∞–∫, –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º. –ú—ã –Ω–∞—á–Ω–µ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ (—Ç–∞–∫ –º—ã –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –ª—é–±–æ–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö) –ø–æ –ò–≥—Ä–µ –ü—Ä–µ—Å—Ç–æ–ª–æ–≤, –∞ —Ç–æ—á–Ω–µ–µ, –ø–æ –∫–Ω–∏–≥–∞–º —Ü–∏–∫–ª–∞ *"–ü–µ—Å–Ω—å –ª—å–¥–∞ –∏ –ø–ª–∞–º–µ–Ω–∏"* –î–∂. –ú–∞—Ä—Ç–∏–Ω–∞. –î–∞, –±—É–¥—É—Ç —Å–ø–æ–π–ª–µ—Ä—ã, –Ω–æ —Å–µ—Ä–∏–∞–ª —É–∂–µ –¥–∞–≤–Ω–æ –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –∏ —Å–∏–ª—å–Ω–æ —Ä–∞–∑–æ—à–µ–ª—Å—è —Å –∫–Ω–∏–≥–∞–º–∏...

### –†–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞ –∏ –ø—Ä–æ–µ–∫—Ç—ã {#wd}

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –ø–æ [—Å—Å—ã–ª–∫–µ](https://raw.githubusercontent.com/Pozdniakov/stats/master/data/character-deaths.csv)

–û–Ω, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø–æ—è–≤–∏–ª—Å—è —É –í–∞—Å –≤ –ø–∞–ø–∫–µ "–ó–∞–≥—Ä—É–∑–∫–∏". –ï—Å–ª–∏ –º—ã –±—É–¥–µ–º –ø—Ä–æ—Å—Ç–æ –ø—ã—Ç–∞—Ç—å—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `read.csv()`  --- –º—ã –∫ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ –ø–µ—Ä–µ–π–¥–µ–º), —É–∫–∞–∑–∞–≤ –µ–≥–æ –∏–º—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, —Ç–æ –Ω–∞—Ç–∫–Ω–µ–º—Å—è –Ω–∞ —Ç–∞–∫—É—é –æ—à–∏–±–∫—É:

> –û—à–∏–±–∫–∞ –≤ file(file, "rt") :–Ω–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
> –í–¥–æ–±–∞–≤–æ–∫: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
> –í file(file, "rt") :
>   –Ω–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª 'character-deaths.csv': No such file or directory

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ R –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª. –í–æ–æ–±—â–µ-—Ç–æ –º—ã –¥–∞–∂–µ –Ω–µ —Å–∫–∞–∑–∞–ª–∏, –≥–¥–µ –∏—Å–∫–∞—Ç—å. –ù–∞–º –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏—Ç—å –º–µ—Å—Ç–æ, –≥–¥–µ R –∏—â–µ—Ç –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–∞–º–∏ —Ñ–∞–π–ª—ã. –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤.

- –ú–∞–≥–æ–º–µ—Ç –∏–¥–µ—Ç –∫ –≥–æ—Ä–µ: –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∞—è –ø–∞–ø–∫–∞ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–±–æ—á–µ–π —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `getwd()` (–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤), –Ω–∞–π—Ç–∏ —ç—Ç—É –ø–∞–ø–∫—É –≤ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–µ –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ç—É–¥–∞ —Ñ–∞–π–ª. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º:

```{r, eval = FALSE}
got <- read.csv("character-deaths.csv")
```

- –ì–æ—Ä–∞ –∏–¥–µ—Ç –∫ –ú–∞–≥–æ–º–µ—Ç—É: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–∏.

–ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–º–µ–Ω–∏—Ç—å —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É —Å –ø–æ–º–æ—â—å—é `setwd()` –Ω–∞ —Ç—É, –≥–¥–µ —Å–µ–π—á–∞—Å –ª–µ–∂–∏—Ç —Ñ–∞–π–ª, –ø—Ä–æ–ø–∏—Å–∞–≤ –ø—É—Ç—å –¥–æ —ç—Ç–æ–π –ø–∞–ø–∫–∏. –¢–µ–ø–µ—Ä—å —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–µ:

```{r, eval = FALSE}
got <- read.csv("character-deaths.csv")
```

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –ö–∞–∫ –º–∏–Ω–∏–º—É–º, —ç—Ç–æ —Å—Ä–∞–∑—É –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.

- –ì–æ—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç –ú–∞–≥–æ–º–µ—Ç–∞ –ø–æ –º–µ—Å—Ç—É –ø—Ä–æ–ø–∏—Å–∫–∏: —É–∫–∞–∑–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø—É—Ç–∏ —Ñ–∞–π–ª–∞.

```{r, eval = FALSE}
got <- read.csv("/Users/Username/Some_Folder/character-deaths.csv")
```

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å—Ç—Ä–∞–¥–∞–µ—Ç —Ç–µ–º–∏ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞–º–∏, —á—Ç–æ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π, –ø–æ—ç—Ç–æ–º—É —Ç–æ–∂–µ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. 

> –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Windows –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: –∑–Ω–∞–∫ `/` —è–≤–ª—è–µ—Ç—Å—è –æ—Å–æ–±—ã–º –∑–Ω–∞–∫–æ–º –¥–ª—è R, –ø–æ—ç—Ç–æ–º—É –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–æ–π–Ω–æ–π `//`.

- –ú–∞–≥–æ–º–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–Ω–æ–ø–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: Import Dataset.

–í–æ –≤–∫–ª–∞–¥–∫–µ Environment —Å–ø—Ä–∞–≤–∞ –≤ –æ–∫–Ω–µ RStudio –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "Import Dataset". –í–æ–∑–º–æ–∂–Ω–æ, —É –í–∞—Å –≤–æ–∑–Ω–∏–∫–ª–æ –Ω–µ–ø—Ä–µ–æ–¥–æ–ª–∏–º–æ–µ –∂–µ–ª–∞–Ω–∏–µ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –æ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ –∏ –ø–æ–Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–æ—á–∫–∏ --- —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–π—Ç–µ—Å—å —ç—Ç–æ–º—É –≤—Å–µ–º–∏ —Å–∏–ª–∞–º–∏, –Ω–æ –Ω–µ –≤–∏–Ω–∏—Ç–µ —Å–µ–±—è, –µ—Å–ª–∏ –Ω–µ —Å–¥–µ—Ä–∂–∏—Ç–µ—Å—å.  

- –ì–æ—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç –ú–∞–≥–æ–º–µ—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ. 

–ú–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ R, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤, –º–æ–≥—É—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –í–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –Ω–æ –∏ —Å—Ä–∞–∑—É –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Å—ã–ª–∫—É –≤–º–µ—Å—Ç–æ –ø—É—Ç–∏:

```{r import}
got <- read.csv("https://raw.githubusercontent.com/Pozdniakov/stats/master/data/character-deaths.csv")
```

- –ö–∞–∂–¥—ã–π –ú–∞–≥–æ–º–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ —Å–≤–æ–µ–π –≥–æ—Ä–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ RStudio.

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ —ç—Ç–æ –∫–∞–∂–µ—Ç—Å—è —á–µ–º-—Ç–æ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–º, –Ω–æ —ç—Ç–æ –Ω–µ —Ç–∞–∫. –≠—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –∏ –û–ß–ï–ù–¨ —É–¥–æ–±–Ω–æ. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–æ—á–∫–∞, –≥–¥–µ —É –í–∞—Å –ª–µ–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–∫—Ä–∏–ø—Ç—ã, –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –æ—Ç—á–µ—Ç—ã. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –¥—Ä—É–≥–æ–º—É –ø—Ä–æ–µ–∫—Ç—É --- –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ–µ–∫—Ç, —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏. –≠—Ç–æ –µ—â–µ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ --- –∞ —Ç–æ, –∑–Ω–∞–µ—Ç–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `data` –≤ —Ä–∞–∑–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö —á—Ä–µ–≤–∞—Ç–æ –æ—à–∏–±–∫–∞–º–∏. –ü–æ—ç—Ç–æ–º—É –æ—á–µ–Ω—å —É–¥–æ–±–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–¥ —ç—Ç–æ—Ç –∫—É—Ä—Å.

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö  {#import}

–ö–∞–∫ –í—ã —É–∂–µ –ø–æ–Ω—è–ª–∏, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –º—É—Ç–æ—Ä–Ω—ã—Ö –∏ –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã—Ö –≤–µ—â–µ–π –≤ R. –ï—Å–ª–∏ —É –í–∞—Å –ø–æ–ª—É—á–∏—Ç—Å—è —Å —ç—Ç–∏–º —Å–ø—Ä–∞–≤–∏—Ç—Å—è, —Ç–æ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ - –µ—Ä—É–Ω–¥–∞. –ú—ã —É–∂–µ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å —Å –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç—å—é —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ - –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞—É—á–∏—Ç—å—Å—è –∏—Ö —á–∏—Ç–∞—Ç—å.  

–ó–¥–µ—Å—å —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à—É—é —Ä–µ–º–∞—Ä–∫—É. –î–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ç–∞–±–ª–∏—á–∫—É. –ò–ª–∏ –∂–µ –∏—Ö –º–æ–∂–Ω–æ —Å–≤–µ—Å—Ç–∏ –∫ —Ç–∞–±–ª–∏—á–∫–µ. –¢–∞–∫–∞—è —Ç–∞–±–ª–∏—á–∫–∞, –∫–∞–∫ –º—ã —É–∂–µ –≤—ã—è—Å–Ω–∏–ª–∏, —É–¥–æ–±–Ω–æ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –≤–∏–¥–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞. –ù–æ –∫–∞–∫ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ? –ï—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: –≤ *–±–∏–Ω–∞—Ä–Ω–æ–º* –∏ –≤ *—Ç–µ–∫—Å—Ç–æ–≤–æ–º* —Ñ–∞–π–ª–µ.

–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–∞–∫–æ–π —Ñ–∞–π–ª –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ "–ë–ª–æ–∫–Ω–æ—Ç" –∏–ª–∏ –µ–µ –∞–Ω–∞–ª–æ–≥–µ –∏ —É–≤–∏–¥–µ—Ç—å –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: —Å–∫—Ä–∏–ø—Ç, —Ä–æ–º–∞–Ω –∏–ª–∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ü–∏—Ñ—Ä –∏ –±—É–∫–≤. –ù–∞—Å —Å–µ–π—á–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∏–º–µ–Ω–Ω–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª—É—á–∞–π. –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ —Ç–µ–∫—Å—Ç: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ—á–∫–∏ –≤ —Ñ–∞–π–ª–µ –±—É–¥—É—Ç —Ä–∞–∑–¥–µ–ª—è—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ—á–∫–∏ —Ç–∞–±–ª–∏—Ü—ã, –∞ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∑–Ω–∞–∫-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

–î–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –µ—Å—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ —É–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `read.table()`. –ü–æ—á–∏—Ç–∞–π—Ç–µ —Ö—ç–ª–ø –ø–æ –Ω–µ–π –∏ —É–∂–∞—Å–Ω–∏—Ç–µ—Å—å: —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ –≤—Ö–æ–¥–µ! –ù–æ —Ç–∞–º –∂–µ –≤—ã —É–≤–∏–¥–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ `read.csv()`, `read.csv2()` –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ --- –ø–æ —Å—É—Ç–∏, —ç—Ç–æ —Ç–æ—Ç –∂–µ `read.table()`, –Ω–æ —Å –¥—Ä—É–≥–∏–º–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—É —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç .csv, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç Comma Separated Values (–ó–Ω–∞—á–µ–Ω–∏—è, –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –ó–∞–ø—è—Ç—ã–º–∏). –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º "–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞" —Ç–∞–±–ª–∏—Ü–∞: —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ—á–∫–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ—á–∫–∏ —Ç–∞–±–ª–∏—Ü—ã, –∞ —Å—Ç–æ–ª–±—Ü—ã –æ—Ç–¥–µ–ª—è—é—Ç—Å—è –∑–∞–ø—è—Ç—ã–º–∏. –° —ç—Ç–∏–º —Å–≤—è–∑–∞–Ω–∞ –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö (–≤ —Ç.—á. –∏ –†–æ—Å—Å–∏–∏) –ø—Ä–∏–Ω—è—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø—è—Ç—É—é –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏ —á–∏—Å–ª–∞, –∞ –Ω–µ —Ç–æ—á–∫—É, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å—Ç—Ä–∞–Ω –º–∏—Ä–∞. –ü–æ—ç—Ç–æ–º—É –µ—Å—Ç—å "–¥—Ä—É–≥–æ–π" —Ñ–æ—Ä–º–∞—Ç .csv, –≥–¥–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π (`;`), –∞ –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è - –∑–∞–ø—è—Ç–æ–π (`,`). –í —ç—Ç–æ–º –∏ —Ä–∞–∑–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–π `read.csv()` –∏ `read.csv2()` --- –ø–µ—Ä–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è "–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ" —Ñ–æ—Ä–º–∞—Ç–∞, –≤—Ç–æ—Ä–∞—è - –¥–ª—è (—É—Å–ª–æ–≤–Ω–æ) "–†–æ—Å—Å–∏–π—Å–∫–æ–≥–æ".  

–í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ—á–∫–µ –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ - –∏ —ç—Ç–æ —á–µ—Ä—Ç–æ–≤—Å–∫–∏ —É–¥–æ–±–Ω–æ, —Ñ—É–Ω–∫—Ü–∏–∏ `read.csv()` –∏ `read.csv2()` –ø–æ –¥–µ—Ñ–æ–ª—Ç—É —Å—á–∏—Ç–∞—é—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ—á–∫—É –∏–º–µ–Ω–Ω–æ –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫.  

–ò—Ç–∞–∫, –ø—Ä–æ—á–∏—Ç–∞–µ–º –Ω–∞—à —Ñ–∞–π–ª. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `file = `, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ—Ç –ø–µ—Ä–≤—ã–º, –∏ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `stringsAsFactors = ` –ø–æ—Å—Ç–∞–≤–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ `FALSE`:  

```{r, eval = FALSE}
got <- read.csv("data/character-deaths.csv", stringsAsFactors = FALSE)
```

> –ü–æ —Å—É—Ç–∏, —Ñ–∞–∫—Ç–æ—Ä—ã - —ç—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ character, –Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞–º–∏. –ö–æ–≥–¥–∞-—Ç–æ —ç—Ç–æ –±—ã–ª–æ –ø—Ä–∏–¥—É–º–∞–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏, —Å–µ–π—á–∞—Å –∂–µ –æ–±—ã—á–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –ª–∏—à–Ω–µ–π –º–æ—Ä–æ–∫–æ–π. –ù–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –∏–º–µ–Ω–Ω–æ character, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ factor, –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ –±–µ–∑ —Ä–∞–∑–Ω–∏—Ü—ã. –ù–æ –∏–Ω–æ–≥–¥–∞ –Ω–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É—Ä–∞—Ü–∫–∏–º –æ—à–∏–±–∫–∞–º.  –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞ –æ–±–æ–π–¥–µ–º—Å—è –±–µ–∑ —Ñ–∞–∫—Ç–æ—Ä–æ–≤.

–ú–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `View(got)`: –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ï—Å–ª–∏ –∂–µ –≤—ã–ª–µ–∑–∞–µ—Ç –∫–∞–∫–∞—è-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–∞—è –µ—Ä—É–Ω–¥–∞ –∏–ª–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ –æ—à–∏–±–∫–∞ - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–∫–æ–ø–∞—Ç—å—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –î–ª—è —ç—Ç–æ–≥–æ —á–∏—Ç–∞–π—Ç–µ Help. 

–ö—Ä–æ–º–µ .csv —Ñ–æ—Ä–º–∞—Ç–∞ –µ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, .tsv
 - —Ç–æ–∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ .csv,  –Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å - –∑–Ω–∞–∫ —Ç–∞–±—É–ª—è—Ü–∏–∏. –î–ª—è —á—Ç–µ–Ω–∏—è —Ç–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è  `read.delim()`  –∏ `read.delim2()`. –í–ø—Ä–æ—á–µ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –±—ã –µ–µ –∏ –Ω–µ –±—ã–ª–æ, –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `read.table()`. –ï—Å—Ç—å –¥–∞–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—ã—Ç–∞—é—Ç—Å—è —Å–∞–º–∏ "—É–≥–∞–¥–∞—Ç—å" –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —á—Ç–µ–Ω–∏—è --- —á–∞—Å—Ç–æ –æ–Ω–∏ —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å —ç—Ç–∏–º –¥–æ–≤–æ–ª—å–Ω–æ —É–¥–∞—á–Ω–æ. –ù–æ –Ω–µ –≤—Å–µ–≥–¥–∞. –ü–æ—ç—Ç–æ–º—É —Å—Ç–æ–∏—Ç –Ω–∞—É—á–∏—Ç—å—Å—è —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –ª—é–±–æ–≥–æ —Ä–æ–¥–∞ –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ –≤—Ö–æ–¥–µ.
 
–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞. –°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∏–Ω–∞—Ä–Ω–æ–º –≤–∏–¥–µ --- —Ä–æ–¥–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã Microsoft Excel. –ï—Å–ª–∏ –í—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å .xlsx  —Ñ–∞–π–ª –≤ –ë–ª–æ–∫–Ω–æ—Ç–µ, —Ç–æ —É–≤–∏–¥–∏—Ç–µ –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —ç—Ç–∏–º —Ñ–∞–π–ª–∞–º–∏ –≥–æ—Ä–∞–∑–¥–æ –º–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ–π, –ø–æ—ç—Ç–æ–º—É —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å —ç–∫—Å–µ–ª–µ–≤—Å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏ —Å—Ç–∞—Ä–∞—Ç—å—Å—è –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ .csv.

> –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–∫—Å–µ–ª–µ–≤—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ –µ—Å—Ç—å –º–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–æ–≤: readxl, xlsx, openxlsx. –î–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ SPSS, Stata, SAS –µ—Å—Ç—å –ø–∞–∫–µ—Ç foreign. –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞–∫–µ—Ç—ã –∏ –∫–∞–∫ –∏—Ö —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º—ã –∏–∑—É—á–∏–º –ø–æ–∑–∂–µ. 

## –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –≤ R {#prep}

–í—á–µ—Ä–∞ –º—ã —É–∑–Ω–∞–ª–∏ –ø—Ä–æ –æ—Å–Ω–æ–≤—ã —è–∑—ã–∫–∞ R, –ø—Ä–æ —Ç–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏, —Å–ø–∏—Å–∫–∞–º–∏, –º–∞—Ç—Ä–∏—Ü–∞–º–∏ –∏, –Ω–∞–∫–æ–Ω–µ—Ü, –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞–º–∏. –ú—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏ –¥–µ–Ω—å –Ω–∞ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö, —Å —á–µ–≥–æ –º—ã –∏ –Ω–∞—á–Ω–µ–º —Å–µ–≥–æ–¥–Ω—è:

```{r day2}
got <- read.csv("data/character-deaths.csv", stringsAsFactors = F)
```

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–æ–∏—Ç –Ω–µ–º–Ω–æ–≥–æ "–æ—Å–º–æ—Ç—Ä–µ—Ç—å" –ø–æ–ª—É—á–∏–≤—à–∏–π—Å—è –¥–∞—Ç–∞—Ñ—Ä–µ–π–º `got`.

### –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö  {#explore}

–û–∫, –¥–∞–≤–∞–π—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∏–∑—É—á–∞–µ–º –¥–∞—Ç–∞—Å–µ—Ç. –û–±—ã—á–Ω–æ –º—ã –ø—Ä–∏–≤—ã–∫–ª–∏ –≥–ª–∞–∑–∞–º–∏ –ø—Ä–æ–±–µ–≥–∞—Ç—å –ø–æ –¥–∞–Ω–Ω—ã–º, –ª–∏—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç–æ–ª–±—Ü—ã --- –∏ —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –ª–æ–≥–∏—á–Ω–æ, –æ—Ç —ç—Ç–æ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç—É—á–∞—Ç—å—Å—è. –ù–æ –º—ã –º–æ–∂–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—à –±–∞–∑–æ–≤—ã–π –∑—Ä–∏—Ç–µ–ª—å–Ω–æ–ø–æ–∏—Å–∫–æ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ª–µ–∑–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏.  

–í–æ-–ø–µ—Ä–≤—ã—Ö, –≤—Å–ø–æ–º–Ω–∏–º –¥—Ä—É–≥—É—é –ø–æ–ª–µ–∑–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `str()`:
```{r}
str(got)
```

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–µ:

–ö–æ–ª–æ–Ω–∫–∞ `Name` --- –∑–¥–µ—Å—å –≤—Å–µ –ø–æ–Ω—è—Ç–Ω–æ. –í–∞–∂–Ω–æ, —á—Ç–æ —ç—Ç–∏ –∏–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∞–Ω—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É: –≥–¥–µ-—Ç–æ —Å —Ñ–∞–º–∏–ª–∏–µ–π, –≥–¥–µ-—Ç–æ –±–µ–∑, –≥–¥–µ-—Ç–æ –≤ —Å–∫–æ–±–æ—á–∫–∞—Ö –µ—Å—Ç—å –ø–æ—è—Å–Ω–µ–Ω–∏—è. –ö–æ–ª–æ–Ω–∫–∞ `Allegiances` --- –∫ –∫–∞–∫–æ–º—É –¥–æ–º—É –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂. –° —ç—Ç–∏–º —Å–ª–æ–∂–Ω–æ, –∏–Ω–æ–≥–¥–∞ –æ–Ω–∏ –º–µ–Ω—è—é—Ç –¥–æ–º–∞, –∑–¥–µ—Å—å –ø—É—Ç–∞—é—Ç—Å—è —Å–∞–º–∏ —Å–µ–º—å–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏, –ª–æ—è–ª—å–Ω—ã–µ –∏–º. –û—Å–æ–±–æ–π —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É `Stark` –∏ `House Stark` –Ω–µ—Ç.  –°–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ - `Death Year`, `Book.of.Death`, `Death.Chapter`, `Book.Intro.Chapter` --- –æ–∑–Ω–∞—á–∞—é—Ç –Ω–æ–º–µ—Ä –≥–ª–∞–≤—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤–ø–µ—Ä–≤—ã–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∞ —Ç–∞–∫ –∂–µ –Ω–æ–º–µ—Ä –∫–Ω–∏–≥–∏, –≥–ª–∞–≤–∞ –∏ –≥–æ–¥ (–æ—Ç –∑–∞–≤–æ–µ–≤–∞–Ω–∏—è –í–µ—Å—Ç–µ—Ä–æ—Å–∞ –≠–π–≥–æ–Ω–æ–º –¢–∞—Ä–≥–∞—Ä–∏–µ–Ω–æ–º), –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂ —É–º–∏—Ä–∞–µ—Ç. `Gender` --- `1` –¥–ª—è –º—É–∂—á–∏–Ω, `0` –¥–ª—è –∂–µ–Ω—â–∏–Ω. `Nobility` --- –¥–≤–æ—Ä—è–Ω—Å–∫–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å—Ç–æ–ª–±—Ü–æ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –ø–æ—è–≤–ª—è–ª—Å—è –ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ –∫–Ω–∏–≥–µ (–≤—Å–µ–≥–æ –∫–Ω–∏–≥ –ø–æ–∫–∞ —á—Ç–æ 5).   

–î—Ä—É–≥–∞—è –ø–æ–ª–µ–∑–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü --- —Ñ—É–Ω–∫—Ü–∏—è `head()`: –æ–Ω–∞ –≤—ã–≤–µ–¥–µ—Ç –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ (–ø–æ –¥–µ—Ñ–æ–ª—Ç—É 6) —Å—Ç—Ä–æ—á–µ–∫ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞.

```{r}
head(got)
```

–ï—Å—Ç—å –µ—â–µ —Ñ—É–Ω–∫—Ü–∏—è `tail()`. –î–æ–≥–∞–¥–∞–π—Ç–µ—Å—å —Å–∞–º–∏, —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç.

–î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–∑–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–±–ª–∏—Ü—ã —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ table():

```{r}
table(got$Allegiances)
```

–£–∞—É! –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –∏ —É–¥–æ–±–Ω–æ, –Ω–µ —Ç–∞–∫ –ª–∏? –§—É–Ω–∫—Ü–∏—è `table()` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è *—Ç–∞–±–ª–∏—Ü —Å–æ–ø—Ä—è–∂–µ–Ω–Ω–æ—Å—Ç–∏*:

```{r}
table(got$Allegiances, got$Gender)
```

### Subsetting  {#subset}
 
–ö–∞–∫ –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏ –Ω–∞ –ø—Ä–æ—à–ª–æ–º –∑–∞–Ω—è—Ç–∏–∏, –º—ã –º–æ–∂–µ–º —Å–∞–±—Å–µ—Ç—Ç–∏—Ç—å (–≤—ã–¥–µ–ª—è—Ç—å —á–∞—Å—Ç—å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞) –¥–∞—Ç–∞—Ñ—Ä–µ–π–º, –æ–±—Ä–∞—â–∞—è—Å—å –∫ –Ω–µ–º—É –∏ –∫–∞–∫ –∫ –º–∞—Ç—Ä–∏—Ü–µ: *–¥–∞—Ç–∞—Ñ—Ä–µ–π–º[–≤–µ–∫—Ç–æ—Ä_—Å_–Ω–æ–º–µ—Ä–∞–º–∏_—Å—Ç—Ä–æ–∫, –≤–µ–∫—Ç–æ—Ä_—Å_–Ω–æ–º–µ—Ä–∞–º–∏_–∫–æ–ª–æ–Ω–æ–∫]*

```{r}
got[100:115, 1:2]
```

–∏ –∏—Å–ø–æ–ª—å–∑—É—è –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫:

```{r}
got[508:515, "Name"]
```

–∏ –¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–ª–æ–Ω–æ–∫!

```{r}
got[508:515, c("Name", "Allegiances", "Gender")]
```

–ú—ã –º–æ–∂–µ–º –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä—ã:  

```{r}
houses <- got$Allegiances
unique(houses) #–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è --- –ø–æ—á—Ç–∏ –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é table()
```

–ò—Ç–∞–∫, –¥–∞–≤–∞–π—Ç–µ —Ä–µ—à–∏–º –Ω–∞—à—É –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É --- –≤—ã—Ç–∞—â–∏–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –ù–æ—á–Ω–æ–≥–æ –î–æ–∑–æ—Ä–∞.
–î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π --- —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–π –∫–æ–ª–æ–Ω–∫–∏ `Allegiances` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `"Night's Watch"` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞.

```{r}
vectornight <- got$Allegiances == "Night's Watch"
head(vectornight)
```

–¢–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –≤–µ–∫—Ç–æ—Ä —Å `TRUE` –∏ `FALSE` –Ω–∞–º –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫. –ù–æ —á—Ç–æ —Å–æ —Å—Ç–æ–ª–±—Ü–∞–º–∏? –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã, —Ç–æ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π –≤–Ω—É—Ç—Ä–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ —É–∫–∞–∑—ã–≤–∞—Ç—å:  

```{r}
nightswatch <- got[vectornight,]
head(nightswatch)
```

–í—É–∞–ª—è!
–í—Å–µ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ –∏ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É:

```{r}
nightswatch <- got[got$Allegiances == "Night's Watch",]
```

–ò –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –∑–∞–ø—è—Ç—É—é!

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º –≤—ã—Ç–∞—â–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—Å–µ—Ö –û–¥–∏—á–∞–ª—ã—Ö (`Wildling`) –∏ –≤—Å–µ—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –ù–æ—á–Ω–æ–≥–æ –î–æ–∑–æ—Ä–∞. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø–µ—Ä–∞—Ç–æ—Ä `|` (–ò–õ–ò) –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–ª–æ–Ω–æ–∫:

```{r}
nightwatch_wildling <- got[got$Allegiances == "Night's Watch" | got$Allegiances == "Wildling",]
head(nightwatch_wildling)
```

> –ö–∞–∂–µ—Ç—Å—è –æ—á–µ–≤–∏–¥–Ω—ã–º —Å–ª–µ–¥—É—é—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç: `got[got$Allegiances == c("Night's Watch", "Wildling"),]`. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –≤—ã–¥–∞—Å—Ç –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ, —Ö–æ—Ç—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –≤–µ—Ä–Ω—ã–º –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏ —á–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–≥–æ. –ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤—Å–ø–æ–º–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–æ recycling.

–î–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –µ—Å—Ç—å —É–¥–æ–±–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä `%in%`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏—Ç—å –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ —Å —Ü–µ–ª—ã–º –Ω–∞–±–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏–π. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –≤–µ–∫—Ç–æ—Ä–µ —Å–ø—Ä–∞–≤–∞ –æ—Ç `%in%`, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç --- `TRUE`:

```{r}
1:6 %in% c(1,4,5)

nightwatch_wildling <- got[got$Allegiances %in% c("Night's Watch", "Wildling"),]
head(nightwatch_wildling)
```


### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ {#newcol}

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å, –∂–∏–≤ –ª–∏ –µ—â–µ –ø–µ—Ä—Å–æ–Ω–∞–∂ (–ø–æ –∫–Ω–∏–≥–∞–º). 
–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ –≤ —ç—Ç–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ, —Ö–æ—Ç—å –æ–Ω –∏ –ø–æ—Å–≤—è—â–µ–Ω —Å–º–µ—Ä—Ç—è–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –Ω–µ—Ç –Ω—É–∂–Ω–æ–π –∫–æ–ª–æ–Ω–∫–∏. –ú—ã –º–æ–∂–µ–º –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è "–≤—ã—Ç–∞—â–∏—Ç—å" —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.  –í –∫–æ–ª–æ–Ω–∫–∞—Ö `Death.Year`, `Death.Chapter` –∏ `Book.of.Death` —Å—Ç–æ–∏—Ç `NA` —É –º–Ω–æ–≥–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, —É `Arya Stark`, –∫–æ—Ç–æ—Ä–∞—è –∏ –ø–æ –∫–Ω–∏–≥–∞–º, –∏ –ø–æ —Å–µ—Ä–∏–∞–ª—É –∂–∏–≤–µ–µ –≤—Å–µ—Ö –∂–∏–≤—ã—Ö –∏ –º–µ—Ä—Ç–≤—ã—Ö:
```{r}
got[got$Name == "Arya Stark",]
```

–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –≤ `Book.of.Death` —Å—Ç–æ–∏—Ç `NA`, –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –î–∂–æ—Ä–¥–∂ –ú–∞—Ä—Ç–∏–Ω –µ—â–µ –Ω–µ –∑–∞–Ω–µ—Å —Å–≤–æ–µ–π –∫–∞—Ä–∞—é—â–µ–π —Ä—É–∫–∏ –Ω–∞–¥ —ç—Ç–∏–º –≥–µ—Ä–æ–µ–º.

–ú—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É `Is.Alive`:

```{r}
got$Is.Alive <- is.na(got$Book.of.Death)
```

### data.table vs. tidyverse {#dtvstidy} 

–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, —Å –ø–æ–º–æ—â—å—é –±–∞–∑–æ–≤–æ–≥–æ R –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Å–µ, —á—Ç–æ —É–≥–æ–¥–Ω–æ. –û–¥–Ω–∞–∫–æ –±–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã R --- –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–∞–º—ã–µ —É–¥–æ–±–Ω—ã–µ. –ò–¥–µ—è —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞–º–∏ –≤ R –µ—â–µ –±—ã—Å—Ç—Ä–µ–µ –∏ —É–¥–æ–±–Ω–µ–µ —Å–ø–æ–¥–≤–∏–≥–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ --- `data.table` –∏ `tidyverse` (`dplyr`). –≠—Ç–æ –¥–≤–∞ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—â–∏—Ö –ø–æ–¥—Ö–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏–ª—å–Ω–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —è–∑—ã–∫, —Ö–æ—Ç—è —ç—Ç–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤—Å–µ —Ç–æ—Ç –∂–µ R --- –ø–æ—ç—Ç–æ–º—É –∏—Ö –µ—â–µ –Ω–∞–∑—ã–≤–∞—é—Ç "–¥–∏–∞–ª–µ–∫—Ç–∞–º–∏" R.

–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –æ–±–ª–∞–¥–∞—é—Ç —Å–≤–æ–∏–º–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º–∏, –Ω–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å `tidyverse` —Å—á–∏—Ç–∞–µ—Ç—Å—è –±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º. –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ --- –≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π –ª–µ–≥–∫–æ—Å—Ç–∏ –æ—Å–≤–æ–µ–Ω–∏—è. –û–±—ã—á–Ω–æ –∫–æ–¥, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤ `tidyverse` –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–Ω—è—Ç—å, –¥–∞–∂–µ –Ω–µ –≤–ª–∞–¥–µ—è –∏–º. 

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ `data.table` --- –≤ —Å—É—Ä–æ–≤–æ–º –ª–∞–∫–æ–Ω–∏—á–Ω–æ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ –∏ –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –æ—á–µ–Ω—å —Å–µ—Ä—å–µ–∑–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ —Ä–∞–±–æ—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏. –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã–º–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –ø–æ—Ä—è–¥–∫–∏ –±—ã—Å—Ç—Ä–µ–µ, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –í–∞—à –¥–∞—Ç–∞—Å–µ—Ç —Å —Ç—Ä—É–¥–æ–º –ø—Ä–æ–ª–µ–∑–∞–µ—Ç –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è - —Å—Ç–æ–∏—Ç –∑–∞–¥—É–º–∞—Ç—å—Å—è –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `data.table`. 

–ß—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ —É—á–∏—Ç—å --- —Ä–µ—à–∞—Ç—å –í–∞–º, –Ω–æ –∑–Ω–∞—Ç—å –æ–±–∞ —Å–æ–≤—Å–µ–º –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –æ–Ω–∏ —Ä–µ—à–∞—é—Ç —Ç–µ –∂–µ —Å–∞–º—ã–µ –∑–∞–¥–∞—á–∏, –ø—Ä–æ—Å—Ç–æ —Å–æ–≤—Å–µ–º —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –ó–∞ data.table --- —Å–∫–æ—Ä–æ—Å—Ç—å, –∑–∞ tidyverse - –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –û—á–µ–Ω—å —Å–æ–≤–µ—Ç—É—é –ø–æ—á–∏—Ç–∞—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –Ω–∞ —ç—Ç—É —Ç–µ–º—É [–∑–¥–µ—Å—å](https://stackoverflow.com/questions/21435339/data-table-vs-dplyr-can-one-do-something-well-the-other-cant-or-does-poorly). 

![](images/New-Mind-Map.jpg)

<!--chapter:end:01-intro_to_r.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# `tidyverse`: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö {#tidy_dplyr}

[_tidyverse_](https://www.tidyverse.org) --- —ç—Ç–æ –Ω–∞–±–æ—Ä –ø–∞–∫–µ—Ç–æ–≤:

* _ggplot2_, –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
* _tibble_, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–±–±–ª–∞–º–∏, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞
* _tidyr_, –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞ tidy data
* _readr_, –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ R
* _purrr_, –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
* _dplyr_, –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏—è –¥–∞–Ω–Ω—ã—Ö
* _stringr_, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
* _forcats_, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏-—Ñ–∞–∫—Ç–æ—Ä–∞–º–∏

–ü–æ–ª–µ–∑–Ω–æ —Ç–∞–∫–∂–µ –∑–Ω–∞—Ç—å –æ —Å–ª–µ–¥—É—é—â–∏—Ö:

* _readxl_, –¥–ª—è —á—Ç–µ–Ω–∏—è .xls –∏ .xlsx
* _jsonlite_, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON
* _rvest_, –¥–ª—è –≤–µ–±-—Å–∫—Ä–µ–ø–ø–∏–Ω–≥–∞
* _lubridate_, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º
* _tidytext_, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –∫–æ—Ä–ø—É—Å–∞–º–∏
* _broom_, –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ tidy —Ñ–æ—Ä–º–∞—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏

```{r, message = TRUE}
library("tidyverse")
```

## –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
### –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

–í—Å–µ –≤ R –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≥–¥–µ-—Ç–æ. –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –Ω—É–∂–Ω–æ –∏—Ö –∫—É–¥–∞-—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏–º–µ—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–∫–æ—Ç–æ—Ä—É—é –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –∫—É–¥–∞ —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å –≤—Å–µ, –æ—Ç–Ω—Å—è—â–µ–µ—Å—è –∫ —ç—Ç–æ–º—É –ø—Ä–æ–µ–∫—Ç—É. –î–≤–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–∑–≤–æ–ª—è—Ç –æ–ø—Ä–µ–¥–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—á—É—é –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏—é (`getwd()`) –∏ (`setwd(.../path/to/your/directory)`).

### –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö: `.csv`

–°—É—â–µ—Å—Ç–≤–µ—Ç –º–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–¥—É–º–∞–ª–∏ –ª—é–¥–∏. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–∑ –Ω–∏—Ö –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ R. –¢–∞–∫ –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ R -- —Ç–∞–±–ª–∏—Ü–∞ $n \times k$, —Ç–æ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –º—ã –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –±—É–¥–µ–º —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏. –ù–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ–π—á–∞—Å —ç—Ç–æ `.csv` (—Ä–∞–∑–±–µ—Ä–µ–º –≤ –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ) –∏ `.json` (—Ä–∞–∑–±–µ—Ä–µ–º –≤ —Ä–∞–∑–¥–µ–ª–µ @ref{lists}).

`.csv` (comma separated values) -- —è–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ñ–∞–π–ª–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º: –∑–∞–ø—è—Ç–æ–π, —Ç–∞–±—É–ª—è—Ü–∏–µ–π, —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π, –ø—Ä–æ–±–µ–ª –∏ –¥—Ä. –¢–∞–∫–∏–µ —Ñ–∞–π–ª—ã –æ–±—ã—á–Ω–æ –ª–µ–≥–∫–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç LibreOffice, –∞ –≤ [Microsoft Excel –Ω—É–∂–Ω—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä—é–∫–∏](https://superuser.com/questions/291445/how-do-you-change-default-delimiter-in-the-text-import-in-excel).

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: readr, readxl
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –¥–ª—è —á—Ç–µ–Ω–∏—è `.csv` —Ñ–∞–π–ª–æ–≤ –≤ R —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `read.csv()`, –Ω–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `read_csv()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `readr`.

```{r, eval = FALSE}
read_csv("...")
```

–í–º–µ—Å—Ç–æ –º–Ω–æ–≥–æ—Ç–æ—á–∏—è –º–æ–∂–µ—Ç —Å—Ç–æ—è—Ç—å:

* –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞  (–µ—Å–ª–∏ –æ–Ω, –µ—Å—Ç—å –≤ —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—á–µ–π –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏)
```{r, eval = FALSE}
read_csv("my_file.csv")
```

* –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–µ—Å–ª–∏ –æ–Ω, –≤–µ—Ä–µ–Ω –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—á–µ–π –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏)
```{r, eval = FALSE}
read_csv("data/my_file.csv")
```

* –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–µ—Å–ª–∏ –æ–Ω, –≤–µ—Ä–µ–Ω –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—á–µ–π –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏)
```{r, eval = FALSE}
read_csv("/home/user_name/work/data/my_file.csv")
```

* –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å—Å—ã–ª–∫–∞ (—Ç–æ–≥–¥–∞, –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É)
```{r, eval = FALSE}
read_csv("https://my_host/my_file.csv")
```

–î–ª—è —á—Ç–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ `.csv` —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

* `read_tsv()` -- –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å —Ç–∞–±—É–ª—è—Ü–∏–µ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
* `read_csv2()` -- –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è 
* `read_delim(file = "...", delim = "...")` -- –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å –ª—é–±—ã–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º, –∑–∞–¥–∞–≤–∞–µ–º—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `delim`

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π `.csv` —Ñ–∞–π–ª–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤, –ø–æ—ç—Ç–æ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ `read_...()`  –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É, —Å—á–∏—Ç–∞—è –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å—Ç–æ–ª–±—Ü–æ–≤. –ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `col_names = FALSE`.

–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ -- –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –∏ –ª–æ–∫–∞–ª—å. –ù–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö —Ä–∞–∑–Ω—ã–µ –ª–æ–∫–∞–ª–∏ –∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏, —Ç–∞–∫ —á—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∑–Ω–∞—Ç—å –ø—Ä–æ –∞—Ä–≥—É–º–µ–Ω—Ç `locale(encoding = "UTF-8")`.

```{block, type = "rmdtask"}
–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—á–∏—Ç–∞—Ç—å –≤ R —Ñ–∞–π–ª [–ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/scary_letters.csv).
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
read_csv2("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/scary_letters.csv")
```

–ë–ª–∞–≥–æ–¥–∞—Ä—è `readxl` –ø–∞–∫–µ—Ç—É –¢–∞–∫–∂–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ñ–∞–π–ª–æ–≤ `.xls` (—Ñ—É–Ω–∫—Ü–∏—è `read_xls`) –∏ `.xlsx` (—Ñ—É–Ω–∫—Ü–∏—è `read_xlsx`), –æ–¥–Ω–∞–∫–æ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —É–º–µ—é—Ç —á–∏—Ç–∞—Ç—å –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

```{r, eval = FALSE}
library("readxl")
xlsx_example <- read_xlsx("...")
```

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –µ—â–µ –æ–¥–∏–Ω —ç–∫—Å—Ç—Ä–∞–≤–∞–≥–∞–Ω—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ: —ç—Ç–æ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ R `.RData`. –°–æ–∑–¥–∞–¥–∏–º data.frame:

```{r}
my_df <- data.frame(letters = c("a", "b"),
                    numbers = 1:2)
my_df
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª...

```{r}
save(my_df, file = "data/my_df.RData")
```

—É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é...

```{r error = TRUE}
rm(my_df)
my_df
```

–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Å–Ω–æ–≤–∞:

```{r}
load("data/my_df.RData")
my_df
```

#### Misspelling dataset
–≠—Ç–æ—Ç –¥–∞—Ç–∞—Å–µ—Ç —è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–ª –∏–∑ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç—å–∏ [The Gyllenhaal Experiment](https://pudding.cool/2019/02/gyllenhaal/), –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π –†–∞—Å—Å–µ–ª–æ–º –ì–æ–ª—å–¥–µ–Ω–±–µ—Ä–≥–æ–º –∏ –ú—ç—Ç—Ç–æ–º –î—ç–Ω–∏—ç–ª—Å–æ–º –¥–ª—è –∏–∑–¥–∞–Ω–∏—è [pudding](https://pudding.cool). –û–Ω–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –æ—à–∏–±–∫–∏ –≤ –ø—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–∏ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∏–º–µ–Ω –∏ —Ñ–∞–º–∏–ª–∏–π –∑–≤–µ–∑–¥.

```{r}
misspellings <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/misspelling_dataset.csv")
```
  

```{r}
misspellings
```

–í –¥–∞—Ç–∞—Å–µ—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

* `correct` -- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–º–∏–ª–∏–∏
* `spelling` -- –Ω–∞–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–¥–µ–ª–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
* `count` -- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤ —Ç–∞–∫–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è

#### `diamonds`

```{r}
diamonds
?diamonds
```


## `tibble`

–ü–∞–∫–µ—Ç `tibble` -- —è–≤–ª—è–µ—Ç—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π —à—Ç–∞—Ç–Ω–æ–≥–æ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞ –≤ R. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `month.name`:

```{r}
month.name
```

–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```{r error=TRUE}
data.frame(id = 1:12,
           months = month.name,
           n_letters = nchar(months))
```

–û–¥–Ω–∞–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `months` –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —Ç–∞–∫ —á—Ç–æ –¥–∞–Ω–Ω—ã–π –∫–æ–¥ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É. –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –±–∞–∑–æ–≤—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏:

```{r}
data.frame(id = 1:12,
           months = month.name,
           n_letters = nchar(month.name))
```

–û–¥–Ω–æ –∏–∑ –æ—Ç–ª–∏—á–∏–π `tibble` –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞ -- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ "–ø–æ —Ö–æ–¥—É –ø—å–µ—Å—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ"

```{r}
tibble(id = 1:12,
       months = month.name,
       n_letters = nchar(months))
```

–ï—Å–ª–∏ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–º, –µ–≥–æ –ª–µ–≥–∫–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –≤ `tibble` –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `as_tibble()`:

```{r}
df <- data.frame(id = 1:12,
                 months = month.name)

df
as_tibble(df)
```

–§—É–Ω–∫–∏—Ü–æ–Ω–∞–ª—å–Ω–æ `tibble` –æ—Ç `data.frame` –Ω–∏—á–µ–º –Ω–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è, –æ–¥–Ω–∞–∫–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ä—è–¥ –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–ª–∏—á–∏–π. –ö—Ä–æ–º–µ —Ç–æ–≥–æ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –º–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `tidyverse` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∏–º–µ–Ω–Ω–æ `tibble`, –∞ –Ω–µ `data.frame`.

## `dplyr`
–í —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è [–≤–æ—Ç –∑–¥–µ—Å—å](https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf) –∏–ª–∏ [–∑–¥–µ—Å—å](https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf).

### `dplyr::filter()`

![](images/filter.png)

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ—á–∫–∏ –ø–æ —É—Å–ª–æ–≤–∏—è–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ —Å—Ç–æ–ª–±—Ü–∞—Ö.

–°–∫–æ–ª—å–∫–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø–∏—Å–∞–ª–∏ –º–µ–Ω—å—à–µ 10 —é–∑–µ—Ä–æ–≤?

```{r}
misspellings %>%
  filter(count < 10)
```

`%>%` --- –∫–æ–Ω–≤–µ–µ—Ä (pipe) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –¥—Ä—É–≥—É—é.

```{r}
sort(sqrt(abs(sin(1:22))), decreasing = TRUE)
1:22 %>% 
  sin() %>% 
  abs() %>% 
  sqrt() %>% 
  sort(., decreasing = TRUE) # –∑–∞—á–µ–º –∑–¥–µ—Å—å —Ç–æ—á–∫–∞?
```

–ö–æ–Ω–≤–µ–µ—Ä—ã –≤ _tidyverse_ –ø—Ä–∏—à–ª–∏ –∏–∑ –ø–∞–∫–µ—Ç–∞ _magrittr_. –ò–Ω–æ–≥–¥–∞ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –Ω–µ –∏–∑ _tidyverse_.

![](images/magrittr.png)

### `dplyr::slice()`

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ—á–∫–∏ –ø–æ –∏–Ω–¥–µ–∫—Å—É.

![](images/filter.png)

```{r}
misspellings %>%
  slice(3:7)
```

### `dplyr::select()`

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Å—Ç–æ–ª–±—Ü—ã.

![](images/select.png)

```{r}
diamonds %>%
  select(8:10)

diamonds %>%
  select(color:price)

diamonds %>%
  select(-carat)

diamonds %>%
  select(-c(carat, cut, x, y, z))

diamonds %>%
  select(cut, depth, price)
```

### `dplyr::arrange()`

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç (—Å—Ç—Ä–æ–∫–∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É, –∞ —á–∏—Å–ª–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É).

```{r}
misspellings %>%
  arrange(count)

diamonds %>%
  arrange(desc(carat), price)
```

### `dplyr::distinct()`
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑—Ä–∞—â–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—Ç–æ–ª–±—Ü–µ –∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ç–æ–ª–±—Ü–æ–≤.

```{r}
misspellings %>%
  distinct(correct)

misspellings %>%
  distinct(spelling)

diamonds %>%
  distinct(color, cut)
```

```{block, type = "rmdtask"}
–í–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –≤ `tidyverse` –¥–∞—Ç–∞—Å–µ—Ç–µ `starwars` –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤ –≤—ã—à–µ 180 (`height`) –∏ –≤–µ—Å–æ–º –º–µ–Ω—å—à–µ 80 (`mass`) –∏ –≤—ã–≤–µ–¥–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏–π –º–µ—Å—Ç, –æ—Ç–∫—É–¥–∞ –æ–Ω–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç (`homeworld`).
```

```{r, include=FALSE}
starwars %>% 
  filter(height > 180, mass < 80) %>% 
  distinct(homeworld)
```


### `dplyr::mutate()`

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

![](images/mutate.png)

```{r}
misspellings %>%
  mutate(misspelling_length = nchar(spelling),
         id = 1:n())
```

```{block2, type = "rmdtask"}
–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å [–∏–Ω–¥–µ–∫—Å–æ–º –ö–µ—Ç–ª–µ](https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D0%B4%D0%B5%D0%BA%D1%81_%D0%BC%D0%B0%D1%81%D1%81%D1%8B_%D1%82%D0%B5%D0%BB%D0%B0):  $\frac{mass}{height^2}$ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤ –¥–∞—Ç–∞—Å–µ—Ç–∞ `starwars`. –°–∫–æ–ª—å–∫–æ –≥–µ—Ä–æ–µ–≤ —Å—Ç—Ä–∞–¥–∞—é—Ç –æ–∂–∏—Ä–µ–Ω–∏–µ–º (—Ç. –µ. –∏–º–µ—é—Ç –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ –±–æ–ª—å—à–µ 30)? (–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ä–æ—Å—Ç –∏–∑ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–æ–≤ –≤ –º–µ—Ç—Ä—ã).
```

```{r,include=FALSE}
starwars %>% 
  mutate(height = height/100,
         BMI = mass/(height^2)) %>% 
  select(name, height, mass, BMI) %>% 
  filter(BMI >= 30)
```


### `dplyr::group_by(...) %>% summarise(...)`

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ –∫–∞–∫–æ–º—É-—Ç–æ –∏–∑ —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –≤—ã–≤–æ–¥ –∏–∑ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–º–∞–∫—Å–∏–º—É–º, –º–∏–Ω–∏–º—É–º, –ø–æ—Å–ª–µ–¥–Ω–∏–π, –ø–µ—Ä–≤—ã–π, —Å—Ä–µ–¥–Ω–µ–µ, –º–µ–¥–∏–∞–Ω—É –∏ —Ç. –ø.).

![](images/group_by_s.png)
  
```{r}
misspellings %>%
  summarise(min(count), mean(count))

misspellings %>%
  group_by(correct) %>% 
  summarise(mean(count))

misspellings %>%
  group_by(correct) %>% 
  summarise(my_mean = mean(count))
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–∂–¥–µ–Ω–∏–π, —Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `n()` –≤ `summarise()` –∏–ª–∏ –∂–µ —Ñ—É–Ω–∫—Ü–∏—é `count()`:

```{r}
misspellings %>%
  group_by(correct) %>% 
  summarise(n = n())


misspellings %>%
  count(correct)
```

```{block, type = "rmdtask"}
–ê —á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ `misspellings` —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `n` –∏ –∑–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º `correct` –∏ `n`?
```

–ú–æ–∂–Ω–æ –¥–∞–∂–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```{r}
misspellings %>%
  count(correct, sort = TRUE)
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–µ –∫–∞–∫–æ–µ-—Ç–æ —Å–∞–º–º–∞—Ä–∏, –∞ —Ü–µ–ª—ã–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü —Å —ç—Ç–∏–º —Å–∞–º–º–∞—Ä–∏ –≤–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ `summarise()` –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `mutate()`:

```{r}
misspellings %>%
  group_by(correct) %>% 
  mutate(my_mean = mean(count))
```

–°—Ö–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

![](images/group_by_m.png)

```{block, type = "rmdtask"}
–í –¥–∞—Ç–∞—Å–µ—Ç–µ starwars –∑–∞–ø–∏—à–∏—Ç–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞ (`height`) –ø–æ –∫–∞–∂–¥–æ–π —Ä–∞—Å–µ (`species`).
```

```{r, include=FALSE}
starwars %>% 
  group_by(species) %>% 
  mutate(mean_height = mean(height, na.rm = TRUE))
```

## –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–≤

### `bind_...`

–≠—Ç–æ —Å–µ–º–µ–π—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω—è—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º—ã:

```{r}
my_tbl <- tibble(a  = c(1, 5, 2), 
                 b = c("e", "g", "s"))
```

–ß—Ç–æ–±—ã —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å—Ç—Ä–æ—á–∫–∏ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞–±–æ—Ä–æ–º –∫–æ–ª–æ–Ω–æ–∫:
```{r}
my_tbl %>% 
  bind_rows(my_tbl)
```

–í–º–µ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫ –ø–æ—è–≤—è—Ç—Å—è `NA`:

```{r}
my_tbl %>% 
  bind_rows(my_tbl[,-1])
```

–ß—Ç–æ–±—ã —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å—Ç—Ä–æ—á–∫–∏ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞–±–æ—Ä–æ–º —Å—Ç—Ä–æ—á–µ–∫ (–µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è, —Ç–æ –æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω—ã):
```{r}
my_tbl %>% 
  bind_cols(my_tbl) # —Å–æ–µ–¥–∏–Ω—è–µ—Ç –∫–æ–ª–æ–Ω–∫–∏
```

–°–æ–µ–¥–∏–Ω—è—è –¥–∞—Ç–∞—Ñ—Ä–µ–π–º—ã —Å —Ä–∞–∑–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç—Ä–æ–∫
```{r error = TRUE}
my_tbl %>% 
  bind_cols(my_tbl[-1,])
```

### `dplyr::.._join()`

–≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–µ–¥–∏–Ω—è—Ç—å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º—ã.

```{r}
languages <- data_frame(
  languages = c("Selkup", "French", "Chukchi", "Polish"),
  countries = c("Russia", "France", "Russia", "Poland"),
  iso = c("sel", "fra", "ckt", "pol")
  )
languages
country_population <- data_frame(
  countries = c("Russia", "Poland", "Finland"),
  population_mln = c(143, 38, 5))
country_population
inner_join(languages, country_population)
left_join(languages, country_population)
right_join(languages, country_population)
anti_join(languages, country_population)
anti_join(country_population, languages)
full_join(country_population, languages)
```

![](images/joins.png)

## `tidyr` package

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–æ—Å–∏—Ç–µ–ª–µ–π —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –≤ –ò–Ω–¥–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∏ 2001 –≥–æ–¥–∞ (–¥–∞–Ω–Ω—ã–µ –∏–∑ –í–∏–∫–∏–ø–µ–¥–∏–∏):


```{r}
langs_in_india_short <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/languages_in_india.csv")
```

* Short format

```{r}
langs_in_india_short
```

* Long format

```{r, echo = FALSE}
langs_in_india_short %>% 
  pivot_longer(names_to = "type", values_to = "n_speakers", n_L1_sp:n_all_sp)->
  langs_in_india_long
langs_in_india_long
```

* Short format ‚Üí Long format: `tidyr::pivot_longer()`

```{r}
langs_in_india_short %>% 
  pivot_longer(names_to = "type", values_to = "n_speakers", n_L1_sp:n_all_sp)->
  langs_in_india_long

langs_in_india_long
```

* Long format ‚Üí Short format: `tidyr::pivot_wider()`

```{r}
langs_in_india_long %>% 
  pivot_wider(names_from = "type", values_from = "n_speakers")->
  langs_in_india_short
langs_in_india_short
```


```{block, type = "rmdtask"}
[–í–æ—Ç –∑–¥–µ—Å—å](https://github.com/agricolamz/DS_for_DH/blob/master/data/daghestan_census.xlsx?raw=true) –ª–µ–∂–∏—Ç –¥–∞—Ç–∞—Å–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–ª–∞—Ö –≤ –î–∞–≥–µ—Å—Ç–∞–Ω–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.xlsx`. –î–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ä–∞–∑–Ω—ã–º –ª–∏—Å—Ç–∞–º –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –ø–æ—ç—Ç–æ–º—É –∏–º–µ—é—Ç —Å—É—Ñ—Ñ–∏–∫—Å `_s1` -- –ø–µ—Ä–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ `_s2` -- –≤—Ç–æ—Ä–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫):

* `id_s1` -- (s1) –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞;
* `name_1885` -- (s1) –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–ª–µ–Ω–∏—è –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 1885
* `census_1885` -- (s1) —á–∏—Å–ª–æ –ª—é–¥–µ–π –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 1885
* `name_1895` -- (s1) –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–ª–µ–Ω–∏—è –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 1895
* `census_1895` -- (s1) —á–∏—Å–ª–æ –ª—é–¥–µ–π –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 1895
* `name_1926` -- (s1) –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–ª–µ–Ω–∏—è –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 1926
* `language_s1` -- (s1) —è–∑—ã–∫ –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø–µ—Ä–≤–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É
* `census_1926` -- (s1) —á–∏—Å–ª–æ –ª—é–¥–µ–π –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 1926
* `name_2010` -- (s1) –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–ª–µ–Ω–∏—è –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 2010
* `census_2010` -- (s1) —á–∏—Å–ª–æ –ª—é–¥–µ–π –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∏ 2010
* `name_s2` -- (s2) –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –≤—Ç–æ—Ä–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É
* `language_s2` -- (s2) —è–∑—ã–∫ –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –ø–µ—Ä–≤–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É
* `Lat` -- (s2) —à–∏—Ä–æ—Ç–∞ —Å–µ–ª–µ–Ω–∏—è
* `Lon` -- (s2) –¥–æ–ª–≥–æ—Ç–∞ —Å–µ–ª–µ–Ω–∏—è
* `elevation` -- (s2) –≤—ã—Å–æ—Ç–∞ —Å–µ–ª–µ–Ω–∏—è –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è

–í–æ-–ø–µ—Ä–≤—ã—Ö, –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –≤—Å–µ –ª–∏—Å—Ç—ã `.xlsx` –≤–æ–µ–¥–∏–Ω–æ:
```

```{r,  echo=FALSE, message=FALSE}
s1 <- readxl::read_xlsx("data/daghestan_census.xlsx", 1)
s2 <- readxl::read_xlsx("data/daghestan_census.xlsx", 2)
s3 <- readxl::read_xlsx("data/daghestan_census.xlsx", 3)
s4 <- readxl::read_xlsx("data/daghestan_census.xlsx", 4)
s5 <- readxl::read_xlsx("data/daghestan_census.xlsx", 5)
s6 <- readxl::read_xlsx("data/daghestan_census.xlsx", 6)

s1 %>% 
  left_join(s2) %>%
  left_join(s3) %>% 
  left_join(s4) %>% 
  left_join(s6) %>% 
  left_join(s5) %>% 
  distinct() ->
  merged
head(merged)
```

```{block, type = "rmdtask"}
–í–æ-–≤—Ç–æ—Ä—ã—Ö, –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–ª–µ–Ω–∏–π –ø–µ—Ä–≤—ã–π –∏ –≤—Ç–æ—Ä–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–≥–ª–∞—Å—É—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —è–∑—ã–∫–∞ —Å–µ–ª–µ–Ω–∏—è.
```

```{r,  include=FALSE}
merged %>% 
  count(language_s1 == language_s2)
```

```{block, type = "rmdtask"}
–í-—Ç—Ä–µ—Ç—å–∏—Ö, –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ä–µ–¥–Ω—é—é –≤—ã—Å–æ—Ç—É –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è –¥–ª—è —è–∑—ã–∫–æ–≤ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞. –ö–∞–∫–æ–π –≤—ã—à–µ –≤—Å–µ—Ö?
```

```{r,  include=FALSE}
merged %>% 
  group_by(language_s1) %>% 
  summarise(m_el = mean(elevation)) %>% 
  arrange(-m_el)
```

```{block, type = "rmdtask"}
–í-—á–µ—Ç–≤–µ—Ä—Ç—ã—Ö, –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –≥–æ–≤–æ—Ä–∏–ª–æ –Ω–∞ –∫–∞–∂–¥–æ–º –∏–∑ —è–∑—ã–∫–æ–≤ –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞, —Å–æ–≥–ª–∞—Å–Ω–æ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–ø–∏—Å–∏. –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ª–∞–∫—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (`Lak`).
```

```{r,  echo=FALSE, message=FALSE}
merged %>% 
  group_by(language_s2) %>% 
  summarise(s_1885 <- sum(census_1885),
            s_1895 <- sum(census_1895),
            s_1926 <- sum(census_1926),
            s_2010 <- sum(census_2010))
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∏

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞–¥—Å—Ç—Ä–æ–µ–∫ –¥–ª—è `tidyverse`.

* `tidylog` -- –¥–µ–ª–∞–µ—Ç –ª–æ–≥ –ø–∞–π–ø–æ–≤:

```{r}
library(tidylog)
mtcars %>% 
  group_by(cyl, gear) %>% 
  summarise(mean_mpg = mean(mpg)) %>% 
  pivot_wider(names_from = gear, values_from = mean_mpg)
```

```{r, include=FALSE}
detach("package:tidylog")
```

  * `dtplyr` -- –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `dplyr`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è `data.table` –≤–Ω—É—Ç—Ä–∏. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏.

* `sparklyr` -- —Å–≤—è–∑—ã–≤–∞–µ—Ç R —Å Apache Spark (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)

* ...

<!--chapter:end:02-transform.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = FALSE)
ggplot2::theme_set(ggplot2::theme_bw())
```

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö {#viz_1}

```{r, message = FALSE}
library("tidyverse")
```

## –ó–∞—á–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ?
### –ö–≤–∞—Ä—Ç–µ—Ç –ê–Ω—Å–∫–æ–º–±–∞
–í —Ä–∞–±–æ—Ç–µ Anscombe, F. J. (1973). "Graphs in Statistical Analysis" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å–ª–µ–¥—É—é—â–∏–π –¥–∞—Ç–∞—Å–µ—Ç:

```{r, message= FALSE}
quartet <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/anscombe.csv")
quartet
quartet %>% 
  group_by(dataset) %>% 
  summarise(mean_X = mean(x),
            mean_Y = mean(y),
            sd_X = sd(x),
            sd_Y = sd(y),
            cor = cor(x, y),
            n_obs = n()) %>% 
  select(-dataset) %>% 
  round(2)
```

```{r, echo = FALSE, message=FALSE}
library(ggplot2)
quartet %>% 
  ggplot(aes(x, y))+
  geom_point()+
  geom_smooth(method = "lm", se = F)+
  facet_wrap(~dataset)+
  theme_bw()
```

### –î–∞—Ç–∞–∑–∞—É—Ä—É—Å
–í —Ä–∞–±–æ—Ç–µ [Matejka and Fitzmaurice (2017) "Same Stats, Different Graphs"](https://www.autodeskresearch.com/sites/default/files/SameStats-DifferentGraphs.pdf) –±—ã–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞—Ç–∞—Å–µ—Ç—ã:

```{r, message= FALSE}
datasaurus <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/datasaurus.csv")
datasaurus
```

```{r, echo=FALSE, message= FALSE}
datasaurus %>% 
  ggplot(aes(x, y))+
  geom_point()+
  facet_wrap(~dataset)+
  theme_bw()
```

```{r}
datasaurus %>% 
  group_by(dataset) %>% 
  summarise(mean_X = mean(x),
            mean_Y = mean(y),
            sd_X = sd(x),
            sd_Y = sd(y),
            cor = cor(x, y),
            n_obs = n()) %>% 
  select(-dataset) %>% 
  round(1)
```

## –û—Å–Ω–æ–≤—ã `ggplot2`
–ü–∞–∫–µ—Ç `ggplot2` -- —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ R. –î–ª—è —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –ø–∏—à—É—Ç [–º–∞—Å—Å—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π](http://www.ggplot2-exts.org/gallery/). –í —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ ggplot2 [—Å–æ–¥–µ—Ä–∂–∏—Ç—å—Å—è –∑–¥–µ—Å—å](https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf).

### –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Å–µ—è–Ω–∏—è (Scaterplot)

* ggplot2
```{r, cache=TRUE}
ggplot(data = diamonds, aes(carat, price)) +
  geom_point()
```

* dplyr, ggplot2
```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price))+
  geom_point()
```

### –°–ª–æ–∏

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price))+
  geom_point()+
  geom_smooth()
```

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price))+
  geom_smooth()+
  geom_point()
```


### `aes()`

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price, color = cut))+
  geom_point()
```

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price))+
  geom_point(color = "green")
```

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price))+
  geom_point(aes(color = cut))
```

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price, shape = cut))+
  geom_point()
```

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price, label = color))+
  geom_text()
```

```{r}
diamonds %>%
  slice(1:100) %>% 
  ggplot(aes(carat, price, label = color))+
  geom_label()
```

–ò–Ω–æ–≥–¥–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –Ω–∞–ª–µ–∑–∞—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞:

```{r}
library(ggrepel)
diamonds %>%
  slice(1:100) %>% 
  ggplot(aes(carat, price, label = color))+
  geom_text_repel()
```

```{r}
diamonds %>%
  slice(1:100) %>% 
  ggplot(aes(carat, price, label = color))+
  geom_text_repel()+
  geom_point()
```

```{r}
diamonds %>%
  slice(1:100) %>% 
  ggplot(aes(carat, price, label = color, fill = cut))+ # fill –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ
  geom_label_repel(alpha = 0.5)+ # alpha –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
  geom_point()
```

### –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ

```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price, color = cut))+
  geom_point() + 
  labs(x = "–≤–µ—Å (–≤ –∫–∞—Ä–∞—Ç–∞—Ö)",
       y = "—Ü–µ–Ω–∞ (–≤ –¥–æ–ª–ª–∞—Ä–∞—Ö)",
       title = "–°–≤—è–∑—å —Ü–µ–Ω—ã –∏ –≤–µ—Å–∞ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤",
       subtitle = "–î–∞–Ω–Ω—ã–µ –≤–∑—è—Ç—ã –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç—ã diamonds",
       caption = "–≥—Ä–∞—Ñ–∏–∫ —Å–¥–µ–ª–∞–Ω –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ ggplot2")+
  theme(legend.position = "bottom") # —É —Ñ—É–Ω–∫—Ü–∏–∏ theme() –æ–≥—Ä–æ–º–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
```

### –õ–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏–µ —à–∫–∞–ª—ã
![](images/log_scales.png)

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–æ–≤–∞—Ä—å [–õ—è—à–µ–≤—Å–∫–æ–π, –®–∞—Ä–æ–≤–∞ 2011]

```{r freqdict_download, cache=TRUE}
freqdict <- read_tsv("https://github.com/agricolamz/DS_for_DH/raw/master/data/freq_dict_2011.csv")
freqdict %>% 
  arrange(desc(freq_ipm)) %>% 
  mutate(id = 1:n()) %>% 
  slice(1:150) %>% 
  ggplot(aes(id, freq_ipm))+
  geom_point()
```

```{r freqdict_visualise, cache=TRUE}
freqdict %>% 
  arrange(desc(freq_ipm)) %>% 
  mutate(id = 1:n()) %>% 
  slice(1:150) %>% 
  ggplot(aes(id, freq_ipm, label = lemma))+
  geom_point()+
  geom_text_repel()+
  scale_y_log10()
```

### `annotate()`
–§—É–Ω–∫—Ü–∏—è `annotate` –¥–æ–±–∞–≤–ª—è–µ—Ç `geom` –∫ –≥—Ä–∞—Ñ–∏–∫—É.
```{r, cache=TRUE}
diamonds %>%
  ggplot(aes(carat, price, color = cut))+
  geom_point()+
  annotate(geom = "rect", xmin = 4.8, xmax = 5.2,
           ymin = 17500, ymax = 18500, fill = "red", alpha = 0.2) + 
  annotate(geom = "text", x = 4.7, y = 16600,
           label = "–ø–æ–º–æ–≥–∏—Ç–µ...\n —è –≤ —Ä–æ–∑–æ–≤–æ–º\n–∫–≤–∞–¥—Ä–∞—Ç–∏–∫–µ")
```

```{block, type = "rmdtask"}
–°–∫–∞—á–∞–π—Ç–µ [–≤–æ—Ç —ç—Ç–æ—Ç –¥–∞—Ç–∞—Å–µ—Ç](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/first_scatterplot.csv) –∏ –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –¥–∏–∞–≥—Ä–∞–º–º—É —Ä–∞—Å—Å–µ—è–Ω–∏—è.
```

```{r, include = FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/first_scatterplot.csv") %>% 
  ggplot(aes(x, y))+
  geom_point()
```


## –°—Ç–æ–ª–±—á–∞—Ç—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (barplots)

–û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∏ –Ω–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ:

```{r}
misspelling <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/misspelling_dataset.csv")
misspelling 
```

* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ spelling **–∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∞**: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Ç–æ–ª–±—Ü–µ count, –∫–æ—Ç–æ—Ä–æ–µ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏–π
* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ correct **–Ω–µ–∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω—ã**: –≤ —ç—Ç–æ–º —Å—Ç–æ–ª–±—Ü–µ –æ–Ω–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥, –Ω—É–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤


–î–ª—è –∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `geom_col()`
```{r}
misspelling %>% 
  slice(1:20) %>% 
  ggplot(aes(spelling, count))+
  geom_col()
```

–ü–µ—Ä–µ–≤–µ—Ä–Ω–µ–º –æ—Å–∏:
```{r}
misspelling %>% 
  slice(1:20) %>% 
  ggplot(aes(spelling, count))+
  geom_col()+
  coord_flip()
```

–î–ª—è –Ω–µ–∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `geom_bar()`

```{r}
misspelling %>% 
  ggplot(aes(correct))+
  geom_bar()
```

–ü–µ—Ä–µ–≤–µ—Ä–Ω–µ–º –æ—Å–∏:
```{r}
misspelling %>% 
  ggplot(aes(correct))+
  geom_bar()+
  coord_flip()
```


–ù–µ–∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ –∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:
```{r}
diamonds %>% 
  count(cut)
```

–ê–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ –Ω–µ–∞–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π:
```{r}
diamonds %>% 
  count(cut) %>% 
  uncount(n)
```

## –§–∞–∫—Ç–æ—Ä—ã
–ö–∞–∫ –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å –ø–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Ä–∞–∑–¥–µ–ª—É, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É. –ß—Ç–æ–±—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω—É–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å —Ñ–∞–∫—Ç–æ—Ä—ã:

```{r}
my_factor <- factor(misspelling$correct)
head(my_factor)
levels(my_factor)
levels(my_factor) <- rev(levels(my_factor))
head(my_factor)

misspelling %>% 
  mutate(correct = factor(correct, levels = c("deschanel",
                                              "galifianakis",
                                              "johansson",
                                              "kaepernick",
                                              "labeouf",
                                              "macaulay",
                                              "mcgwire",
                                              "mclachlan",
                                              "minaj",
                                              "morissette",
                                              "palahniuk",
                                              "picabo",
                                              "poehler",
                                              "shyamalan",
                                              "mcconaughey"))) %>% 
  ggplot(aes(correct))+
  geom_bar()+
  coord_flip()
```

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç `forcats` (–≤—Ö–æ–¥–∏—Ç –≤ `tidyverse`, –≤–æ—Ç [—Å—Å—ã–ª–∫–∞ –Ω–∞ cheatsheet](https://github.com/rstudio/cheatsheets/raw/master/factors.pdf)).

–ò–Ω–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ–π –±—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `fct_reorder()`:

```{r}
misspelling %>% 
  count(correct)

misspelling %>% 
  count(correct) %>% 
  ggplot(aes(fct_reorder(correct, n), n))+
  geom_col()+
  coord_flip()
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤ —Ñ—É–Ω–∫—Ü–∏—é `fct_reorder()` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –Ω–∞ –≤–µ–∫—Ç–æ—Ä–µ, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç:

```{r}
diamonds %>% 
  mutate(cut = fct_reorder(cut, price, mean)) %>% 
  ggplot(aes(cut)) +
  geom_bar()
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `cut` —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∞ –ø–æ —Å—Ä–µ–¥–Ω–µ–π `mean` —Ü–µ–Ω–µ `price`. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –≤–º–µ—Å—Ç–æ `mean` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`median`, `min`, `max` –∏–ª–∏ –¥–∞–∂–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏).

–ú–æ–∂–Ω–æ —Å–æ–≤–º–µ—â–∞—Ç—å —Ä–∞–∑–Ω—ã–µ `geom_...`:

```{r}
misspelling %>% 
  count(correct) %>% 
  ggplot(aes(fct_reorder(correct, n), n, label = n))+
  geom_col()+
  geom_text(nudge_y = 150)+
  coord_flip()
```

```{block, type = "rmdtask"}
–ù–∞ Pudding –≤—ã—à–ª–∞ [—Å—Ç–∞—Ç—å—è –ø—Ä–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–∞–±—ã](https://pudding.cool/2019/10/pubs/). [–ó–¥–µ—Å—å](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/UK_pubs.csv) –ª–µ–∂–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏. –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ 30 —Å–∞–º—ã—Ö —á–∞—Å—Ç–æ—Ç–æ–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –ø–∞–±–æ–≤ –≤ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏. 
```

```{r, echo=FALSE, message = FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/UK_pubs.csv") %>% 
  count(pub_name, sort = TRUE) %>% 
  mutate(pub_name = reorder(pub_name, n)) %>% 
  slice(1:30) %>% 
  ggplot(aes(pub_name, n, label = n))+
  geom_col()+
  geom_text(nudge_y = 10)+
  coord_flip()+
  labs(x = "", y = "", caption = "data from https://pudding.cool/2019/10/pubs/")
```


<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–π –¥–∞—Ç–∞—Ñ—Ä–µ–π–º, –≥–¥–µ –≤—Å–µ –ø–æ—Å—Å—á–∏—Ç–∞–Ω–æ? ‚û° </summary>
–≠—Ç–æ–º–æ –º–æ–æ —Å–¥–µ–ª–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–µ–π `count`. <br>
</details>

<details> <summary> üëÅ –°—Ç–æ–ø, –∞ –ø–æ—á–µ–º—É —É –º–µ–Ω—è –Ω–∞—Ä–∏—Å–æ–≤–∞–ª–æ—Å—å —Ç–∞–∫ –º–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–π? ‚û° </summary>
–ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–∂–Ω–æ –±—ã–ª–æ, –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –∑–∞–¥–∞–Ω–∏–∏, –≤–∑—è—Ç—å –ª–∏—à—å 30 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π? –ü–æ–ª–µ–∑–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —ç—Ç–æ–≥–æ `slice()`. <br>
</details> 

<details> <summary> üëÅ –ü–æ—á–µ–º—É –Ω–∞—Ä–∏—Å–æ–≤–∞–ª–∏—Å—å –ª–∏—à—å –±–∞—Ä—ã —Å —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å—é 1?. ‚û° </summary>
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `count` –Ω–µ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤–æ–æ–±—â–µ, —Ç–∞–∫ —á—Ç–æ –≤ `slice()` –ø–æ–ø–∞–ª–∏ –±–∞—Ä—ã —Å —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å—é 1. –ù–∞–¥–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –¥–µ–ª–∞—Ç—å `slice()`. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `arrange()` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `sort = TRUE` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `count()` <br>
</details> 

<details> <summary> üëÅ –ö–∞–∂–µ—Ç—Å—è –≤—Å–µ? ‚û° </summary>
–ê –í—ã —É–±—Ä–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∏ –æ—Å–µ–π x –∏ y? –ê –ø–æ–¥–ø–∏—Å—å –¥–æ–±–∞–≤–∏–ª–∏?
<br>
</details>
</details>

```{block, type = "rmdtask"}
–ù–∞ –Ω–æ–≤–æ—Å—Ç–Ω–æ–º –ø–æ—Ä—Ç–∞–ª–µ meduza.io –Ω–µ–¥–∞–≤–Ω–æ –≤—ã—à–ª–∞ [–Ω–æ–≤–æ—Å—Ç—å –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–Ω–∞ "–æ –Ω–µ—É–≤–∞–∂–µ–Ω–∏–∏ –∫ –≤–ª–∞—Å—Ç–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ"](https://meduza.io/short/2019/09/30/pervye-polgoda-primeneniya-zakona-o-neuvazhenii-k-vlasti-v-internete-doklad-agory). –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑ —ç—Ç–æ–π –Ω–æ–≤–æ—Å—Ç–∏. –ü—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ü–≤–µ—Ç `"tan3"`.
```
![](images/visualisation_task.png)

```{r, echo=FALSE}
months <- c("–∞–ø—Ä–µ–ª—å", "–º–∞–π", "–∏—é–Ω—å", "–∏—é–ª—å", "–∞–≤–≥—É—Å—Ç", "—Å–µ–Ω—Ç—è–±—Ä—å")
tibble(month = factor(months, levels = months),
       value = c(2, 12, 14, 8, 5, 4),
       type = 1) %>% 
  ggplot(aes(month, value, label = value, group = type))+
  geom_line(color = "tan3")+
  geom_point(color = "white", size = 4)+
  geom_point(color = "tan3")+
  geom_text(nudge_y = 1)+
  labs(title = "–°–∫–æ–ª—å–∫–æ –¥–µ–ª –≤–æ–∑–±—É–¥–∏–ª–∏ –ø–æ –Ω–æ–≤–æ–º—É –∑–∞–∫–æ–Ω—É", x = "", y = "") ->
  p1

tibble(words = c("–ü—É—Ç–∏–Ω", "–æ–±—â–µ—Å—Ç–≤–æ", "–≥—É–±–µ—Ä–Ω–∞—Ç–æ—Ä—ã", "—Å–∏–ª–æ–≤–∏–∫–∏", '"–ï–¥–∏–Ω–∞—è –†–æ—Å—Å–∏—è"', "–º–µ—Å—Ç–Ω—ã–µ —á–∏–Ω–æ–≤–Ω–∏–∫–∏", "—Å—É–¥—å–∏", "–¥–µ–ø—É—Ç–∞—Ç—ã", "–∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è", "–†–æ—Å–∞—Ç–æ–º"),
       values = c(26, 4, 3, 3, 2, 2, 2, 1, 1, 1)) %>%
  ggplot(aes(fct_reorder(words, values), values, label = values))+
  geom_col(fill = "tan3")+
  geom_text(nudge_y = 0.6)+
  coord_flip()+
  labs(title = "–ö—Ç–æ –±—ã–ª –æ–±—ä–µ–∫—Ç–æ–º –Ω–µ—É–≤–∞–∂–µ–Ω–∏—è", x = "", y = "", caption = "–¥–∞–Ω–Ω—ã–µ meduza.io") ->
  p2

plot(gridExtra::arrangeGrob(p1, p2, nrow = 2))
```

<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –ê —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º, –≥–¥–µ –≤—Å–µ –ø–æ—Å—á–∏—Ç–∞–Ω–æ? ‚û° </summary>
–ê –µ–µ –Ω–µ—Ç. –í–∞–º –Ω–∞–¥–æ —Å–∞–º–∏–º —Å–æ–∑–¥–∞—Ç—å –¥–∞—Ç–∞—Ñ—Ä–µ–π–º. –í—Å–ø–æ–º–º–Ω–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `tibble()` <br>
</details>

<details> <summary> üëÅ –ù–µ –ø–æ–Ω—è—Ç–Ω–æ, –∞ —á—Ç–æ —ç—Ç–æ –∑–∞ `geom_` —Ç–∞–∫–æ–π –ª–∏–Ω–∏—è —Å —Ç–æ—á–∫–æ–π? ‚û° </summary>
–¢–∞–∫–æ–≥–æ `geom_`-–∞ –Ω–µ—Ç. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∏ `geom_`-–∞: `geom_point()`, `geom_text()` –∏ `geom_line()`. <br>
</details> 

<details> <summary> üëÅ –ü–æ—á–µ–º—É –≤—Å–µ —Ä–∏—Å—É–µ—Ç—Å—è –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ? ‚û° </summary>
–ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `factor()`, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å —ç–∫—Å–ø–ª–∏—Ü–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫. <br>
</details> 

<details> <summary> üëÅ –ü–æ—á–µ–º—É —Ç–æ—á–∫–∏ —Ä–∏—Å—É—é—Ç—Å—è, –∞ –ª–∏–Ω–∏—è –Ω–µ —Ö–æ—á–µ—Ç? –°–ø–æ–π–ª–µ—Ä: —Å–∞–º–∏–º —Ç—É—Ç –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è. ‚û° </summary>
–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –∑–¥–µ—Å—å —Å–ø—Ä—è—Ç–∞–Ω–∞ —Ö–∏—Ç—Ä–æ—Å—Ç—å: `ggplot` –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫ –µ–º—É —Å–æ–µ–¥–∏–Ω–∏—Ç—å –∏–º–µ—é—â–∏–µ—Å—è —Ç–æ—á–∫–∏, –ø–æ—ç—Ç–æ–º—É —á—Ç–æ–±—ã –≤—Å–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `type = 1`), –∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `aes()` –≤—Å—Ç–∞–≤–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `group = type`. –¢–æ–≥–¥–∞ `ggplot` –æ–±—ä–µ–¥–∏–Ω–∏—Ç –ª–∏–Ω–∏–µ–π –≤—Å–µ, —á—Ç–æ –∏–º–µ–µ—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `group`.
 <br>
</details> 

<details> <summary> üëÅ –û–π, –∞ –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –±–µ–ª–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ —Ç–æ—á–µ–∫?  ‚û° </summary>
–ù—É–∂–Ω–æ –ø–æ–π—Ç–∏ –Ω–∞ –≤–æ–µ–Ω–Ω—É—é —Ö–∏—Ç—Ä–æ—Å—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –æ–¥–∏–Ω `geom_point()` –±–µ–ª–æ–≥–æ —Ü–≤–µ—Ç–∞ –∏ –±–æ–ª—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –∞ –ø–æ—Ç–æ–º —É–∂–µ –Ω–∞–ª–æ–∂–∏—Ç—å –æ–±—ã—á–Ω—ã–µ —Ç–æ—á–∫–∏. –¢—É—Ç –∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—è–¥–æ–∫–º: —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –ª–∏–Ω–∏—é, –ø–æ—Ç–æ–º –±–µ–ª—ã–µ —Ç–æ—á–∫–∏, –∞ –ø–æ—Ç–æ–º —É–∂–µ –∫–æ—Ä–∏—á–Ω–µ–≤—ã–µ. –ê –≥–¥–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `geom_text()`?
 <br>
</details> 

<details> <summary> üëÅ –ö–∞–∂–µ—Ç—Å—è –≤—Å–µ? ‚û° </summary>
–ê –í—ã —É–±—Ä–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∏ –æ—Å–µ–π x –∏ y? –ê –ø–æ–¥–ø–∏—Å—å –¥–æ–±–∞–≤–∏–ª–∏?
<br>
</details>
</details>


## –î–æ—Ç–ø–ª–æ—Ç
–ò–Ω–æ–≥–¥–∞ –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –º—ã –∏—Å—Å–ª–µ–¥—É–µ–º —á–∏—Å–ª–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ–¥—Ö–æ–¥–∏—Ç –ø—Ä–æ—Å—Ç–æ–π –≥—Ä–∞—Ñ–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—à–∏—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –Ω–∞ –æ–¥–Ω–æ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —á–∏—Å–ª–æ–≤–æ–π —à–∫–∞–ª–µ.

```{r}
mtcars %>% 
  ggplot(aes(mpg)) +
  geom_dotplot(method = "histodot")
```

–ü–æ –æ—Å–∏ x –æ—Ç–ª–æ–∂–µ–Ω–∞ –Ω–∞—à–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–∞–∂–¥–∞—è —Ç–æ—á–∫–∞ -- –æ–¥–Ω–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, –∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –ø–æ –æ—Å–∏ y —Å—Ç–æ–∏—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å -- –æ–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–∞–∫–µ—Ç–∞ `ggplot2`. –í–æ–∑–º–æ–∂–Ω–æ —á—É—Ç—å –ø–æ–Ω—è—Ç–Ω–µ–µ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `geom_rug()`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç **–∫–∞–∂–¥–æ–µ** –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ.

```{r}
mtcars %>% 
  ggplot(aes(mpg)) +
  geom_rug()+
  geom_dotplot(method = "histodot")
```


–ë–æ–ª—å—à–∏–π —Å–º—ã—Å–ª –∏–º–µ–µ—Ç —Ä–∞—Å–∫—Ä–∞—à–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

```{r}
mtcars %>% 
  mutate(cyl = factor(cyl)) %>% 
  ggplot(aes(mpg, fill = cyl)) +
  geom_rug()+
  geom_dotplot(method = "histodot")+
  scale_y_continuous(NULL, breaks = NULL) # —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –æ—Å—å y
```
–ö–∞–∫ –≤–∏–¥–Ω–æ, –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ, –æ–¥–Ω–∞ —Å–∏–Ω—è—è —Ç–æ—á–∫–∞ –ø–æ–ø–∞–ª–∞ –ø–æ–¥ –æ–¥–Ω—É –∑–µ–ª–µ–Ω—É—é: –∑–Ω–∞—á–∏—Ç –æ–Ω–∏ –∏–º–µ—é—Ç –æ–±—â–µ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ.

## –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã
–ï—Å–ª–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –¥–æ—Ç–ø–ª–æ—Ç –Ω–µ –∏–º–µ–µ–º –º–Ω–æ–≥–æ —Å–º—ã—Å–ª–∞:

```{r}
diamonds %>% 
  ggplot(aes(price)) +
  geom_dotplot(method = "histodot")+
  scale_y_continuous(NULL, breaks = NULL) # —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –æ—Å—å y

diamonds %>% 
  ggplot(aes(price)) +
  geom_histogram()
```

–û–±—Å—É–¥–∏–º –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ

```{r}
mtcars %>% 
  ggplot(aes(mpg))+
  geom_rug()+
  geom_histogram()
```

–ü–æ –æ—Å–∏ x –æ—Ç–ª–æ–∂–µ–Ω–∞ –Ω–∞—à–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∞ –≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±—Ü–∞ –≥–æ–≤–æ—Ä–∏—Ç, —Å–∫–æ–ª—å–∫–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –∏–º–µ—é—Ç —Ç–∞–∫–æ–µ –∂–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. –û–¥–Ω–∞–∫–æ –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –º—ã —Å—á–∏—Ç–∞–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º:

```{r}
mtcars %>% 
  ggplot(aes(mpg)) +
  geom_rug()+
  geom_histogram(bins = 100)
mtcars %>% 
  ggplot(aes(mpg)) +
  geom_rug()+
  geom_histogram(bins = 5)
```

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ R, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Å–Ω–∏–º–∞—Ç—å —Å —Å–µ–±—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:

* [Sturgers 1926] `nclass.Sturges(mtcars$mpg)`
* [Scott 1979] `nclass.scott(mtcars$mpg)`
* [Freedman, Diaconis 1981] `nclass.FD(mtcars$mpg)`

```{r}
mtcars %>% 
  ggplot(aes(mpg)) +
  geom_histogram(bins = nclass.FD(mtcars$mpg))
```

```{block, type = "rmdtask"}
–ö–∞–∫–æ–π –∏–∑ –º–µ—Ç–æ–¥–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ `iris`?
```

```{r, echo = FALSE}
iris %>% 
  ggplot(aes(Petal.Length)) +
  geom_histogram(bins = nclass.scott(iris$Petal.Length))
```

–í —ç—Ç–æ–º —Ç–∏–ø–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥—Ä—É–≥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
```{r}
iris %>% 
  ggplot(aes(Petal.Length, fill = Species)) +
  geom_rug()+
  geom_histogram()
```

## –§—É–Ω–∫—Ü–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —Ç–∞–∫–æ–π —Ä—É–±–ª–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫, –∞ –µ–≥–æ —Å–≥–ª–∞–∂–µ–Ω–Ω—É—é –≤–∞—Ä–∏–∞–Ω—Ç, —ã–π—Ç–æ—Ä—ã–π —Å—Ç—Ä–æ–∏—Ç—å—Å—è –ø—Ä–∏ –ø–æ–º–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–ª–æ—Ç—è–¥–µ—Ä–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –Ω–æ—Å—Ç–∏. –í–∞–∂–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —Å—Ç–æ–∏—Ç –ø–æ–Ω–∏–º–∞—Ç—å –ø—Ä–æ —Ñ—É–Ω–∫—Ü–∏—é –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ --- —á—Ç–æ –∫—Ä–∏–≤–∞—è, –ø–æ–ª—É—á–∞–µ–º–∞—è —è–¥–µ—Ä–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏, –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ–ª–∏—á–∏–Ω—ã –∫–æ—Ä–æ–±–∫–∏ –≥–∏—Å—Ç–¥–µ–ª–µ–Ω–∏—è (—Ö–æ—Ç—è –µ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç `adjust`–≤–µ—á–∞–µ—Ç –∑–∞ —Å—Ç–µ–ø–µ–Ω—å "–±–ª–∏–∑–æ—Å—Ç–∏" —Ñ—É–Ω–∫—Ü–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –∫ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–µ).
```{r}
iris %>% 
  ggplot(aes(Petal.Length)) +
  geom_rug()+
  geom_density()
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
```{r}
iris %>% 
  ggplot(aes(Petal.Length, fill = Species)) +
  geom_rug()+
  geom_density()
```

–ß–∞—Å—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:
```{r}
iris %>% 
  ggplot(aes(Petal.Length, fill = Species)) +
  geom_rug()+
  geom_density(alpha = 0.6) # –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç 0 –¥–æ 1
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∏–Ω–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –≥—Ä—É–ø–ø—ã –Ω–∞ —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏:

```{r}
# install.packages(ggridges)
library(ggridges)
iris %>% 
  ggplot(aes(Petal.Length, Species, fill = Species)) +
  geom_density_ridges(alpha = 0.6) # –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç 0 –¥–æ 1
```

```{block, type = "rmdtask"}
–í –¥–ª–∏–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ "2015 Kantar Information is Beautiful Awards" –ø–æ–ø–∞–ª–∞ [–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è Perceptions of Probability](https://www.informationisbeautifulawards.com/showcase/818-perceptions-of-probability), —Å–¥–µ–ª–∞–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º [zonination](https://github.com/zonination) –≤ `ggplot2`. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –µ–µ [—Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/perceptions_of_probability.csv).
```

```{r, echo=FALSE, message=FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/perceptions_of_probability.csv") %>% 
  pivot_longer(names_to = "word", values_to = "ass_prob", `Almost Certainly`:`Chances Are Slight`) %>% 
  mutate(word = fct_reorder(word, ass_prob, mean)) %>% 
  ggplot(aes(ass_prob, word, fill = word))+
  geom_density_ridges_gradient(show.legend = FALSE)+
  labs(y = "", x = "assigned probability")
```

<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –∫–∞–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç? ‚û° </summary>
–Ø –¥–µ–ª–∞–ª —ç—Ç–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `pivot_longer()`. <br>
</details>

<details> <summary> üëÅ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∫–æ–ª–æ–Ω–∫–∞–º ‚û° </summary>
–î–∞, –µ—Å–ª–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –µ—Å—Ç—å –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Ü–∏—Ñ—Ä—ã, —Ç–æ –∫ –Ω–∏–º –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è, –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å –æ–±—Ä–∞—Ç—ã–Ω–º–∏ –∫–æ–≤—ã—á–∫–∞–º–∏ **`**. <br>
</details> 

<details> <summary> üëÅ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –Ω–æ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π... ‚û° </summary>
–ê–≥–∞, –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏ —Ñ–∞–∫—Ç–æ—Ä—ã. –§—É–Ω–∫—Ü–∏—è `fct_reorder()` –ø–æ–∑–≤–æ–ª—è—è–µ—Ç –º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏ –¥–∞–∂–µ –∑–∞–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –≤—Ä–æ–¥–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –∏–ª–∏ –º–µ–¥–∏–∞–Ω—ã, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ. <br>
</details> 

<details> <summary> üëÅ –∞ –∫–∞–∫ —É–±—Ä–∞—Ç—å –ª–µ–≥–µ–Ω–¥—É? ‚û° </summary>
–õ–µ–≥–µ–Ω–¥—É –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –¥–æ–±–∞–≤–∏–≤ `show.legend = FALSE` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `geom_...`.
<br>
</details>
</details>

## –¢–æ—á–∫–∏, –¥–∂–∏—Ç—Ç–µ—Ä (jitter), –≤–∞–π–æ–ª–∏–Ω–ø–ª–æ—Ç (violinplot), —è—â–∏–∫–∏ —Å —É—Å–∞–º–∏ (boxplot),

–í–æ—Ç –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:

```{r, cache=TRUE}
iris %>% 
  ggplot(aes(Species, Petal.Length))+
  geom_point()

iris %>% 
  ggplot(aes(Species, Petal.Length))+
  geom_jitter()

iris %>% 
  ggplot(aes(Species, Petal.Length))+
  geom_jitter(width = 0.3)

library("ggbeeswarm")
iris %>% 
  ggplot(aes(Species, Petal.Length))+
  geom_quasirandom()

diamonds %>% 
  ggplot(aes(cut, price))+
  geom_violin()

diamonds %>% 
  ggplot(aes(cut, price))+
  geom_boxplot()
```

![](images/boxplot.png)

## –§–∞—Å–µ—Ç–∏–∑–∞—Ü–∏—è
–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞—Å–µ—Ç–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∫–æ–π-—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

```{r, cache=TRUE}
diamonds %>% 
  ggplot(aes(carat, price))+
  geom_point(size = 0.3)+
  facet_wrap(~cut)
```
–ü—Ä–∏ —ç—Ç–æ–º –∏–Ω–æ–≥–¥–∞ —Ç–∞–∫ –±—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω–∞–ª–∏—á–∏–µ –∫–∞–∫–æ–π-—Ç–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –∏–∑ —Ñ–∞—Å–µ—Ç–æ–≤, –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∏–º–µ—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —à–∫–∞–ª—É –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –≠—Ç–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `scales`:

```{r, cache=TRUE}
diamonds %>% 
  ggplot(aes(carat, price))+
  geom_point(size = 0.3)+
  facet_wrap(~cut, scales = "free")
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã:

```{r, fig.height=15}
diamonds %>% 
  ggplot(aes(carat, price))+
  geom_point(size = 0.3)+
  facet_wrap(~cut+color)
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Ç–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è geom_grid(), –æ–Ω–∏ `facet_grid()`–Ω—å—à–µ –º–µ—Å—Ç–∞, —á–µ–º `facet_wrap()`:

```{r, cache=TRUE}
diamonds %>% 
  ggplot(aes(carat, price))+
  geom_point(size = 0.3)+
  facet_grid(cut~color, scales = "free")
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ `facet_grid()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å –æ–±–æ—â–∞—é—â–∏–µ –ø–æ–ª—è, –≥–¥–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞–∫–æ–π-—Ç–æ —Å—Ç—Ä–æ—á–∫–µ –∏–ª–∏ —Å—Ç–æ–ª–±—Ü—É:


```{r, cache=TRUE}
diamonds %>% 
  ggplot(aes(carat, price))+
  geom_point(size = 0.3)+
  facet_grid(cut~color, scales = "free", margins = TRUE)
```


## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
### –ü–æ—Ç–æ–∫–æ–≤–∞—è –î–∏–∞–≥—Ä–∞–º–º–∞ (Sankey diagram)

–û–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [–ø–æ—Ç–æ–∫–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞](https://en.wikipedia.org/wiki/Sankey_diagram).

```{r, warning=FALSE}
library("ggforce")
zhadina <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/zhadina.csv")
zhadina %>% 
  gather_set_data(1:3) %>% 
  ggplot(aes(x, id = id, split = y, value = n))+
  geom_parallel_sets(aes(fill = type), alpha = 0.6, axis.width = 0.5) +
  geom_parallel_sets_axes(axis.width = 0.5, color = "lightgrey", fill = "white") +
  geom_parallel_sets_labels(angle = 0) +
  theme_no_axes()+
  theme(legend.position = "bottom")
```

–ê –∫–∞–∫ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫? –°–Ω–æ–≤–∞ —Ñ–∞–∫—Ç–æ—Ä—ã.

```{r, warning=FALSE}
zhadina %>% 
  gather_set_data(1:3) %>% 
  mutate(y = fct_reorder(y, n, mean)) %>% 
  ggplot(aes(x, id = id, split = y, value = n))+
  geom_parallel_sets(aes(fill = type), alpha = 0.6, axis.width = 0.5) +
  geom_parallel_sets_axes(axis.width = 0.5, color = "lightgrey", fill = "white") +
  geom_parallel_sets_labels(angle = 0) +
  theme_no_axes()+
  theme(legend.position = "bottom")
```

–ú–æ–∂–Ω–æ –¥–æ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∑–∞–¥–∞–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `levels` —Ñ—É–Ω–∫—Ü–∏–∏ `factor()`.

### UpSet Plot

–ï—Å–ª–∏ –¥–∏–∞–≥—Ä–∞–º–º–∞ Sankey –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ø–∞—Ä–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Ç–æ –≥—Ä–∞—Ñ–∏–∫ UpSet –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏ —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º–µ –í–µ–Ω–∞, —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Å–º. [—ç—Ç—É —Å—Ç–∞—Ç—å—é –õ–∞—É—Ä—ã –≠–ª–ª–∏—Å](https://www.littlemissdata.com/blog/set-analysis)).

```{r, fig.height=9}
library(UpSetR)
movies <- read.csv( system.file("extdata", "movies.csv", package = "UpSetR"), header=TRUE, sep=";" )
str(movies)
upset(movies[,3:19], nsets = 16, order.by = "freq")
```


<!--chapter:end:03-data_visualisation.Rmd-->

---
editor_options: 
  chunk_output_type: console
---
# –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ {#strings}

## –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –≤ R

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

* –±–∞–∑–æ–≤—ã–π R
* –ø–∞–∫–µ—Ç `stringr` (—á–∞—Å—Ç—å `tidyverse`)
* –ø–∞–∫–µ—Ç `stringi` -- –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç, —Ç–∞–∫ —á—Ç–æ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```{r, eval=FALSE}
install.packages("stringi")
library(tidyverse)
library(stringi)
```

```{r, include=FALSE}
library(tidyverse)
library(stringi)
```

–ú—ã –±—É–¥–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–∞–∫–µ—Ç–∞–º–∏ `stingr` –∏ `stringi`, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞—è—Ö —É–¥–æ–±–Ω–µ–µ. –ö —Å—á–∞—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–∏ —ç—Ç–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –ª–µ–≥–∫–æ –æ—Ç–ª–∏—á–∏—Ç—å –æ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö: —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞–∫–µ—Ç `stringr` –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `str_`, –∞ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞ `stringi` --- c `stri_`.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç [cheat sheet –ø–æ `stringr`](https://github.com/rstudio/cheatsheets/raw/master/strings.pdf).

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É?

* —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–∞–≤—ã—á–∫–∞–º–∏
```{r}
"the quick brown fox jumps over the lazy dog"
'the quick brown fox jumps over the lazy dog'
"the quick 'brown' fox jumps over the lazy dog"
'the quick "brown" fox jumps over the lazy dog'
```

* –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
```{r}
""
''
character(3)
```

* –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
```{r}
typeof(4:7)
as.character(4:7)
```

* –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã
```{r}
letters
LETTERS
month.name
```

* –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ `data.frame()`, `read.csv()`,  `read.csv2()`, `read.table()` –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ R –≤—Å–µ–≥–¥–∞ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–∫—Ç–æ—Ä—ã, –∏ —á—Ç–æ–±—ã —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `stringsAsFactors`. –≠—Ç–æ –º–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ R, –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ —ç—Ç–æ [–≤–æ—Ç —ç—Ç–æ—Ç –±–ª–æ–≥ –ø–æ—Å—Ç –†–æ–¥–∂–µ—Ä–∞ –ü–µ–Ω–≥–∞](https://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/).
```{r}
str(data.frame(letters[6:10], LETTERS[4:8]))
str(data.frame(letters[6:10], LETTERS[4:8], stringsAsFactors = FALSE))
```

–ù–æ —ç—Ç–æ–º –∫—É—Ä—Å–µ –º—ã —É—á–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É `tibble()`, `read_csv()`, `read_csv2()`, `read_tsv()`, `read_delim()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `readr` (–≤—Ö–æ–¥–∏—Ç –≤ `tidyverse`).

* –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–Ω–¥–æ–º–Ω—ã—Ö —Å—Ç—Ä–æ–∫
```{r}
set.seed(42)
stri_rand_strings(n = 10, length = 5:14)
```

* –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ—Ç —Å–∏–º–≤–æ–ª—ã –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏
```{r}
stri_rand_shuffle("–ª—é–±—è, —Å—ä–µ—à—å —â–∏–ø—Ü—ã, ‚Äî –≤–∑–¥–æ—Ö–Ω—ë—Ç –º—ç—Ä, ‚Äî –∫–∞–π—Ñ –∂–≥—É—á")
stri_rand_shuffle(month.name)
```

* –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Å–µ–≤–¥–æ—Ä–∞–Ω–¥–æ–º–Ω—ã–π —Ç–µ–∫—Å—Ç ^[Lorem ipsum --- –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç-–∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–∫—Ç–∞—Ç–∞ –ú–∞—Ä–∫–∞ –¢—É–ª–ª–∏—è –¶–∏—Ü–µ—Ä–æ–Ω–∞ "–û –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–æ–±—Ä–∞ –∏ –∑–ª–∞". –ï–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–º–æ—Ç—Ä–∏—Ç—å—Å—è, –∫–æ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ç–µ–∫—Å—Ç–æ–º]
```{r}
stri_rand_lipsum(nparagraphs = 2)
```

## –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫

–°–æ–µ–¥–∏–Ω–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `str_c()`, –≤ –∫–æ—Ç–æ—Ä—É—é, –∫–∞–∫ –∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `—Å()`, –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:
```{r}
tibble(upper = rev(LETTERS), smaller = letters) %>% 
  mutate(merge = str_c(upper, smaller))
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–æ–±–µ–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å, —É–∫–∞–∑–∞–≤ –µ–≥–æ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ `sep`:

```{r}
tibble(upper = rev(LETTERS), smaller = letters) %>% 
  mutate(merge = str_c(upper, smaller, sep = "_"))
```

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `separate()`. –≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–∑–Ω–æ—Å–∏—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å—Ç—Ä–æ–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã. –£ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞: `col` --- –∫–æ–ª–æ–Ω–∫–∞, –∫–æ—Ç–æ—Ä—É—é —Å–ª–µ–¥—É–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å, `into` --- –≤–µ–∫—Ç–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–æ–≤—ã—Ö —Å—Ç–æ–ª–±–µ—Ü, `sep` --- —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å.

```{r}
tibble(upper = rev(LETTERS), smaller = letters) %>% 
  mutate(merge = str_c(upper, smaller, sep = "_")) %>% 
  separate(col = merge, into = c("column_1", "column_2"), sep = "_")
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `str_split()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç *—Å–ø–∏—Å–æ–∫*.

```{r}
str_split(month.name, "r")
```


## –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤

### –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤

![](images/5.01_str_length.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(n_charactars = str_count(mn))
```

### –ü–æ–¥–≥–æ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤

–ú–æ–∂–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å —Å—Ç—Ä–æ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `str_trunc()`:

![](images/5.02_str_trunc.png)
```{r}
tibble(mn = month.name) %>% 
  mutate(mn_new = str_trunc(mn, 6))
```

–ú–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Å –∫–∞–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –æ–±—Ä–µ–∑–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –∞—Ä–≥—É–º–µ–Ω—Ç `side`:
```{r}
tibble(mn = month.name) %>% 
  mutate(mn_new = str_trunc(mn, 6, side = "left"))
tibble(mn = month.name) %>% 
  mutate(mn_new = str_trunc(mn, 6, side = "center"))
```

–ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –∞—Ä–≥—É–º–µ–Ω—Ç `ellipsis`:
```{r}
tibble(mn = month.name) %>% 
  mutate(mn_new = str_trunc(mn, 3, ellipsis = ""))
```

–ú–æ–∂–Ω–æ –Ω–∞–æ–±–æ—Ä–æ—Ç "—Ä–∞–∑–¥—É—Ç—å" —Å—Ç—Ä–æ–∫—É:

![](images/5.03_str_pad.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(mn_new = str_pad(mn, 10))
```

–û–ø—è—Ç—å –∂–µ –µ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `side`:
```{r}
tibble(mn = month.name) %>% 
  mutate(mn_new = str_pad(mn, 10,  side = "right"))
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å, —á–µ–º "—Ä–∞–∑–¥—É–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É":

```{r}
tibble(mn = month.name) %>% 
  mutate(mn_new = str_pad(mn, 10,  pad = "."))
```


```{block, type = "rmdtask"}
–ù–∞ Pudding –≤—ã—à–ª–∞ [—Å—Ç–∞—Ç—å—è –ø—Ä–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–∞–±—ã](https://pudding.cool/2019/10/pubs/). [–ó–¥–µ—Å—å](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/UK_pubs.csv) –ª–µ–∂–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏. –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ 40 —Å–∞–º—ã—Ö —á–∞—Å—Ç–æ—Ç–æ–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –ø–∞–±–æ–≤ –≤ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏, –æ—Ç–ª–æ–∂–∏–≤ –ø–æ –æ—Å–∏ x –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤, –∞ –ø–æ –æ—Å–∏ y -- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ä–æ–≤ —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º.
```

```{r, echo=FALSE, message = FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/UK_pubs.csv") %>% 
  count(pub_name, sort = TRUE) %>% 
  mutate(nchar = str_length(pub_name)) %>% 
  slice(1:40) %>% 
  ggplot(aes(nchar, n, label = pub_name))+
  geom_point()+
  ggrepel::geom_text_repel()+
  labs(x = "number of symbols",
       y = "number of bars",
       titles = "40 most popular bar names in UK",
       caption = "data from https://pudding.cool/2019/10/pubs/")
```

<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –î–∞—Ç–∞—Å–µ—Ç —Å–∫–∞—á–∞–ª—Å—è, —á—Ç–æ –¥–∞–ª—å—à–µ? ‚û° </summary>
–ü–µ—Ä–≤–æ-–Ω–∞–ø–µ—Ä–≤–æ —Å–ª–µ–¥—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—ã —Ö—Ä–∞–Ω–∏–ª–æ—Å—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ –∏–∑ –±–∞—Ä–æ–≤. <br>
</details>

<details> <summary> üëÅ –ê –∫–∞–∫ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ä–æ–≤? ‚û° </summary>
–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `count()`. <br>
</details>

<details> <summary> üëÅ –ë–∞—Ä—ã –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª–∏, —á—Ç–æ –¥–∞–ª—å—à–µ? ‚û° </summary>
–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –≥–¥–µ –±—ã —Ö—Ä–∞–Ω–∏–ª–∞—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–∏–º–≤–æ–ª–æ–≤. <br>
</details>

<details> <summary> üëÅ –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –µ—Å—Ç—å, —Ç–µ–ø–µ—Ä—å —Ä–∏—Å—É–µ–º? ‚û° </summary>
–ù–µ —Å–æ–≤—Å–µ–º. –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Ä–∏—Å–æ–≤–∞—Ç—å –Ω—É–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å 50 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö. <br>
</details>

<details> <summary> üëÅ –¢–∞–∫, –≤—Å–µ –≥–æ—Ç–æ–≤–æ, –∞ –∫–∞–∫–∏–µ `geom_()`? ‚û° </summary>
–ù–∞ –≥—Ä–∞—Ñ–∏–∫–µ `geom_point()` –∏ `geom_text_repel()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `ggrepel`. <br>
</details>

<details> <summary> üëÅ –ê-–∞-–∞-–∞! `could not find function "geom_text_repel"` ‚û° </summary>
–ê –≤—ã –≤–∫–ª—é—á–∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `ggrepel`? –ï—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–∏–ª–∏, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. <br>
</details>

<details> <summary> üëÅ –ê-–∞-–∞-–∞! `geom_text_repel requires the following missing aesthetics: label"` ‚û° </summary>
–í—Å–µ, –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞: —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Ç–µ–∫—Å—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `aes()` –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç `label = pub_name`. –ò–Ω–∞—á–µ –æ—Ç–∫—É–¥–∞ –æ–Ω —É–∑–Ω–∞–µ—Ç, —á—Ç–æ –µ–º—É –ø–∏—Å–∞—Ç—å? <br>
</details>

<details> <summary> üëÅ –§—É—Ñ! –í—Å–µ –≥–æ—Ç–æ–≤–æ! ‚û° </summary>
–ê –æ—Å–∏ –ø–æ–¥–ø–∏—Å–∞–Ω—ã? –ê –∑–∞–≥–æ–ª–æ–≤–æ–∫? –ê –ø–æ–¥–ø–∏—Å—å –ø—Ä–æ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö? <br>
</details>
</details>

## –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
–î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `sort()` –∏ —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ `stringr` `str_sort()`:

```{r}
unsorted_latin <- c("I", "‚ô•", "N", "Y")
sort(unsorted_latin)
str_sort(unsorted_latin)
str_sort(unsorted_latin, locale = "lt")
unsorted_cyrillic <- c("—è", "i", "–∂")
str_sort(unsorted_cyrillic)
str_sort(unsorted_cyrillic, locale = "ru_UA")
```

–°–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª–µ–π –Ω–∞ –∫–æ–ø–º—å—é—Ç–µ—Ä–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `stringi::stri_locale_list()`. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ª–æ–∫–∞–ª–µ–π –≤–æ–æ–±—â–µ –ø—Ä–∏–≤–µ–¥–µ–Ω [–Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes). –ï—â–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: `stringi::stri_locale_info` –∏ `stringi::stri_locale_set`.

–ù–µ —É–≥–ª—É–±–ª—è—è—Å—å –≤ [—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏](https://www.youtube.com/watch?v=BeoCbJPuvSE), –æ—Ç–º–µ—á—É, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é —Ö—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```{r, cache= TRUE}
set.seed(42)
huge <- sample(letters, 1e7, replace = TRUE)
head(huge)
system.time(
  sort(huge)
)

system.time(
  sort(huge, method = "radix")
)

system.time(
  str_sort(huge)
)

huge_tbl <- tibble(huge)
system.time(
  huge_tbl %>% 
    arrange(huge)
)
```

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥: –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö -- `sort(..., method = "radix")`.

## –ü–æ–∏—Å–∫ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `str_detect()`:

![](images/5.04_str_detect.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(has_r = str_detect(mn, "r"))
```

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã, –∞ –Ω–µ –∑–Ω–∞—á–µ–Ω–∏—è `TRUE`/`FALSE`:
![](images/5.05_str_which.png)

```{r}
tibble(mn = month.name) %>% 
  slice(str_which(month.name, "r"))
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–∂–¥–µ–Ω–∏–π –∫–∞–∫–æ–π-—Ç–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏:

![](images/5.06_str_count.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(has_r = str_count(mn, "r"))
```

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞
```{r}
latin <- "tHe QuIcK BrOwN fOx JuMpS OvEr ThE lAzY dOg"
cyrillic <- "–ª–Æ–±–Ø, —Å–™–µ–®—å –©–∏–ü—Ü–´, ‚Äî –≤–ó–¥–û—Ö–ù—ë–¢ –º–≠—Ä, ‚Äî –∫–ê–π–§ –∂–ì—É–ß"
str_to_upper(latin)
str_to_lower(cyrillic)
str_to_title(latin)
```

### –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
–ü–æ–¥—Å—Ç—Ä–æ–∫—É –≤ —Å—Ç—Ä–æ–∫–µ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏: –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º —Ñ—É–Ω–∫—Ü–∏–µ–π `str_sub()`, –∏ –ø–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–µ —Ñ—É–Ω–∫—Ü–∏–µ–π `str_png()`.

extract(images/5.07_str_sub.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(mutate = str_sub(mn, start = 1, end = 2))
```

![](images/5.08_str_extract.png)      

```{r}
tibble(mn = month.name) %>% 
  mutate(mutate = str_extract(mn, "r"))
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏—è `str_extract()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —à–∞–±–ª–æ–Ω—É. –¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `str_extract_all()`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —à–∞–±–ª–æ–Ω—É, –æ–¥–Ω–∞–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ —Å–ø–∏—Å–æ–∫.

```{r}
str_extract_all(month.name, "r")
```

### –ó–∞–º–µ–Ω–∞ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `str_replace()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –æ–¥–Ω—É –ø–æ–¥—Å—Ç—Ä–æ–∫—É –≤ —Å—Ç—Ä–æ–∫–µ –Ω–∞ –¥—Ä—É–≥—É—é:

![](images/5.11_str_replace.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(mutate = str_replace(mn, "r", "R"))
```

–ö–∞–∫ –∏ –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `str_replace()` –¥–µ–ª–∞–µ—Ç –ª–∏—à—å –æ–¥–Ω—É –∑–∞–º–µ–Ω—É, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `str_replace_all()`:

![](images/5.12_str_replace_all.png)

```{r}
tibble(mn = month.name) %>% 
  mutate(mutate = str_replace_all(mn, "r", "R"))
```

### –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `str_remove()` –∏ `str_remove_all()`

```{r}
tibble(month.name) %>% 
  mutate(mutate = str_remove(month.name, "r"))
tibble(month.name) %>% 
  mutate(mutate = str_remove_all(month.name, "r"))
```

### –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–æ–∫

–í –ø–∞–∫–µ—Ç–µ `stringi` —Å—É—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –º–µ—Ç–æ–¥–æ–≤ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–π —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–æ–π `stri_trans_list()`. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –Ω–∏—Ö:

```{r}
stri_trans_general("stringi", "latin-cyrillic")
stri_trans_general("—Å—ã—Ä–Ω–∏–∫–∏", "cyrillic-latin")
stri_trans_general("stringi", "latin-greek")
stri_trans_general("stringi", "latin-armenian")
```

```{block, type = "rmdtask"}
–í–æ—Ç –¥–≤–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞:

* [—Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –†–æ—Å—Å–∏–∏](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/cities_of_russia.csv)
* [—á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ [–®–∞—Ä–æ–≤, –õ—è—à–µ–≤—Å–∫–∞—è 2011]](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/freq_dict_2011.csv)

–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–∫–æ–ª—å–∫–æ –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–º —Å–ª–æ–≤–æ–º —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–æ—Ä–æ–¥ –û—Ä—ë–ª)? –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–º–µ–Ω—è—Ç—å —ë –Ω–∞ –µ.
```

```{r, cache=TRUE, include=FALSE, eval=FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/cities_of_russia.csv") %>% 
  mutate(city = str_to_lower(city),
         city = str_replace_all(city, "—ë", "–µ")) ->
  cities

read_tsv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/freq_dict_2011.csv") %>% 
  inner_join(cities, by = c("lemma" = "city")) %>% 
  count(lemma)
# 65
```


<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –î–∞—Ç–∞—Å–µ—Ç—ã —Å–∫–∞—á–∞–ª–∏—Å—å, —á—Ç–æ –¥–∞–ª—å—à–µ? ‚û° </summary>
–ù–∞–¥–æ –∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫ –Ω—É–∂–Ω–æ–º—É –≤–∏–¥—É –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å. <br>
</details>

<details> <summary> üëÅ –ê –∫–∞–∫ –∏—Ö —Å–æ–µ–¥–∏–Ω–∏—Ç—å? –ß—Ç–æ —É –Ω–∏—Ö –æ–±—â–µ–≥–æ? ‚û° </summary>  
–í –æ–¥–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `city`, –≤ –¥—Ä—É–≥–æ–º -- –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `lemma`. –í—Å–µ –≥–æ—Ä–æ–¥–∞ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã, –≤—Å–µ –ª–µ–º–º—ã —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã. –Ø –±—ã —É–º–µ–Ω—å—à–∏–ª –±—É–∫–≤—É –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ —Å –≥–æ—Ä–æ–¥–∞–º–∏, —Å–¥–µ–ª–∞–ª –±—ã –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ —Å –≥–æ—Ä–æ–¥–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `town`), —Å–æ–µ–¥–∏–Ω–∏–ª –±—ã –¥–∞—Ç–∞—Å–µ—Ç—ã –∏ –ø–æ—Å—á–∏—Ç–∞–ª –±—ã —Å–∫–æ–ª—å–∫–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º –¥–∞—Ç–∞—Å–µ—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–π `town`.
<br>
</details>

<details> <summary> üëÅ –ê –∫–∞–∫ —Å–æ–µ–¥–Ω–∏—Ç—å? ‚û° </summary>
–Ø –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `dict %>% ... %>% inner_join(cities)`. –ï—Å–ª–∏ –≤ –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤, —Ç–æ —Å–ª–µ–¥—É–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã, –∫–∞–∫–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç:`dict %>% ... %>% inner_join(cities, by = c("lemma" = "city"))`
<br>
</details>

<details> <summary> üëÅ –°–æ–µ–¥–∏–Ω–∏–ª–æ—Å—å –≤—Ä–æ–¥–µ... –ê –∫–∞–∫ –ø–æ—Å—á–∏—Ç–∞—Ç—å? ‚û° </summary>
–Ø –±—ã, –∫–∞–∫ –æ–±—ã—á–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ñ—É–Ω–∫—Ü–∏—é `count()`.
<br>
</details>

</details>

## –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –æ–± –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ (`str_detect()`, `str_extract()`, `str_remove()` –∏ —Ç. –ø.) –∏–º–µ—é—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

* —Å—Ç—Ä–æ–∫–∞, —Å –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è
* –æ–±—Ä–∞–∑–µ—Ü (pattern)

–î–∞–ª—å—à–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `str_view_all()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –æ–±—Ä–∞–∑—Ü–æ–º –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.

```{r}
str_view_all("–Ø –≤—Å–µ–≥–¥–∞ –ø—É—Ç–∞—é —Å –∏ c", "c") # —è –∏—â—É –ª–∞—Ç–∏–Ω—Å–∫—É—é c
```

### –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–æ–≤
```{r}
a <- "–í—Å–µ–º –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ 4$\\2 + 3$ * 5 = 17$? –î–∞? –ù—É —Ö–æ—Ä–æ—à–æ (–∞ —Ç–æ —è –Ω–µ –±—ã–ª —É–≤–µ—Ä–µ–Ω). [|}^{|]"
str_view_all(a, "$")
str_view_all(a, "\\$")
str_view_all(a, "\\.")
str_view_all(a, "\\*")
str_view_all(a, "\\+")
str_view_all(a, "\\?")
str_view_all(a, "\\(")
str_view_all(a, "\\)")
str_view_all(a, "\\|")
str_view_all(a, "\\^")
str_view_all(a, "\\[")
str_view_all(a, "\\]")
str_view_all(a, "\\{")
str_view_all(a, "\\}")
str_view_all(a, "\\\\")
```

### –ö–ª–∞—Å—Å—ã –∑–Ω–∞–∫–æ–≤
* `\\d` -- —Ü–∏—Ñ—Ä—ã. `\\D` -- –Ω–µ —Ü–∏—Ñ—Ä—ã.
```{r}
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "\\d")
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "\\D")
```

* `\\s` -- –ø—Ä–æ–±–µ–ª—ã. `\\S` -- –Ω–µ –ø—Ä–æ–±–µ–ª—ã.
```{r}
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "\\s")
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "\\S")
```

* `\\w` -- –Ω–µ –ø—Ä–æ–±–µ–ª—ã –∏ –Ω–µ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è. `\\W` -- –ø—Ä–æ–±–µ–ª—ã –∏ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è.
```{r}
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "\\w")
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "\\W")
```

* –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ —Å–∏–º–≤–æ–ª–æ–≤ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è –∫ –Ω–µ–π
```{r}
str_view_all("–£–º–µ–π –º–µ—á—Ç–∞—Ç—å, –Ω–µ —Å—Ç–∞–≤ —Ä–∞–±–æ–º –º–µ—á—Ç–∞–Ω—å—è", "[–æ–∞—É–∏—ã—ç—ë–µ—è—é]")
str_view_all("–ò –º—ã—Å–ª–∏—Ç—å, –º—ã—Å–ª–∏ –Ω–µ –æ–±–æ–∂–µ—Å—Ç–≤–∏–≤", "[^–æ–∞—É–∏—ã—ç—ë–µ—è—é]")
```

* –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã —Å–∏–º–≤–æ–ª–æ–≤
```{r}
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "[0-9]")
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "[–∞-—è]")
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "[–ê-–Ø]")
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "[–ê-—è]")
str_view_all("The quick brown Fox jumps over the lazy Dog", "[a-z]")
str_view_all("–¥–≤–∞ 15 42. 42 15. 37 08 5. 20 20 20!", "[^0-9]")
```

![](images/5.13_alternates.png)

* –≤—ã–±–æ—Ä –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø
```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "–ª–∞—Ä|—Ä–∞–ª|–∞—Ä–ª")
```

* –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª
```{r}
str_view_all("–í–µ–∑–µ—Ç –°–µ–Ω—å–∫–∞ –°–∞–Ω—å–∫—É —Å –°–æ–Ω—å–∫–æ–π –Ω–∞ —Å–∞–Ω–∫–∞—Ö. –°–∞–Ω–∫–∏ —Å–∫–æ–∫, –°–µ–Ω—å–∫—É —Å –Ω–æ–≥, –°–æ–Ω—å–∫—É –≤ –ª–æ–±, –≤—Å–µ ‚Äî –≤ —Å—É–≥—Ä–æ–±", "[–°—Å].–Ω")
```

* –∑–Ω–∞–∫ –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏
```{r}
str_view_all("–æ—Ç —Ç–æ–ø–æ—Ç–∞ –∫–æ–ø—ã—Ç –ø—ã–ª—å –ø–æ –ø–æ–ª—é –ª–µ—Ç–∏—Ç.", "^–æ")
str_view_all("–£ –µ–∂–∞ ‚Äî –µ–∂–∞—Ç–∞, —É —É–∂–∞ ‚Äî —É–∂–∞—Ç–∞", "–∂–∞—Ç–∞$")
```

* –µ—Å—Ç—å –µ—â–µ –¥—Ä—É–≥–∏–µ –≥—Ä—É–ø–ø—ã –∏ –¥—Ä—É–≥–∏–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø, —Å–º. `?regex`

![](images/5.14_anchors.png)


### –ö–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

* `?` -- –Ω–æ–ª—å –∏–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑
```{r}
str_view_all("—Ö–æ—Ä–æ—à–µ–µ –¥–ª–∏–Ω–Ω–æ—à–µ–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ", "–µ–µ–µ?")
```

* `*` -- –Ω–æ–ª—å –∏ –±–æ–ª–µ–µ —Ä–∞–∑
```{r}
str_view_all("—Ö–æ—Ä–æ—à–µ–µ –¥–ª–∏–Ω–Ω–æ—à–µ–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ", "–µ–µ*")
```

* `+` -- –æ–¥–∏–Ω –∏ –±–æ–ª–µ–µ —Ä–∞–∑
```{r}
str_view_all("—Ö–æ—Ä–æ—à–µ–µ –¥–ª–∏–Ω–Ω–æ—à–µ–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ", "–µ+")
```

* `{n}` -- `n` —Ä–∞–∑
```{r}
str_view_all("—Ö–æ—Ä–æ—à–µ–µ –¥–ª–∏–Ω–Ω–æ—à–µ–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ", "–µ{2}")
```

* `{n,}` -- `n` —Ä–∞–∑ –∏ –±–æ–ª–µ–µ
```{r}
str_view_all("—Ö–æ—Ä–æ—à–µ–µ –¥–ª–∏–Ω–Ω–æ—à–µ–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ", "–µ{1,}")
```

* `{n,m}` -- –æ—Ç `n` –¥–æ `m`. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–±–µ–ª–∞ –≤–∞–∂–Ω–æ: `{1,2}` -- –ø—Ä–∞–≤–∏–ª—å–Ω–æ, `{1,‚ê£2}` -- –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.
```{r}
str_view_all("—Ö–æ—Ä–æ—à–µ–µ –¥–ª–∏–Ω–Ω–æ—à–µ–µ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ", "–µ{2,3}")
```

* –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
```{r}
str_view_all("–ü—É—à–∫–∏–Ω–æ–≤–µ–¥, –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–µ–¥, –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–æ–≤–µ–¥", "(–æ–≤)+")
str_view_all("–±–µ–ª–æ–≤–∞—Ç—ã–π, —Ä–æ–∑–æ–≤–∞—Ç—ã–π, —Ä–æ–∑–æ–≤–æ–≤–∞—Ç—ã–π", "(–æ–≤)+")
```

* –∂–∞–¥–Ω—ã–π vs. –Ω–µ–∂–∞–¥–Ω—ã–π –∞–ª–æ—Ä–∏—Ç–º—ã
```{r}
str_view_all("–ü—É—à–∫–∏–Ω–æ–≤–µ–¥, –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–µ–¥, –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–æ–≤–µ–¥", "–≤.*–µ–¥")
str_view_all("–ü—É—à–∫–∏–Ω–æ–≤–µ–¥, –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–µ–¥, –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–æ–≤–µ–¥", "–≤.*?–µ–¥")
```

![](images/5.15_quantifiers.png)

### –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (look arounds)

–ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ -- –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥–∞–∂–µ –≤ —Å–≤–µ—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.

–î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º –≤—Å–µ *–∞* **–ø–µ—Ä–µ–¥** *—Ä*:

```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "–∞(?=—Ä)")
```

–ê —Ç–µ–ø–µ—Ä—å –≤—Å–µ *–∞* **–ø–µ—Ä–µ–¥** *—Ä* –∏–ª–∏ *–ª*:

```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "–∞(?=[—Ä–ª])")
```

–î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º –≤—Å–µ –∞ **–ø–æ—Å–ª–µ** *—Ä*

```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "(?<=—Ä)–∞")
```

–ê —Ç–µ–ø–µ—Ä—å –≤—Å–µ *–∞* **–ø–æ—Å–ª–µ** *—Ä* –∏–ª–∏ *–ª*:

```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "(?<=[—Ä–ª])–∞")
```

–¢–∞–∫–∂–µ —É —ç—Ç–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –µ—Å—Ç—å —Ñ–æ—Ä–º—ã —Å –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ–º. –î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º –≤—Å–µ *—Ä* **–Ω–µ –ø–µ—Ä–µ–¥** *–∞*:

```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "—Ä(?!–∞)")
```

–ê —Ç–µ–ø–µ—Ä—å –≤—Å–µ *—Ä* **–Ω–µ –ø–æ—Å–ª–µ** *–∞*:

```{r}
str_view_all("–ö–∞—Ä–ª —É –ö–ª–∞—Ä—ã —É–∫—Ä–∞–ª –∫–æ—Ä–∞–ª–ª—ã, –∞ –ö–ª–∞—Ä–∞ —É –ö–∞—Ä–ª–∞ —É–∫—Ä–∞–ª–∞ –∫–ª–∞—Ä–Ω–µ—Ç", "(?<!–∞)—Ä")
```

–ó–∞–ø–æ–º–Ω–∏—Ç—å —Å —Ö–æ–¥—É —ç—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω–æ, —Ç–∞–∫ —á—Ç–æ –ø–æ–¥—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å—é–¥–∞:

![](images/5.16_lookarounds.png)

```{block, type = "rmdtask"}
[–í–æ—Ç –æ—Ç—Å—é–¥–∞](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/zabolockiy_merknut_znaki_zodiaka.txt) –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª —Å —Ç–µ–∫—Å—Ç–æ–º —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è –ù. –ó–∞–±–æ–ª–æ—Ü–∫–æ–≥–æ "–ú–µ—Ä–∫–Ω—É—Ç –∑–Ω–∞–∫–∏ –∑–∞–¥–∏–∞–∫–∞". –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ–ª—é –∂–µ–Ω—Å–∫–∏—Ö (—É–¥–∞—Ä–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ **–ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π** —Å–ª–æ–≥ —Ä–∏—Ñ–º—É—é—â–∏—Ö—Å—è —Å–ª–æ–≤) –∏ –º—É–∂—Å–∫–∏—Ö (—É–¥–∞—Ä–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ **–ø–æ—Å–ª–µ–¥–Ω–∏–π** —Å–ª–æ–≥ —Ä–∏—Ñ–º—É—é—â–∏—Ö—Å—è —Å–ª–æ–≤) —Ä–∏—Ñ–º –≤ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–∏.
```

```{r, cache=TRUE, include=FALSE}
text <- read_lines("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/zabolockiy_merknut_znaki_zodiaka.txt")
tibble(text = text) %>% 
  filter(text != "") %>% 
  mutate(n_vowels = str_count(text, "[—è—ë—É–µ—ã–∞–æ—ç—é–∏–Ø–Å–£–ï–´–ê–û–≠–Æ–ò]")) %>% 
  count(n_vowels) %>% 
  mutate(ratio = n/sum(n))
```

<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –î–∞—Ç–∞—Å–µ—Ç—ã —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –ø–æ—á–µ–º—É? ‚û° </summary>
–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.txt`, –∞ –Ω–µ `.csv`. –ï–≥–æ –Ω—É–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–∞–Ω–¥–æ–π `read_lines()` <br>
</details>

<details> <summary> üëÅ –û—à–∏–±–∫–∞: `...applied to an object of class "character"` ‚û° </summary>  
–°–∫–∞—á–∞–≤ —Ñ–∞–π–ª –í—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–µ–∫—Ç–æ—Ä —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏, –≥–¥–µ –∫–∞–∂–¥–∞—è —ç–ª–∏–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ -- —Å—Ç—Ä–æ–∫–∞ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è. –°–æ–∑–¥–∞–π—Ç–µ `tibble()`, —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã `tidyverse`.
<br>
</details>

<details> <summary> üëÅ –•–æ—Ä–æ—à–æ, `tibble()` —Å–æ–∑–¥–∞–Ω, —á—Ç–æ –¥–∞–ª—å—à–µ? ‚û° </summary>
–î–∞–ª—å—à–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ, –º—É–∂—Å–∫–∞—è –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ —Ä–∏—Ñ–º–∞, –∏–ª–∏ –∂–µ–Ω—Å–∫–∞—è.
<br>
</details>

<details> <summary> üëÅ –ê –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∞—è —Ä–∏—Ñ–º–∞? –ù—É–∂–Ω–æ —Å —Å–ª–æ–≤–∞—Ä–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å? ‚û° </summary>
–§–æ—Ä–º–∞–ª—å–Ω–æ –≥–æ–≤–æ—Ä—è, –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–∏—Ñ–º—É –º–æ–∂–Ω–æ –ø–æ –∫–æ—Å–≤–µ–Ω–Ω—ã–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º. –í—Å–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –Ω–∞–ø–∏—Å–∞–Ω–æ —á–µ—Ç—ã—Ä–µ—Ö—Å—Ç–æ–ø–Ω—ã–º —Ö–æ—Ä–µ–µ–º, –∑–Ω–∞—á–∏—Ç –≤ –Ω–µ–º –ª–∏–±–æ 7, –ª–∏–±–æ 8 —Å–ª–æ–≥–æ–≤. –ó–Ω–∞—á–∏—Ç, –ø–æ—Å—á–∏—Ç–∞–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≥–æ–≤, –º—ã –ø–æ–π–º–µ–º, –∫–∞–∫–∞—è –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ —Ä–∏—Ñ–º–∞.
<br>
</details>

<details> <summary> üëÅ –ê –∫–∞–∫ –ø–æ—Å—á–∏—Ç–∞—Ç—å –≥–ª–∞—Å–Ω—ã–µ?  ‚û° </summary>
–ù—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ... –≤—Ä–æ–¥–µ –±—ã —ç—Ç–æ —Ç–µ–º–∞ –Ω–∞—à–µ–≥–æ –∑–∞–Ω—è—Ç–∏—è...
<br>
</details>

<details> <summary> üëÅ –ì–ª–∞—Å–Ω—ã–µ –ø–æ—Å—á–∏—Ç–∞–Ω—ã. –ê —á—Ç–æ –¥–∞–ª—å—à–µ?   ‚û° </summary>
–ù—É —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –∫–∞–∫–∏—Ö –¥–ª–∏–Ω (–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–ª–æ–≥–æ–≤) –±—ã–≤–∞–µ—Ç –≤ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–∏. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `count()`.
<br>
</details>

<details> <summary> üëÅ –ê –ø–æ—á–µ–º—É —É –º–µ–Ω—è –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω—ã 0 —Å–ª–æ–≥–æ–≤   ‚û° </summary>
–ù—É, –≤–∏–¥–∏–º–æ, –≤ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–∏ –±—ã–ª–∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–æ—Ñ.
<br>
</details>

<details> <summary> üëÅ –ê –ø–æ—á–µ–º—É —É –º–µ–Ω—è –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω—ã 6 —Å–ª–æ–≥–æ–≤  ‚û° </summary>
–ù—É, –≤–∏–¥–∏–º–æ, –í—ã –Ω–∞–ø–∏—Å–∞–ª–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç, —á—Ç–æ –≥–ª–∞—Å–Ω—ã–µ –±—É–∫–≤—ã –º–æ–≥—É—Ç –±—ã—Ç—å –µ—â–µ –∏ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏, –∞ –∑–Ω–∞—á–∏—Ç –Ω–∞–ø–∏—Å–∞–Ω—ã —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã.
<br>
</details>
</details>


```{block, type = "rmdtask"}
–í —Ö–æ–¥–µ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —á–∞—â–µ –≤—Å–µ–≥–æ –±–æ—Ä–æ—Ç—å—Å—è —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç. –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `sex` –∏ `age` [—Ç–∞–∫–æ–π –≤–æ—Ç –Ω–µ—É–¥–∞—á–Ω–æ —Å–æ–±—Ä–∞–Ω–Ω–æ–π –∞–Ω–∫–µ—Ç—ã](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/mad_questionary.csv) –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≥—Ä–∞—Ñ–∏–∫:
```

![](images/mad_questionary_task.png)


```{r cache=TRUE, include=FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/mad_questionary.csv") %>% 
  mutate(sex = str_replace_all(sex, "^[–ñ–∂].*", "–∂–µ–Ω—Å–∫–∏–π"),
         sex = str_replace_all(sex, "^[–ú–º].*", "–º—É–∂—Å–∫–æ–π"),
         age = str_remove_all(age, " –ª–µ—Ç"),
         age = as.integer(age)) %>%
  ggplot(aes(age, fill = sex))+
  geom_dotplot(method = "histodot")+
  scale_y_continuous(NULL, breaks = NULL) # —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –æ—Å—å y
```

<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –ê —á—Ç–æ —ç—Ç–æ –∑–∞ `geom_...()`? ‚û° </summary>
–≠—Ç–æ [`geom_dotplot()`](https://agricolamz.github.io/DS_for_DH/viz-1.html#%D0%B4%D0%BE%D1%82%D0%BF%D0%BB%D0%BE%D1%82) —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º `method = "histodot"` –∏ —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Å—å—é y –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã `scale_y_continuous(NULL, breaks = NULL)` 
<br>
</details>

<details> <summary> üëÅ –ü–æ—á–µ–º—É –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Ä–∏—Å—É—Ç–µ—Å—è –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞? ‚û° </summary>
–ï—Å–ª–∏ –í—ã –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–ª–∏, –¥–æ–ª–∂–Ω–æ –ø–æ–º–æ—á—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π age –≤ —á–∏—Å–ª–æ–≤—É—é –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ as.integer(). 
<br>
</details>

</details>


## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞

–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ `cld2` (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π) –∏ `cld3` (–Ω–µ–π—Ä–æ—Å–µ—Ç—å).

```{r, cache=TRUE}
udhr_24 <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/article_24_from_UDHR.csv")
udhr_24
cld2::detect_language(udhr_24$article_text)
cld2::detect_language(udhr_24$article_text, lang_code = FALSE)
cld3::detect_language(udhr_24$article_text)
cld2::detect_language("–¢—ã –∂–µ–Ω–∞—Ç? –ì–æ–≤–æ—Ä–∏—Ç–µ –ª–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏?")
cld3::detect_language("–¢—ã –∂–µ–Ω–∞—Ç? –ì–æ–≤–æ—Ä–∏—Ç–µ –ª–∏ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏?")
cld2::detect_language("–í–∞—Ä–∫–∞–ª–æ—Å—å. –•–ª–∏–≤–∫–∏–µ —à–æ—Ä—å–∫–∏ –ø—ã—Ä—è–ª–∏—Å—å –ø–æ –Ω–∞–≤–µ, –∏ —Ö—Ä—é–∫–æ—Ç–∞–ª–∏ –∑–µ–ª—é–∫–∏, –∫–∞–∫ –º—é–º–∑–∏–∫–∏ –≤ –º–æ–≤–µ.")
cld3::detect_language("–í–∞—Ä–∫–∞–ª–æ—Å—å. –•–ª–∏–≤–∫–∏–µ —à–æ—Ä—å–∫–∏ –ø—ã—Ä—è–ª–∏—Å—å –ø–æ –Ω–∞–≤–µ, –∏ —Ö—Ä—é–∫–æ—Ç–∞–ª–∏ –∑–µ–ª—é–∫–∏, –∫–∞–∫ –º—é–º–∑–∏–∫–∏ –≤ –º–æ–≤–µ.")
cld2::detect_language("–í–∞—Ä—á–∏–ª–æ—Å—å‚Ä¶ –•–ª–∏–≤'—è–∑–∫—ñ —Ç—Ö—É—Ä–∫–∏ –≤–∏–∫—Ä—É–ª–∏, —Å–≤–µ—Ä–±—á–∏—Å—å –Ω–∞–≤–∫—Ä—É–∑—ñ, –∂–∞—Å—É–º–Ω–æ–≤—ñ–ª—ñ —Ö—É–¥–æ–∫–∏ –≥—Ä–∏–≤—ñ–ª–∏ –∑–µ—Ö—Ä—è–∫–∏ –≤ —á—É–∑—ñ.")
cld3::detect_language("–í–∞—Ä—á–∏–ª–æ—Å—å‚Ä¶ –•–ª–∏–≤'—è–∑–∫—ñ —Ç—Ö—É—Ä–∫–∏ –≤–∏–∫—Ä—É–ª–∏, —Å–≤–µ—Ä–±—á–∏—Å—å –Ω–∞–≤–∫—Ä—É–∑—ñ, –∂–∞—Å—É–º–Ω–æ–≤—ñ–ª—ñ —Ö—É–¥–æ–∫–∏ –≥—Ä–∏–≤—ñ–ª–∏ –∑–µ—Ö—Ä—è–∫–∏ –≤ —á—É–∑—ñ.")
cld2::detect_language_mixed("–ú–Ω–æ–≥–∏–µ –≤ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ OpenDataScience –∑–∞–Ω–∏–º–∞—é—Ç—Å—è state-of-the-art —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è: DL-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏, –±–∞–π–µ—Å–æ–≤—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –Ω–µ —Ç–æ–ª—å–∫–æ.")
cld3::detect_language_mixed("–ú–Ω–æ–≥–∏–µ –≤ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ OpenDataScience –∑–∞–Ω–∏–º–∞—é—Ç—Å—è state-of-the-art —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è: DL-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏, –±–∞–π–µ—Å–æ–≤—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –Ω–µ —Ç–æ–ª—å–∫–æ.")
```

## –†–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏
–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ (—Å–º. <code>?&grave;stringdist-metrics&grave;</code>), –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –î–∞–º–µ—Ä–∞—É ‚Äî –õ–µ–≤–µ–Ω—à—Ç–µ–π–Ω–∞. –î–∞–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥—Å—á–µ—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤ –¥—Ä—É–≥—É—é.

* –≤—Å—Ç–∞–≤–∫–∞ ab ‚Üí aNb
* —É–¥–∞–ª–µ–Ω–∏–µ aOb ‚Üí ab
* –∑–∞–º–µ–Ω–∞ —Å–∏–º–≤–æ–ª–∞ aOb ‚Üí aNb
* –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ ab ‚Üí ba

```{r}
library(stringdist)
stringdist("–∫–æ—Ä–æ–≤–∞","–∫–æ—Ä–æ–≤–∞")
stringdist("–∫–æ—Ä–æ–≤—ã", c("–∫—É—Ä–∏—Ü–∞", "–±—ã–∫", "—É—Ç–∫–∞", "–∫–æ—Ä–æ–≤–∞", "–æ—Å–µ–ª"))
amatch(c("–±—ã–∫–∏", "–∫–æ—Ä–æ–≤—ã"), c("–∫—É—Ä–∏—Ü–∞", "–±—ã–∫", "—É—Ç–∫–∞", "–∫–æ—Ä–æ–≤–∞", "–æ—Å–µ–ª"), maxDist = 2)
```


<!--chapter:end:04-strings.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---

# –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ {#lists}
```{r, message=FALSE}
library(tidyverse)
```

## –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–ø–∏—Å–∫–∏?
–ú—ã –æ–±—Å—É–∂–¥–∞–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ \@ref{list} —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö *—Å–ø–∏—Å–æ–∫*, –∏ –≤—Å–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Ö —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:

```{r}
x <- list(m = "a", n = c(2, 4), o = c("blue", "green", "red"))
x
x$m
x[1]
x[[2]]
x[[2]][2]
```

![](images/6.01_lists.png)

–°–ø–∏—Å–∫–∏ –≤–Ω–µ R –æ–±—ã—á–Ω–æ —Ö—Ä–∞–Ω—è—Ç –≤ —Ñ–∞–π–ª–∞—Ö —Ç–∏–ø–∞ `.json` (–ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏ –≥–æ–≤–æ—Ä—è—Ç —Å —É–¥–∞—Ä–µ–Ω–∏–µ–º –Ω–∞ –ø–µ—Ä–≤—ã–π —Å–ª–æ–≥, –∞ –≤–æ—Ç –ø–æ-—Ä—É—Å—Å–∫–∏ –ø—Ä–∏–∂–∏–ª—Å—è –≤–∞—Ä–∏–∞–Ω—Ç —Å —É–¥–∞—Ä–µ–Ω–∏–µ–º –Ω–∞ –≤—Ç–æ—Ä–æ–π —Å–ª–æ–≥: –¥–∂–µ–π—Å–æÃÅ–Ω) –∏–ª–∏ `.xml`.

### –ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ JSON –≤ —Å–ø–∏—Å–æ–∫ –∏ –æ–±—Ä–∞—Ç–Ω–æ
–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, –ø—Ä–æ `.json`, —ç—Ç–æ —Ç–æ, —á—Ç–æ —Ç–∞–º –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è:

* –ø–∞—Ä—ã –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ, –∑–∞–∫–ª—é—á–µ–Ω–Ω—ã–µ –≤ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ `{"–∫–ª—é—á":"–∑–Ω–∞—á–µ–Ω–∏–µ"}`
* —É–ø–æ—Ä—è–¥–æ—á–Ω—ã–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–Ω–∞—á–µ–Ω–∏–π, –∑–∞–∫–ª—é—á–µ–Ω–Ω—ã–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏ `["–∑–Ω–∞—á–µ–Ω–∏–µ_1","–∑–Ω–∞—á–µ–Ω–∏–µ_2",...]`
* –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å `.json` —Ñ–∞–π–ª–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ `jsonlite` (–Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ `tidyverse`). –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ —Å–∫–∞—á–∞–µ–º –¥–∞—Ç–∞—Å–µ—Ç 30 –≥–µ—Ä–æ–µ–≤ –ò–≥—Ä—ã –ø—Ä–µ—Å—Ç–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–π  –î–∂. –†. –†. –ú–∞—Ä—Ç–∏–Ω –¥–æ—Å—Ç–∞–ª —Å —Ä–µ—Å—É—Ä—Å–∞ [An API of Ice And Fire](https://anapioficeandfire.com/).

```{r}
got_chars <- jsonlite::read_json("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/got_chars.json")
got_chars[1]
```

–¢–∞–∫ –∫–∞–∫ `jsonlite` –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç –≤ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å `tidyverse`, —è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã `library(jsonlite)`, –∞ –æ–±—Ä–∞—â–∞—é—Å—å –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –ø–∞–∫–µ—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è `jsonlite::...()`. –ü–∞–∫–µ—Ç `jsonlite` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å `.json` —Ñ–∞–π–ª—ã –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `write_json()`:
```{r, eval=FALSE}
jsonlite::write_json(got_chars, "got_chars.json", auto_unbox = TRUE)
# –∞—Ä–≥—É–º–µ–Ω—Ç auto_unbox –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä—É—é –º—ã –≤–∏–¥–∏–º –≤ R
```

### –ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ `.xml` –≤ —Å–ø–∏—Å–æ–∫ –∏ –æ–±—Ä–∞—Ç–Ω–æ
–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, –ø—Ä–æ `.xml`, —ç—Ç–æ —Ç–æ, —á—Ç–æ —ç—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –¥–≤—É—Ö —Ç–µ–≥–æ–≤: –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–≥–æ `<...>` –∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–≥–æ `</...>`. 

```
<blablabla>Hello, world!</blablabla>
```

–ù–∞–±–æ—Ä —Å—É—â–Ω–æ—Å—Ç–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –∞ –≥–ª–∞–≤–Ω–æ–µ, –Ω–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π --- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ—á–∏–Ω—è—Ç—å —Å–≤–æ–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è `.xml`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —É —Å—É—â–Ω–æ—Å—Ç–µ–π, –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤–æ–∏ –∞—Ç—Ä–∏–±—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—á–∏—Å–ª—è—é—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–º —Ç–µ–≥–µ:

```
<ingredient amount="3" unit="—Å—Ç–∞–∫–∞–Ω">–ú—É–∫–∞</ingredient>
<ingredient amount="0.25" unit="–≥—Ä–∞–º–º">–î—Ä–æ–∂–∂–∏</ingredient>
<ingredient amount="1.5" unit="—Å—Ç–∞–∫–∞–Ω">–¢—ë–ø–ª–∞—è –≤–æ–¥–∞</ingredient>
```

–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å `.xml` —Ñ–∞–π–ª–∞ –æ—Å—É—â–µ—Ç—Å–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–π `read_xml()` –∏ `write_xml()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `xml2`:

```{r}
library("xml2")
xml_example <- read_xml('<body>
<ingredient amount="3" unit="—Å—Ç–∞–∫–∞–Ω">–ú—É–∫–∞</ingredient>
<ingredient amount="0.25" unit="–≥—Ä–∞–º–º">–î—Ä–æ–∂–∂–∏</ingredient>
<ingredient amount="1.5" unit="—Å—Ç–∞–∫–∞–Ω">–¢—ë–ø–ª–∞—è –≤–æ–¥–∞</ingredient>
</body>')
xml_example
```

```{r, eval = FALSE}
write_xml(xml_example, "path/to/the/file.xml")
```

–ß—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ç–µ–≥–æ–≤ –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ –≤ —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ 

```{r}
xml_example <- as_list(xml_example)
xml_example
```

–¢–µ–ø–µ—Ä—å –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–∫–æ–º:

```{r}
xml_example$body[[2]]
```

–ó–¥–µ—Å—å —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤–∞–∂–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ `.xml` –∏ `.json`, –∫–æ—Ç–æ—Ä–æ–µ –≤–∏–¥–Ω–æ –≤ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–º –ø—Ä–∏–º–µ—Ä–µ: –∞—Ç—Ä–∏–±—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–º —Ç–µ–≥–µ, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏ –≤ —Å–ø–∏—Å–æ–∫ –≤ R. –§—É–Ω–∫—Ü–∏—è `attributes()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π:

```{r}
xml_example$body[[2]] %>% 
  attributes()
```

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞—Ç—Ç—Ä–∏–±—É—Ç, —Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `attr()`:

```{r}
xml_example$body[[2]] %>% 
  attr("amount")
```

–¢–∞–∫–∂–µ –Ω–∞ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤–∏–¥–Ω–∞ —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `.xml`: –≤ –Ω–∞—à–µ–º —Å–ø–∏—Å–∫–µ –µ—Å—Ç—å —Ç—Ä–∏ —É–∑–ª–∞ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `ingredient`, —Ç–∞–∫ —á—Ç–æ —Ö–æ—Ç—å —ç—Ç–∏ —É–∑–ª—ã –∏ –∏–º–µ—é—Ç –∏–º—è, –∫ –Ω–∏–º –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω—É–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ –∏–Ω–¥–µ–∫—Å—É.

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–æ–≤ –≤ R 

–ü—Ä–æ—Å–º–æ—Ç–æ—Ä—â–∏–∫ —Å–ø–∏—Å–∫–æ–≤ –≤—Å—Ç—Ä–æ–µ–Ω –≤ RStudio. –ï–≥–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, –µ—Å–ª–∏ —Ç–∫–Ω—É—Ç—å –≤ –æ–±—ä–µ–∫—Ç –≤ R –∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `View(got_chars)`. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `jsonedit()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `listviewer`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —á—Ç–æ-—Ç–æ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã—è—Å–Ω–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `str()`.

```{r}
str(got_chars[1])
str(got_chars[1], max.level = 2)
str(xml_example)
```


## –ü–∞–∫–µ—Ç `purrr`

–í `tidyverse` –≤—Å—Ç—Ä–æ–µ–Ω –ø–∞–∫–µ—Ç `purrr`, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–µ–¥–∏ –ø—Ä–æ—á–µ–≥–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å–ø–∏—Å–∫–∞–º–∏. –°—É—â–µ—Å—Ç–≤—É–µ—Ç [cheat sheet –ø–æ `purrr`](https://github.com/rstudio/cheatsheets/raw/master/purrr.pdf).

### –§—É–Ω–∫—Ü–∏—è `map()` –∏ `map...()`
–ú–æ–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–ø–∏—Å–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏:

```{r}
got_chars %>% 
  map("name")
```

–ú–æ–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–ø–∏—Å–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–∞:

```{r}
got_chars %>% 
  map(3)
```

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å –æ —Ñ—É–Ω–∫—Ü–∏–∏ `unlist()`, –∫–æ—Ç–æ—Ä–∞—è "—É–±–∏–≤–∞–µ—Ç" –≤—Å–µ —Å–ª–æ–∂–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```{r}
got_chars %>% 
  map("name") %>% 
  unlist()
```

–î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤—Å–µ –≤ –≤–µ–∫—Ç–æ—Ä –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞:
```{r}
got_chars %>% 
  map_chr("name")
got_chars %>% 
  map_int("id")
got_chars %>% 
  map_lgl("alive")
```

–ú–æ–∂–Ω–æ –¥–∞–∂–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–∞—Ç–∞—Ñ—Ä–µ–π–º:
```{r}
got_chars %>% 
  tibble(name = map_chr(., "name"), # —Ç–æ—á–∫–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç, –≤ –∫–∞–∫–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –¥–æ–ª–∂–Ω–æ –≤—Å–µ –ø–∞–π–ø–∏—Ç—å—Å—è
         id = map_dbl(., "id"),
         alive = map_lgl(., "alive"))
```

–¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ–∫—Ç–æ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `enframe()`:

```{r}
got_chars %>% 
  map_chr("name") %>% 
  enframe()
```

```{block, type = "rmdtask"}
–°–∫–∞—á–∞–π—Ç–µ [—á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ [–®–∞—Ä–æ–≤, –õ—è—à–µ–≤—Å–∫–∞—è 2011]](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/freq_dict_2011.csv), —Ä–∞–∑–±–µ–π—Ç–µ —Å—Ç–æ–ª–±–µ—Ü `lemma` –Ω–∞ –±—É–∫–≤—ã –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `str_split(dict$lemma, "")`, –∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∞—Å—å –∫–∞–∫–∞—è –±—É–∫–≤–∞:
```

```{r, echo=FALSE, cache=TRUE, message=FALSE}
dict <- read_tsv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/freq_dict_2011.csv")

str_split(dict$lemma, "") %>% 
  unlist() %>%  
  enframe() %>% 
  mutate(value = str_to_lower(value)) %>% 
  filter(str_detect(value, "\\w")) %>% 
  count(value, sort = TRUE) %>% 
  ggplot(aes(fct_reorder(value, n), n, label = n))+
  geom_col()+
  coord_flip()+
  labs(x = "", y = "", caption = "–¥–∞–Ω–Ω—ã–µ –∏–∑ [–õ—è—à–µ–≤—Å–∫–∞—è, –®–∞—Ä–æ–≤ 2011]")
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ `map()` –∏ `attr_getter()` —á—Ç–æ–±—ã –¥–æ—Å—Ç–∞–≤–∞—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ç—Ä–∏–±—É—Ç–æ–≤:

```{r}
xml_example$body %>% 
  map(attr_getter("amount"))
```


### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤

–ï—Å–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –µ—Å—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç —Ç–∞–∫ –º—ã –æ—Å—Ç–∞–≤–∏–º —Ç–æ–ª—å–∫–æ –∂–∏–≤—ã—Ö –≥–µ—Ä–æ–µ–≤:
```{r}
got_chars %>% 
  keep("alive") %>% 
  map_chr("name")
```

![](images/6.02_keep.png)

–ê —Ç–∞–∫ -- —Ç–æ–ª—å–∫–æ –º–µ—Ä—Ç–≤—ã—Ö:
```{r}
got_chars %>% 
  discard("alive") %>% 
  map_chr("name")
```

![](images/6.03_discard.png)

–¢–∞–∫–∂–µ –µ—Å—Ç—å –æ—Å–æ–±—ã–π —Ñ–∏–ª—å—Ç—Ä `head_while()` –∏ `tail_while()`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–µ–ª—è–µ—Ç –µ–¥–∏–Ω–∏—Ü—ã (—Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞) –¥–æ –ø–µ—Ä–≤–æ–≥–æ `FALSE`.

```{r}
got_chars %>% 
  head_while("alive") %>% 
  map_chr("name")

got_chars %>% 
  tail_while("alive") %>% 
  map_chr("name")
```

![](images/6.04_head_while.png)

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –≤–∑–≥–ª—è–Ω–∏—Ç–µ –Ω–∞ –Ω–∞—à—É —Ç–∞–±–ª–∏—Ü—É:
```{r}
got_chars %>% 
  tibble(name = map_chr(., "name"), # —Ç–æ—á–∫–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç, –≤ –∫–∞–∫–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –¥–æ–ª–∂–Ω–æ –≤—Å–µ –ø–∞–π–ø–∏—Ç—å—Å—è
         alive = map_lgl(., "alive"))
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:

```{r}
my_l <- list(a = 1:3, b = c("a", "b"), c = list("z", c(8, 9)))
my_l
```

–ö–∞–∫ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å –≤—ã—à–µ, —Ñ—É–Ω–∫—Ü–∏—è `unlist()` –ª–∏–Ω–µ–∞—Ä–∏–∑—É–µ—Ç —Å–ø–∏—Å–∫–∏, –ø—Ä–µ–≤—Ä–∞—â–∞—è –∏—Ö –≤ –≤–µ–∫—Ç–æ—Ä—ã:

```{r}
my_l %>% 
  unlist()
```

–ü–æ–ª—É—á–∏–ª—Å—è –ø–æ–∏–º–µ–Ω–Ω–æ–≤–∞–Ω–Ω—ã–π –≤–µ–∫—Ç–æ—Ä, –µ—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –º–æ–∂–Ω–æ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∏ –∏–º–µ–Ω–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `unname()`:

```{r}
my_l %>% 
  unlist() %>% 
  unname()
```

–§—É–Ω–∫—Ü–∏—è `flatten` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å **–ª–∏—à—å –æ–¥–∏–Ω, –≤–µ—Ä—Ö–Ω–∏–π,**, —É—Ä–æ–≤–µ–Ω—å –∏–µ—Ä–∞—Ä—Ö–∏–∏:
```{r}
my_l %>% 
  flatten()
```

![](images/6.05_flatten.png)

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ `my_l` –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –≤ —Ç—Ä–∏ –ø–µ—Ä–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞, –∞ –≤–æ—Ç –ø–æ–¥—Å–ø–∏—Å–æ–∫ `c = list("z", c(8, 9))` –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –≤ —ç–ª–µ–º–µ–Ω—Ç `z` –∏ –≤–µ–∫—Ç–æ—Ä `c(8, 9)`.

–°—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ `append()` –∏ `prepend()`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ (–∏–ª–∏ –¥–æ) —Å—Ç–∞—Ä–æ–≥–æ:

```{r}
list(c(1, 2), c("a", "b", "c")) %>% 
  append(list(new = c(TRUE, FALSE)))
list(c(1, 2), c("a", "b", "c")) %>% 
  prepend(list(new = c(TRUE, FALSE)))
```

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ `cross()` –∏ `cross2()`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—É—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –¥–≤—É—Ö —Å–ø–∏—Å–∫–æ–≤:
```{r}
list(c("a", "b"), 1:3) %>% 
  cross() %>% 
  str()

list("a", "b") %>% 
  cross2(1:3) %>% 
  str()
```

```{block, type = "rmdtask"}
[–°–∫–∞—á–∞–π—Ç–µ –ø—å–µ—Å—É "–†–µ–≤–∏–∑–æ—Ä"](https://raw.githubusercontent.com/dracor-org/rusdracor/master/tei/gogol-revizor.xml), —Ä–∞–∑–º–µ—á–µ–Ω–Ω—É—é –≤ [TEI —Ñ–æ—Ä–º–∞—Ç–µ](https://tei-c.org/Guidelines/P5/) –∏ –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∏–∂–µ –≥—Ä–∞—Ñ–∏–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –ü—Ä–µ–≤—Ä–∞—Ç–∏–≤ –¥–∞–Ω–Ω—ã–µ –≤ —Å–ø–∏—Å–æ–∫, –ª—É—á—à–µ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `revizor\$TEI\$text\$body`:
```

```{r cache=TRUE, echo=FALSE}
library(tidyverse)
library(xml2)
revizor <- read_xml("https://raw.githubusercontent.com/dracor-org/rusdracor/master/tei/gogol-revizor.xml")
revizor <- as_list(revizor)

revizor$TEI$text$body %>% 
  flatten() %>% 
  flatten() %>% 
  map(attr_getter("who")) %>% 
  unlist() %>% 
  str_split(" ") %>% 
  unlist() %>% 
  enframe() %>% 
  count(value, sort = TRUE) %>% 
  ggplot(aes(fct_reorder(value, n), n))+
  geom_col()+
  coord_flip()+
  labs(x = "", y = "", caption = "–¥–∞–Ω–Ω—ã–µ –∏–∑ RusDraCor", 
       title = '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –≤ "–†–µ–≤–∏–∑–æ—Ä–µ" –ù. –ì–æ–≥–æ–ª—è')
```

<!--chapter:end:05-purrr.Rmd-->

---
bibliography: bibliography.bib
editor_options:
  chunk_output_type: console
---

```{r, include=FALSE}
knitr::opts_chunk$set(comment = NA)
```
  
# –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: `rmarkdown` {#data_presentation}

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∞–∂–Ω–æ–π —á–∞—Å—Ç—å—é —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ —è–≤–ª—è–µ—Ç—Å—è –∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç—ã: `rmarkdown`, `flexdashboard` –∏ `shiny`. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–Ω–∏–∂–∫—É [@xie19](https://bookdown.org/yihui/rmarkdown/) –∏–ª–∏ [cheatsheet](https://rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf).

## `rmarkdown`

`rmarkdown` -- —ç—Ç–æ –ø–∞–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω—è—Ç—å R –∫–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π –∫–æ–¥, —á—Ç–æ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å:
* –¥–æ–∫—É–º—É–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.html`, `.pdf` (–∏—Å–ø–æ–ª—å–∑—É—è \LaTeX, –º—ã –ø–æ—á—Ç–∏ –Ω–µ –±—É–¥–µ–º —ç—Ç–æ –æ–±—Å—É–∂–¥–∞—Ç—å), `.docx`
* –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.html`, `.pdf` (–∏—Å–ø–æ–ª—å–∑—É—è \LaTeX –ø–∞–∫–µ—Ç `beamer`) `.pptx`-–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
* –Ω–∞–±–æ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö `.html` –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–∞–π—Ç –∏–ª–∏ –∫–Ω–∏–≥–∞)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–ö–∞–∫ –∏ –≤—Å–µ –ø–∞–∫–µ—Ç—ã `rmarkdown` –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ CRAN
```{r, eval = FALSE}
install.packages("rmarkdown")
```

### –°–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ `rmarkdown`-–¥–æ–∫—É–º–µ–Ω—Ç–∞

* [yaml](https://en.wikipedia.org/wiki/YAML) —à–∞–ø–∫–∞ (—Ñ–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤–Ω–∞)
* –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç —Å [markdown](https://en.wikipedia.org/wiki/Markdown) —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ [Pandoc](https://en.wikipedia.org/wiki/Pandoc))
* –±–ª–æ–∫–∏ –∫–æ–¥–∞ (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ —è–∑—ã–∫–µ R), –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–µ —Å –¥–≤—É—Ö —Å—Ç–æ—Ä–æ–Ω —Ç—Ä–æ–π–Ω—ã–º –±—ç–∫—Ç–∏–∫–æ–º ``` (—É –º–µ–Ω—è –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ —ç—Ç–æ—Ç –∑–Ω–∞–∫ –Ω–∞ –±—É–∫–≤–µ —ë).

### –ü—Ä–∏–º–µ—Ä `rmarkdown`-–¥–æ–∫—É–º–µ–Ω—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .Rmd –≤ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –ø–∞–ø–∫–µ (–≤ RStudio, —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å `File > New file > R Markdown`). –°–∫–æ–º–ø–µ–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:
```{r, eval=FALSE}
rmarkdown::render("–≤–∞—à_—Ñ–∞–π–ª.Rmd")
```

–∏–ª–∏ –∫–Ω–æ–ø–∫–æ–π ![](images/7.01_knit.png). –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞:

```{bash, echo = FALSE}
cat ./rmd_examples/ex_01.Rmd
```

[–†–µ–∑—É–ª—å—Ç–∞—Ç](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/rmd_examples/ex_01.html).

```{block, type = "rmdtask"}
–°–æ–∑–¥–∞–π—Ç–µ –∏ —Å–∫–æ–º–ø–µ–ª–∏—Ä—É–π—Ç–µ —Å–≤–æ–π `rmarkdown`-–¥–æ–∫—É–º–µ–Ω—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, —Ç–µ–∫—Å—Ç–æ–º –∏ –∫–æ–¥–æ–º.
```

### `Markdown`

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã —è–∑—ã–∫ —Ä–∞–∑–º–µ—Ç–∫–∏, —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –º–Ω–æ–≥–∏—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–Ω-–ª–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏

```
## –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É—Ä–æ–≤–Ω—è 2
#### –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É—Ä–æ–≤–Ω—è 4
```

#### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
_–∏—Ç–∞–ª–∏–∫_ –∏–ª–∏ *–¥—Ä—É–≥–æ–π –∏—Ç–∞–ª–∏–∫*

__–∂–∏—Ä–Ω—ã–π__ –∏–ª–∏ **–¥—Ä—É–≥–æ–π –∂–∏—Ä–Ω—ã–π**

~~–∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ~~
```
_–∏—Ç–∞–ª–∏–∫_ –∏–ª–∏ *–¥—Ä—É–≥–æ–π –∏—Ç–∞–ª–∏–∫*

__–∂–∏—Ä–Ω—ã–π__ –∏–ª–∏ **–¥—Ä—É–≥–æ–π –∂–∏—Ä–Ω—ã–π**

~~–∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ~~

#### –°–ø–∏—Å–∫–∏
```
* –∫—Ä–æ–ª–∏–∫
* –∑–∞—è—Ü
    * –∑–∞—è—Ü —Å–µ—Ä—ã–π

1. –º–∞—à–∏–Ω—ã
    1. –∞–≤—Ç–æ–±—É—Å
2. —Å–∞–º–æ–ª–µ—Ç—ã

+ –º–æ–∂–Ω–æ –µ—â–µ —Å—Ç–∞–≤–∏—Ç—å –ø–ª—é—Å
- –∏ –º–∏–Ω—É—Å
```
* –∫—Ä–æ–ª–∏–∫
* –∑–∞—è—Ü
    * –∑–∞—è—Ü —Å–µ—Ä—ã–π

1. –º–∞—à–∏–Ω—ã
    1. –∞–≤—Ç–æ–±—É—Å
2. —Å–∞–º–æ–ª–µ—Ç—ã

+ –º–æ–∂–Ω–æ –µ—â–µ —Å—Ç–∞–≤–∏—Ç—å –ø–ª—é—Å
- –∏ –º–∏–Ω—É—Å

#### –°—Å—ã–ª–∫–∏ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏
```
[–°—Å—ã–ª–∫–∞ 1](https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html)

<https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html>

[–ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –ø–æ—Ç–æ–º, –∞ –ø–æ–∫–∞ –æ—Ç—Å–∞–≤–∏—Ç—å –º–µ—Ç–∫—É][1]

–ò–ª–∏ –¥–∞–∂–µ –ø—Ä–æ—Å—Ç–æ –≥–æ–ª—É—é [–º–µ—Ç–∫—É].

![](https://raw.githubusercontent.com/agricolamz/2018_ANDAN_course_winter/master/rmarkdown.png)

–û–ø—è—Ç—å –∂–µ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –º–µ—Ç–∫—É ![][2]

[1]: https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html
[–º–µ—Ç–∫—É]: https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html
[2]: https://raw.githubusercontent.com/agricolamz/2018_ANDAN_course_winter/master/rmarkdown.png
```
[–°—Å—ã–ª–∫–∞ 1](https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html)

<https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html>

[–ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –ø–æ—Ç–æ–º, –∞ –ø–æ–∫–∞ –æ—Ç—Å–∞–≤–∏—Ç—å –º–µ—Ç–∫—É][1]

–ò–ª–∏ –¥–∞–∂–µ –ø—Ä–æ—Å—Ç–æ –≥–æ–ª—É—é [–º–µ—Ç–∫—É].

![](https://raw.githubusercontent.com/agricolamz/2018_ANDAN_course_winter/master/rmarkdown.png)

–û–ø—è—Ç—å –∂–µ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –º–µ—Ç–∫—É ![][2]

[1]: https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html
[–º–µ—Ç–∫—É]: https://agricolamz.github.io/2018_ANDAN_course_winter/2_ex.html
[2]: https://raw.githubusercontent.com/agricolamz/2018_ANDAN_course_winter/master/rmarkdown.png

#### –ö–æ–¥

```
–ö–æ–¥ –Ω—É–∂–Ω–æ –æ—Ñ–æ—Ä–º–∞–ª—è—Ç—å –≤–æ—Ç —Ç–∞–∫ `rmarkdown::render()`
```
–ö–æ–¥ –Ω—É–∂–Ω–æ –æ—Ñ–æ—Ä–º–∞–ª—è—Ç—å –≤–æ—Ç —Ç–∞–∫ `rmarkdown::render()`

```{bash, echo = FALSE}
cat ./rmd_examples/ex_02.Rmd
```

```{python}
collection = ['hey', 5, 'd']
for x in collection:
    print(x)
```

–ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞ –≤ —Ç–µ–∫—Å—Ç–µ, –Ω—É–∂–Ω–æ –≤ –Ω–∞—á–∞–ª–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ 

–§–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –Ω–æ —Ç–æ–≥–¥–∞ RStudio –ø–æ–¥—Å–≤–µ—Ç–∏—Ç.

#### –¶–∏—Ç–∞—Ç—ã
```
> –¶–∏—Ç–∞—Ç—ã –Ω—É–∂–Ω–æ –æ—Ñ—Ä–º–ª—è—Ç—å —Ç–∞–∫.
> –≠—Ç–æ –ø–æ–ø–∞–¥–µ—Ç –≤ —Ç–æ—Ç –∂–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç.

> –ê –≤–æ—Ç —Ç—É—Ç –ø—Ä–æ–∏–∑–æ—à–µ–ª —Ä–∞–∑—Ä—ã–≤. –ö—Å—Ç–∞—Ç–∏, –∑–¥–µ—Å—å —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *markdown*.
```

> –¶–∏—Ç–∞—Ç—ã –Ω—É–∂–Ω–æ –æ—Ñ—Ä–º–ª—è—Ç—å —Ç–∞–∫.
> –≠—Ç–æ –ø–æ–ø–∞–¥–µ—Ç –≤ —Ç–æ—Ç –∂–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç.

> –ê –≤–æ—Ç —Ç—É—Ç –ø—Ä–æ–∏–∑–æ—à–µ–ª —Ä–∞–∑—Ä—ã–≤. –ö—Å—Ç–∞—Ç–∏, –∑–¥–µ—Å—å —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *markdown*.


#### –†–∞–∑—Ä—ã–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
***
```

***

#### HTML
```
<dl>
  <dt>–ß–∏—Å—Ç—ã–π HTML</dt>
  <dd>–ï—â–µ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ HTML.</dd>

  <dt>–∏ Markdown –≤  HTML </dt>
  <dd> –¥–∞–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç **–ø—Ä–∞–≤–∏–ª—å–Ω–æ**. –ù–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ <em>—Ç–µ–≥–∏</em>.</dd>
</dl>
```
<dl>
  <dt>–ß–∏—Å—Ç—ã–π HTML</dt>
  <dd>–ï—â–µ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ HTML.</dd>

  <dt>–∏ Markdown –≤  HTML </dt>
  <dd> –¥–∞–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç **–ø—Ä–∞–≤–∏–ª—å–Ω–æ**. –ù–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ <em>—Ç–µ–≥–∏</em>.</dd>
</dl>

#### –¢–∞–±–ª–∏—Ü—ã
–ï—â–µ –µ—Å—Ç—å —Ü–µ–ª–∞—è –Ω–∞—É–∫–∞ –∫–∞–∫ –¥–µ–ª–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ Markdown, –Ω–æ —è –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–æ–Ω-–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä](http://www.tablesgenerator.com/markdown_tables).

### `Pandoc`
[`Pandoc`](https://pandoc.org/) —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞, —Å–æ–∑–¥–∞–Ω–Ω–∞—è [–î–∂. –ú–∞–∫–§–∞—Ä–ª—ç–π–Ω–æ–º (J. MacFarlane)](johnmacfarlane.net), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤ –¥—Ä—É–≥–∏–µ, –∞ —Ç–∞–∫–∂–µ —Å–º–µ—à–∏–≤–∞—Ç—å –∏—Ö. –Ø –ø–æ–∫–æ–∂—É –ª–∏—à—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.

#### –í–µ—Ä—Ö–Ω–∏–µ –∏ –Ω–∏–∂–Ω–∏–µ –∏–Ω–¥–µ–∫—Å—ã
```
2^10^ C~n~^k^
```
2^10^ C~n~^k^

#### –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
```
(@) –°–ª–∞–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä —Ä–∞–∑.
(@) –°–ª–∞–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä –¥–≤–∞.
(@three) –°–ª–∞–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä —Ç—Ä–∏, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å *–∏–º—è*.

–Ø –º–æ–≥—É —Å–æ—Å–ª–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–º–µ—Ä (@three)!
```
(@) –°–ª–∞–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä —Ä–∞–∑.
(@) –°–ª–∞–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä –¥–≤–∞.
(@three) –°–ª–∞–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–æ–º–µ—Ä —Ç—Ä–∏, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å *–∏–º—è*.

–Ø –º–æ–≥—É —Å–æ—Å–ª–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–º–µ—Ä (@three)!

#### –°–Ω–æ—Å–∫–∏
```
–í–æ—Ç –∏ —Å–Ω–æ—Å–∫–∞[^1]

[^1]: –°–Ω–æ—Å–∫–∞, —Å–Ω–æ—Å–∫–∞, —Å–Ω–æ—Å–∫–∞.
```
–í–æ—Ç –∏ —Å–Ω–æ—Å–∫–∞[^1]

[^1]: –°–Ω–æ—Å–∫–∞, —Å–Ω–æ—Å–∫–∞, —Å–Ω–æ—Å–∫–∞.

#### –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞: $\LaTeX$
```
$\LaTeX$  –∫–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–µ–∫—Å—Ç–µ $\frac{\pi}{\sum{n+1}}$ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ—á–∫–æ–π:

$$\frac{\pi}{\sum{n+1}}$$
```
$\LaTeX$  –∫–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–µ–∫—Å—Ç–µ $\frac{\pi}{\sum{n+1}}$ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ—á–∫–æ–π:

$$\frac{\pi}{\sum{n+1}}$$

### Code chunks

–§—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ–¥–∞ –∏–º–µ—é—Ç —Å–≤–æ–∏ –Ω–∞–±–æ—Ä—ã —Å–≤–æ–π—Å—Ç–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö.

#### –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

```{bash, echo = FALSE}
cat ./rmd_examples/ex_03.Rmd
```

```{r}
summary(cars)
```

```{python}
x = "my string"
print(x.split(" "))
```

#### –ü–æ—è–≤–ª–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞

```{bash, echo = FALSE}
cat ./rmd_examples/ex_04.Rmd
```

#### –î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ [–º–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤](https://yihui.name/knitr/options/#chunk_options), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö –≤ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∫–æ–¥–∞, –≤–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö:

* `error`: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –æ—à–∏–±–∫–∏.
* `warning`: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
* `message`: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–æ–≤).
* `comment`: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞ –ø—Ä–µ–¥–≤–∞—Ä—è–µ—Ç—Å—è –∑–Ω–∞–∫–æ–º `##`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `NA`, —á—Ç–æ–±—ã –∏—Ö –Ω–µ –±—ã–ª–æ, –∏–ª–∏ –ª—é–±—É—é –¥—Ä—É–≥—É—é —Å—Ç—Ä–æ–∫—É.
* `cache`: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –∫–æ–¥–∞. –û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∫–∞–∫–∏–µ-—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∑–∞–Ω–∏–º–∞—é—â–∞—è –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –°–æ—Ö—Ä–∞–Ω–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è, –Ω–∞ –ø–µ—Ä–µ—Å—á–µ—Ç, –ø—Ä–∏ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
* `fig.width`, `fig.height` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, 7)

–í—Å–µ —ç—Ç–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `knitr::opts_chunk$set(...)`: 

#### Pets or livestock?
–í RMarkdown –∫–∞–∂–¥–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É –∫–æ–¥–∞ –º–æ–∂–Ω–æ –¥–∞—Ç—å –∏–º—è (–Ω–æ –∏–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Ç–æ—á–µ–∫):
```{bash, echo = FALSE}
cat ./rmd_examples/ex_06.Rmd
```

Ma√´lle Salmon –Ω–∞–ø–∏—Å–∞–ª [–æ—Ç–ª–∏—á–Ω—ã–π –ø–æ—Å—Ç](http://www.masalmon.eu/2017/08/08/chunkpets/), –ø–æ—á–µ–º—É –ø–æ–ª–µ–∑–Ω–æ –∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ–¥–∞:

* –ø—Ä–æ—â–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è
* –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π
* –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∫–æ–º–ø–µ–ª—è—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–º—è, –∞ –Ω–µ –Ω–æ–º–µ—Ä
* –µ—Å–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫—ç—à–∏—Ä–æ–≤–∞–ª—Å—è, —Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –Ω–∏–º, –Ω–µ –∑–∞—Å—Ç–∞–≤–∏—Ç –≤—Å–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è
* –≤ `blogdown` –º–æ–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è

### YAML —à–∞–ø–∫–∞
–§–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤–Ω–∞—è YAML —à–∞–ø–∫–∞ –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π.

```
---
title: "–ú–æ–π RMarkdown"
author: –°–ª–∞–≤–Ω—ã–π –ê–≤—Ç–æ—Ä
date: 20 –Ω–æ—è–±—Ä—è 2019
---
```

#### –¢–∏–ø –ø–æ–ª—É—á–∏–≤—à–µ–≥–æ—Å—è —Ñ–∞–π–ª–∞

* `output: html_document` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
* `output: word_document`
* `output: pdf_document` (–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —Å $\LaTeX$–æ–º –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)
* `output: ioslides_presentation`
* `output: slidy_presentation`
* `output: slidy_presentation`
* `output: beamer_presentation`

–∏ –¥—Ä.

#### –ë–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—è
–°—É—â–µ—Å—Ç–≤—É–µ—Ç [–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–ø–æ—Å–æ–±–æ–≤](http://rmarkdown.rstudio.com/authoring_pandoc_markdown.html#citations) –≤—Å—Ç–∞–≤–ª—è—Ç—å –±–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—é –≤ RMarkdown. –Ø —Ä–∞—Å–∫–∞–∂—É, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç `Bibtex` (–∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–π –¥–ª—è $\LaTeX$). –î–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —Ä–∞—à–∏—Ä–µ–Ω–∏–µ–º .bib, –≤ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è (–±–∏–±–ª–∏–æ–≥—Ä–∞—Ñ–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ `BibTeX` –≤—ã–¥–∞–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä,  [GoogleScholar](https://scholar.google.ru)):

```{bash, echo = FALSE}
cat ./rmd_examples/bibliography.bib
```

–ù–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å —Ä–∞—à–∏—Ä–µ–Ω–∏–µ–º .bib –≤ YAML —à–∞–ø–∫—É:

```
---
bibliography: bibliography.bib
---
```
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Å–ª—ã–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ 
```
–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ @gordon02 —Ä–∞—Å–∫—Ä—ã–ª...
```
–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ @gordon02 —Ä–∞—Å–∫—Ä—ã–ª...
```
–û–± —ç—Ç–æ–º –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ [@ladefoged96; @gordon02], –Ω–æ ...
```
–û–± —ç—Ç–æ–º –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ [@ladefoged96; @gordon02], –Ω–æ ...
```
–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ [@gordon02] —Ä–∞—Å–∫—Ä—ã–ª...
```
–í —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–µ [@gordon02] —Ä–∞—Å–∫—Ä—ã–ª...
```
–û–± —ç—Ç–æ–º –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ [—Å–º. @gordon02, —Å. 33--35; –∞ —Ç–∞–∫–∂–µ @ladefoged96, –≥–ª. 1]...
```
–û–± —ç—Ç–æ–º –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ [—Å–º. @gordon02, —Å. 33--35; –∞ —Ç–∞–∫–∂–µ @ladefoged96, –≥–ª. 1]...

–°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ.

#### –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä.
–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –æ—Ç–≤–µ—á–∞—é—â–∏—Ö –∑–∞ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ.

* `toc` –≤—Å—Ç–∞–≤–ª—è—Ç—å –ª–∏ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ
* `toc_depth`  –≥–ª—É–±–∏–Ω–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏, –∫–æ—Ç–æ—Ä—É—é –æ—Ç—Ä–∞–∂–∞—Ç—å –≤ –æ–≥–ª–æ–≤–ª–µ–Ω–∏–∏
* `toc_float`  –¥–æ–ª–∂–Ω–æ –ª–∏ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ –≤—Ä–µ–º—è —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ —Ç–µ–∫—Å—Ç–æ–º
* `collapsed`  –¥–æ–ª–∂–Ω–æ –ª–∏ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –±—ã—Ç—å –≤—Å–µ –≤—Ä–µ–º—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞—Å–∫—Ä—ã—Ç–æ
* `collapsed`  –¥–æ–ª–∂–Ω–æ –ª–∏ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –±—ã—Ç—å –≤—Å–µ –≤—Ä–µ–º—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞—Å–∫—Ä—ã—Ç–æ
* `number_sections` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ü–∏–π
* `code_folding` (hide) --- –¥–µ–ª–∞—Ç—å –ª–∏ –∫–Ω–æ–ø–æ—á–∫—É, –ø–æ–∫–∞–∑—ã–≤–∞—é—â—É—é/—Å–∫—Ä—ã–≤–∞—é—â—É—é –≤–µ—Å—å –∫–æ–¥
* `theme` –æ–¥–Ω–∞ –∏–∑ [Bootstrap —Ç–µ–º](https://bootswatch.com/)
* `highlight`: "default", "tango", "pygments", "kate", "monochrome", "espresso", "zenburn", "haddock" –∏–ª–∏ "textmate"

```
---
html_document:
    theme: spacelab
    highlight: pygments
    toc: yes
    toc_position: right
    toc_depth: 3
    toc_float: yes
    smooth_scroll: false
---
```

#### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–æ–≤

* `df_print: default`
* `df_print: kable`
* `df_print: tibble`
* `df_print: paged`

```
---
output:
  html_document:
    df_print: paged
---
```

### –ì–¥–µ —Ö–æ—Å—Ç–∏—Ç—å `.html`?

–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ `.html` –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ:

* –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ –≤–∞—à–µ–º —Ö–æ—Å—Ç–µ

* –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–∫–µ Rpubs

![](images/7.02_publish_rpubs.png)

* –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞ –≥–∏—Ç—Ö–∞–±–µ –∏ –≤–∫–ª—é—á–∏—Ç—å Github Pages

```{block, type = "rmdtask"}
–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç index.Rmd, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–¥ –Ω–∞ R –∏ –Ω–∞ Python, –≤—Å—Ç–∞–≤—å—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫—É, —Å–Ω–æ—Å–∫—É, —Å—Å—ã–ª–∫—É –Ω–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—É, —Ç–∞–±–ª–∏—Ü—É –∏ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ. –°–∫–æ–º–ø–µ–ª–∏—Ä—É–π—Ç–µ `.html` –¥–æ–∫—É–º–µ–Ω—Ç –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –µ–≥–æ –Ω–∞ Github, –ø—Ä–æ–π–¥—è [–ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ](https://classroom.github.com/a/ypZeK32c). C–¥–µ–ª–∞–π—Ç–µ Github Pages –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `README.md` —Ñ–∞–π–ª.
```

## –ë—ã–≤–∞—é—Ç –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

* [`flexdashboard`](https://rmarkdown.rstudio.com/flexdashboard/examples.html) -- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥—ç—à–±–æ—Ä–¥—ã
* [`shiny`](https://shiny.rstudio.com/gallery/) -- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–∞–π—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
* [`posterdown`](https://brentthorne.github.io/posterdown_html_showcase/) -- –ø–æ—Å—Ç–µ—Ä—ã –≤ RMarkdown
* [`pagedown`](https://pagedown.rbind.io/) -- —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–æ–≤: –¥–ª—è –∫–Ω–∏–≥–∏, —Å—Ç–∞—Ç—å–∏, –ø–æ—Å—Ç–µ—Ä–∞, —Ä–µ–∑—é–º–µ, –≤–∏–∑–∏—Ç–∫–∏... –¥–∞ —Ö–æ—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ —Å–≤–∞–¥—å–±—É –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å.

<!--chapter:end:06-markdown.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Ö –≤ `tidyverse` {#functions}

```{r, message=FALSE, warning=FALSE}
library(tidyverse)
```

## –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

–õ–æ–≥–∏—á–µ—Å–∫–æ–µ "–∏":
```{r, echo = FALSE}
tibble(`&` = c(TRUE, FALSE, TRUE, FALSE),
       v2 = c(TRUE, FALSE, FALSE, TRUE),
       v3 = `&` & v2) %>% 
  pivot_wider(names_from = v2, values_from = v3) %>% 
  knitr::kable()
```
```{r}
TRUE & TRUE
TRUE & FALSE
```

–õ–æ–≥–∏—á–µ—Å–∫–æ–µ "–∏–ª–∏":
```{r, echo = FALSE}
tibble(`|` = c(TRUE, FALSE, TRUE, FALSE),
       v2 = c(TRUE, FALSE, FALSE, TRUE),
       v3 = `|` | v2) %>% 
  pivot_wider(names_from = v2, values_from = v3) %>% 
  knitr::kable()
```
```{r}
TRUE | TRUE
TRUE | FALSE
```

–õ–æ–≥–∏—á–µ—Å–∫–æ–µ "–Ω–µ":
```{r}
!TRUE
```

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:
```{r}
2 == 2
2 == 3
2 != 3
2 != c(2, 3)
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `function()`. –ï–µ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```{r}
n_syllables <- function(x){
  str_count(x, "[–ê–û–£–Å–ï–≠–Ø–ò–Æ–∞–æ—É—ë–µ—ç—è–∏—é]")
}

n_syllables("–∫–æ—Ä–æ–≤–∞")
n_syllables("—Å–ª–æ–Ω")
```

–í–æ–æ–±—â–µ, —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–º–Ω–æ–≥–æ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤, —Ç–∞–∫ —á—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –ª–∏–±–æ —ç–∫—Å–ø–ª–∏—Ü–∏—Ç–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –±–∏–ª–∏–æ—Ç–µ–∫—É –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∏–ª–∏ –∂–µ –≥–æ–≤–æ—Ä–∏—Ç—å, –∏–∑ –∫–∞–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ñ—É–Ω–∫—Ü–∏—è:

```{r}
n_syllables <- function(x){
  stringr::str_count(x, "[–ê–û–£–Å–ï–≠–Ø–ò–Æ–∞–æ—É—ë–µ—ç—è–∏—é]")
}
```

–§—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è —Å–∞–º–æ–π (—Ä–µ–∫—É—Ä—Å–∏—è), –≤–æ—Ç —Ç–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å—á–∏—Ç–∞–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª:

```{r}
factorial <- function(x){
  if(x-1 > 0){
    x*factorial(x-1)
  } else {
    1
  }
}

factorial(3)
factorial(4)
factorial(8)
factorial(0)
```

```{block, type = "rmdtask"}
–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å, –∫–∞–∫–æ–µ —Å–ª–æ–≤–æ –¥–ª–∏–Ω–Ω–µ–µ:
```

```{r, echo = FALSE}
which_is_longer <- function(x, y){
  if(nchar(x) > nchar(y)){
    x
  } else {
    y
  }
}
```

```{r}
which_is_longer("—Ä–æ–∑–∞", "—Ü–≤–µ—Ç–æ–∫")
which_is_longer("–æ–ª–µ–Ω—å", "–∂–∏–≤–æ—Ç–Ω–æ–µ")
which_is_longer("–≤–æ—Ä–æ–±–µ–π", "–ø—Ç–∏—Ü–∞")
```


## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –≤ tidyverse

### –£—Å–ª–æ–≤–∏—è –≤ —Å—Ç—Ä–æ—á–∫–∞—Ö

–ú—ã —É–∂–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ [—Å—Ç–∞—Ç—å–∏ –Ω–∞ Pudding –ø—Ä–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–∞–±—ã](https://pudding.cool/2019/10/pubs/). –ß–∞—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–π —ç—Ç–∏—Ö –ø–∞–±–æ–≤ –∏–º–µ–µ—Ç —Å–ª–æ–≤–æ *Inn*, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å—Ç—Ä–æ–∏–º –≥—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è 30 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–∞–±–æ–≤ —Å —ç—Ç–∏–º —Å–ª–æ–≤–æ–º –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∏ –±–µ–∑ –Ω–µ–≥–æ. –ò—Å–ø–æ–ª—å–∑—É—è –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á—Ç–æ-—Ç–æ –≤ —ç—Ç–æ–º —Ä–æ–¥–µ:

```{r download_uk_pubs, cache=TRUE, message = FALSE}
uk_pubs <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/UK_pubs.csv")
uk_pubs %>% 
  count(pub_name, sort = TRUE) %>% 
  mutate(inn = str_detect(pub_name, "Inn")) %>% 
  group_by(inn) %>% 
  slice(1:20) %>% 
  ggplot(aes(fct_reorder(pub_name, n), n))+
  geom_col()+
  coord_flip()+
  facet_wrap(~inn, scale = "free")+
  labs(x = "", y = "", caption = "https://pudding.cool/2019/10/pubs/")
```

–ü–æ–ª—É—á–∏–ª–æ—Å—å –≤ —Ü–µ–ª–æ–º —Ç–æ, —á—Ç–æ –º—ã —Ö–æ—Ç–µ–ª–∏, –æ–¥–Ω–∞–∫–æ –Ω–∞–∑–≤–∞–Ω–∏—è `TRUE` –∏ `FALSE` –Ω–µ —Å–∞–º—ã–µ —É–¥–∞—á–Ω—ã–µ. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `ifelse()`, —É –∫–æ—Ç–æ—Ä–æ–π —Ç—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: 

* —É—Å–ª–æ–≤–∏–µ, 
* –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `TRUE`, 
* –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `FALSE`.

```{r}
ifelse(2+2 == 4, "–ø—Ä–∞–≤–∏–ª—å–Ω–æ", "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ")
ifelse(2+2 == 5, "–ø—Ä–∞–≤–∏–ª—å–Ω–æ", "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ")
```

–í—Å—Ç–∞–≤–∏–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –∫–æ–¥:

```{r}
uk_pubs %>% 
  count(pub_name, sort = TRUE) %>% 
  mutate(inn = ifelse(str_detect(pub_name, "Inn"), 
                      "with 'inn'", 
                      "without 'inn'")) %>%
  group_by(inn) %>% 
  slice(1:20) %>% 
  ggplot(aes(fct_reorder(pub_name, n), n))+
  geom_col()+
  coord_flip()+
  facet_wrap(~inn, scale = "free")+
  labs(x = "", y = "", caption = "https://pudding.cool/2019/10/pubs/")
```

–ê —á—Ç–æ –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–π –±–æ–ª—å—à–µ? –í —Ü–µ–ª–æ–º, –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `ifelse()` –º–æ–∂–Ω–æ –≤–ª–æ–∂–∏—Ç—å –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `ifelse()`, –æ–¥–Ω–∞–∫–æ –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –ø—Ä–∏–¥—É–º–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é `case_when()`. –£ –Ω–µ–µ –Ω–µ–º–Ω–æ–≥–æ –Ω–µ–æ–±—ã—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

```
case_when(
  —É—Å–ª–æ–≤–∏–µ 1 ~ –∑–Ω–∞—á–µ–Ω–∏–µ x,
  —É—Å–ª–æ–≤–∏–µ 2 ~ –∑–Ω–∞—á–µ–Ω–∏–µ y,
  ...
  —É—Å–ª–æ–≤–∏–µ n ~ –∑–Ω–∞—á–µ–Ω–∏–µ z
)
```

–î–∞–≤–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥–∞—Ç–∞—Å–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ —Å–ª–æ–≤–∞–º–∏ *Inn*, *Hotel*, *Bar*, *House* –∏ *Tavern*:

```{r}
uk_pubs %>% 
  count(pub_name, sort = TRUE) %>% 
  mutate(place = case_when(
    str_detect(pub_name, "Inn") ~ "inn",
    str_detect(pub_name, "Hotel") ~ "hotel",
    str_detect(pub_name, "Bar") ~ "bar",
    str_detect(pub_name, "House") ~ "house",
    str_detect(pub_name, "Tavern") ~ "tavern")) %>%
  group_by(place) %>% 
  slice(1:10) %>% 
  ggplot(aes(fct_reorder(pub_name, n), n))+
  geom_col()+
  coord_flip()+
  facet_wrap(~place, scale = "free")+
  labs(x = "", y = "", caption = "https://pudding.cool/2019/10/pubs/")
```

–í–∞—Ä–∏–Ω–∞—Ç `NA`, –∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º –æ—Å—Ç–∞–≤—à–∏–º—Å—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥–ø–∞–ª–∏ –Ω–∏ –ø–æ–¥ –æ–¥–Ω–æ –∏–∑ –Ω–∞—à–∏—Ö —É—Å–ª–æ–≤–∏–π. –ß—Ç–æ–±—ã —É—á–µ—Å—Ç—å –∏ —ç—Ç–æ—Ç —Å–ª—É—á–∞–π, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ `TRUE`:

```{r}
uk_pubs %>% 
  count(pub_name, sort = TRUE) %>% 
  mutate(place = case_when(
    str_detect(pub_name, "Inn") ~ "inn",
    str_detect(pub_name, "Hotel") ~ "hotel",
    str_detect(pub_name, "Bar") ~ "bar",
    str_detect(pub_name, "House") ~ "house",
    str_detect(pub_name, "Tavern") ~ "tavern",
    TRUE ~ "other")) %>%
  group_by(place) %>% 
  slice(1:10) %>% 
  ggplot(aes(fct_reorder(pub_name, n), n))+
  geom_col()+
  coord_flip()+
  facet_wrap(~place, scale = "free")+
  labs(x = "", y = "", caption = "https://pudding.cool/2019/10/pubs/")
```

```{block, type = "rmdtask"}
–ú—ã —É–∂–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ [—Å—Ç–∞—Ç—å–∏ –Ω–∞ Pudding  "Finding Forever Homes"](https://pudding.cool/2019/10/shelters/), –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–ø—É—Å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤–æ–∑—Ä–æ—Å—Ç–Ω–æ-–ø–æ–ª–æ–≤—É—é –ø–∏—Ä–∞–º–∏–¥—É —Å–æ–±–∞–∫ –≤ –°–®–ê. –ö–æ–≥–¥–∞ –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ—á–∫—É –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
```
```
dogs <- read_csv("https://raw.githubusercontent.com/r-classes/2019_2020_ds4dh_hw_2_dplyr_tidyr_ggplot2/master/data/dog_names.csv")
dogs %>% 
  filter(sex != "Unknown") %>% 
  count(sex, contact_state) %>% 
  group_by(contact_state) %>% 
  mutate(
  ...
  ) %>% 
  ggplot(aes(fct_reorder(contact_state, sum), n, fill = sex))+
  geom_col()+
#  scale_y_continuous(breaks = -2:2*1000, labels = abs(-2:2)*1000)+
  coord_flip()+
  labs(x = "", y = "", caption = "data from https://pudding.cool/2019/10/shelters/")+
  scale_fill_brewer(palette ="Dark2")
```

```{r download_dogs, echo = FALSE, cache = TRUE, fig.height=8, message = FALSE}
dogs <- read_csv("https://raw.githubusercontent.com/r-classes/2019_2020_ds4dh_hw_2_dplyr_tidyr_ggplot2/master/data/dog_names.csv")
dogs %>% 
  filter(sex != "Unknown") %>% 
  count(sex, contact_state) %>% 
  group_by(contact_state) %>% 
  mutate(sum = sum(n),
         n = ifelse(sex == "Male", -n, n)) %>% 
  ggplot(aes(fct_reorder(contact_state, sum), n, fill = sex))+
  geom_col()+
#  scale_y_continuous(breaks = -2:2*1000, labels = abs(-2:2)*1000)+
  coord_flip()+
  labs(x = "", y = "", caption = "data from https://pudding.cool/2019/10/shelters/")+
  scale_fill_brewer(palette ="Dark2")
```



### –£—Å–ª–æ–≤–∏—è –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö

–ß—Ç–æ –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å `summarise()` –∏–ª–∏ `mutate()` –ª–∏—à—å –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º? –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `summarise_at()` –∏–ª–∏ `mutate_at()`.–ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –≤–æ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞ `iris`, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å–æ —Å–ª–æ–≤–∞ "Sepal".

```{r}
iris %>% 
  head()

iris %>% 
  summarise_at(vars(starts_with("Sepal")), mean)
```

–ù–∞ –º–µ—Å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ `starts_with()` –º–æ–≥—É—Ç –±—ã—Ç—å –∏ –¥—Ä—É–≥–∏–µ:

* `ends_with()` -- –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è

```{r}
iris %>% 
  summarise_at(vars(ends_with("Width")), mean)
```

* `matches()` -- —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é

```{r}
iris %>% 
  summarise_at(vars(matches("Sepal")), mean)
```

* `one_off()` -- –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–π

```{r}
diamonds %>% 
  summarise_at(vars(one_of(c("depth", "price", "carat"))), mean)
```

–¢–∞–∫ –∂–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `summarise_if()`,  –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫–∞–∫—É—é-—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—é –∫ –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–µ, –µ—Å–ª–∏ –æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∫–æ–º—É-—Ç–æ —É—Å–ª–æ–≤–∏—é (–æ–±—ã—á–Ω–æ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö):

```{r}
diamonds %>% 
  summarise_if(is.numeric, mean)
```

–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Å `mutate_..()`:
```{r}
diamonds

diamonds %>% 
  mutate_at(vars(one_of(c("depth", "price", "carat"))), sqrt)

diamonds %>% 
  mutate_if(is.numeric, sqrt)
```

–í–º–µ—Å—Ç–æ `mean` –∏ `sqrt` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–∞—è –¥—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å–æ–∑–¥–∞–Ω–Ω–∞—è –≤–∞–º–∏:

```{r}
iris %>% 
  summarise_at(vars(matches("Sepal")), function(x){mean(x)*min(x)})
```

```{block, type = "rmdtask"}
–í–æ—Ç [–∑–¥–µ—Å—å](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/us_city_average_temperature.csv) –ª–µ–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ 51 –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–º—É –≥–æ—Ä–æ–¥—É, –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —á–µ–ª–æ–≤–µ–∫ –≤ –Ω–∏—Ö, –∞ —Ç–∞–∫–∂–µ –µ–∂–µ–º–µ—Å—è—á–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞—Ö. –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ —Ñ–∞—Ä–∏–Ω–≥–µ–π—Ç—ã –≤ —Ü–µ–ª—å—Å–∏–π –∏ –Ω–∞–π–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ.
```

$$^0C = \frac{5}{9} \times (^0F-32)$$

```{r, echo = FALSE, message=FALSE}
options(scipen = 999)
uc_city <- read_csv("data/us_city_average_temperature.csv")
uc_city %>% 
  mutate_at(vars(starts_with("m")), function(x){5 / 9 * (x - 32)}) %>% 
  pivot_longer(names_to = "month", values_to = "value", min_january:max_december) %>% 
  separate(month, into = c("range", "month")) %>% 
  mutate(month = factor(month, levels = c(tolower(month.name)))) %>% 
  ggplot(aes(population_2010/1000000, value, color = range))+
  geom_point()+
  facet_wrap(~month)+
  labs(x = "population (mln persons)",
       y = "temperature",
       caption = "data from www.currentresults.com")
```


## Reinvent the `map` function

–í —Ä–∞–∑–¥–µ–ª–µ [–ø—Ä–æ —Ä–∞–±–æ—Ç—É —Å–æ —Å–ø–∏—Å–∫–∞–º–∏](#lists) –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏ —Ñ—É–Ω–∫–∏—é `map()`, –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–µ–µ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ–º –≤—Å–µ —Ü–µ–Ω—ã –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ diamonds –≤ —Ä—É–±–ª–∏:


–ú–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ:
```{r, message=FALSE}
list.files("data/", pattern = ".csv")
all_datasets <- map(str_c("data/", list.files("data/", pattern = ".csv")), read_csv)
str(all_datasets, max.level = 1)
```

–ú–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ –ª–∏—Å—Ç—ã –∏–∑ `.xlsx` —Ñ–∞–π–ª–∞:
```{r, message=FALSE}
library(readxl)
excel_sheets("data/seattle_public_library_checkouts.xlsx")
excel_sheets("data/seattle_public_library_checkouts.xlsx") %>%
  map(~read_xlsx("data/seattle_public_library_checkouts.xlsx", .)) ->
  seatle

str(seatle, max.level = 1)
```

–ü–æ–ª—É—á–∏–ª—Å—è —Å–ø–∏—Å–æ–∫, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `map_df()`, –∫–æ—Ç–æ—Ä–∞—è –µ—â–µ –∏ —Å–æ–µ–¥–∏–Ω–∏—Ç –≤—Å–µ –≤ –æ–¥–∏–Ω –¥–∞—Ç–∞—Ñ—Ä–µ–π–º.

```{r}
excel_sheets("data/seattle_public_library_checkouts.xlsx") %>%
  map_df(~read_xlsx("data/seattle_public_library_checkouts.xlsx", .)) ->
  seatle

str(seatle, max.level = 1)
```

<!--chapter:end:07-functions.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# –†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–∞–º–∏: `gutenbergr`, `tidytext`, `udpipe` {#tidytext}

```{r,message=FALSE}
library(tidyverse)
```

```{r, echo=FALSE}
theme_set(theme_bw())
```


## –ü–∞–∫–µ—Ç `gutenbergr`

–ü–∞–∫–µ—Ç `gutenbergr` —è–≤–ª—è–µ—Ç—Å—è API –¥–ª—è –æ—á–µ–Ω—å —Å—Ç–∞—Ä–æ–≥–æ [–ø—Ä–æ–µ–∫—Ç–∞ Guttenberg](http://www.gutenberg.org/).

```{r}
library(gutenbergr)
```

–í—Å–µ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –≤ —ç—Ç–æ–º –ø–∞–∫–µ—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ `gutenberg_metadata`

```{r}
str(gutenberg_metadata)
```

–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ–π—á–∞—Å –º—ã –º–æ–∂–µ–º –ø–æ–Ω—è—Ç—å, —Å–∫–æ–ª—å–∫–æ –∫–Ω–∏–≥ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞:

```{r}
gutenberg_metadata %>% 
  count(language, sort = TRUE)
```

–ö–∞–∫ –≤–∏–¥–Ω–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —ç—Ç–æ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º. –°–∫–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–æ–≤ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ?

```{r}
gutenberg_metadata %>% 
  count(author, sort = TRUE)
```

–°–∫–æ–ª—å–∫–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –î–∂–µ–π–Ω –û—Å—Ç–∏–Ω (–Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –û—Å—Ç–∏–Ω) –µ—Å—Ç—å –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ?

```{r}
gutenberg_metadata %>% 
  filter(author == "Austen, Jane") %>% 
  distinct(gutenberg_id, title)
```

–î–∞–≤–∞–π—Ç–µ —Å–∫–∞—á–∞–µ–º "–≠–º–º—É":

```{r download_emma, cache=TRUE}
emma <- gutenberg_download(158)
emma
```

–ú–æ–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–Ω–∏–≥. –î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –µ—â–µ "–õ–µ–¥–∏ –°—å—é–∑–µ–Ω":

```{r download_books, cache=TRUE}
books <- gutenberg_download(c(158, 946), meta_fields = "title")
books
books %>% 
  count(title)
```

```{block, type = "rmdtask"}
–°–∫–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç "Sherlock Holmes"?
```

```{r, include=FALSE}
gutenberg_metadata %>% 
  filter(str_detect(title, "Sherlock Holmes")) %>% 
  distinct(title)
# 9
```

## –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `tidytext`

–°–µ–π—á–∞—Å —Å–∫–∞—á–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü—É, –≥–¥–µ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —ç—Ç–æ –æ–¥–∏–Ω –∞–±–∑–∞—Ü. –•–æ—á–µ—Ç—Å—è –º–æ—á—å –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å–ª–æ–≤–∞. –î–ª—è —ç—Ç–æ–≥–æ –∫–Ω–∏–≥–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ tidy —Ñ–æ—Ä–º–∞—Ç –∏ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω –ø–∞–∫–µ—Ç `tidytext` (–æ–Ω–ª–∞–π–Ω –∫–Ω–∏–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ [–∑–¥–µ—Å—å](https://www.tidytextmining.com/)):

```{r}
library(tidytext)
books %>% 
  unnest_tokens(word, text)
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å–∞–º—ã–µ —á–∞—Å—Ç–æ—Ç–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ –æ–±–æ–∏—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è—Ö:

```{r}
books %>% 
  unnest_tokens(word, text) %>% 
  count(title, word, sort = TRUE)
```

–ù—É... –≠—Ç–æ –±—ã–ª–æ –æ–∂–∏–¥–∞–µ–º–æ. –ù—É–∂–Ω–æ —É–±—Ä–∞—Ç—å —Å—Ç–æ–ø—Å–ª–æ–≤–∞. –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å—Ç–æ–ø—Å–ª–æ–≤–∞ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –ø–∞–∫–µ—Ç (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `stop_words`):

```{r}
books %>% 
  unnest_tokens(word, text) %>% 
  count(title, word, sort = TRUE) %>% 
  anti_join(stop_words)
```

```{block, type = "rmdtask"}
–ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –≥—Ä–∞—Ñ–∏–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–∞–º—ã–µ —á–∞—Å—Ç–æ—Ç–Ω—ã–µ 20 —Å–ª–æ–≤ –∫–∞–∂–¥–æ–≥–æ –∏–∑ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π.
```

```{r, echo = FALSE}
books %>% 
  unnest_tokens(word, text) %>% 
  count(title, word, sort = TRUE) %>% 
  anti_join(stop_words) %>% 
  group_by(title) %>% 
  slice(1:20) %>% 
  ggplot(aes(word, n))+
  geom_col()+
  coord_flip()+
  facet_wrap(~title, scale = "free")
```





```{r, eval = FALSE, include=FALSE}
library(tidyverse)
library(udpipe)
dl <- udpipe_download_model(language = "russian")
udmodel_ru <- udpipe_load_model(file = dl$file_model)

txt <- read_lines("/home/agricolamz/Desktop/kolobok")
txt <- str_c(txt, collapse = " ")

x <- udpipe_annotate(udmodel_ru, x = txt)
x <- as.data.frame(x)

sentiment <- read_csv("https://raw.githubusercontent.com/text-machine-lab/sentimental/master/sentimental/word_list/russian.csv")

x %>% 
  left_join(sentiment, by = c("lemma" = "word")) ->
  x

x %>% 
  select(score) %>% 
  as.data.frame()
  group_by(sentence_id) %>% 
  summarise(sentiment = sum(score, na.rm = TRUE)) 
  mutate(sentiment_type = ifelse(sentiment>= 0, "positive", "negative")) %>% 
  ggplot(aes(sentence_id, sentiment, fill = sentiment_type))+
  geom_col()
```

–§—É–Ω–∫—Ü–∏—è `unnest_tokens()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ —Å–ª–æ–≤–∞–º–∏, –Ω–æ –∏, –Ω–∞–ø—Ä–º–∏–µ—Ä, —Å –±–∏–≥—Ä–∞–º–º–∞–º–∏:

```{r}
books %>% 
  unnest_tokens(word, text, token = "ngrams", n = 2)
```

–ü–æ–∏—Å–∫ —Å–∞–º—ã—Ö —á–∞—Å—Ç–æ—Ç–Ω—ã—Ö —Å–ª–æ–≤ --- –Ω–µ –µ–¥–∏—Å–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —Ä–µ—à–∞—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ç–µ–∫—Å—Ç–æ–º. –ò–Ω–æ–≥–¥–∞ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª —É–∑–Ω–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–≤ –≤ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏. –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ —Ä–æ–º–∞–Ω–µ "–≠–º–º–∞" —Ñ–∞–º–∏–ª–∏–∏ –≥–ª–∞–≤–Ω—ã—Ö –≥–µ—Ä–æ–µ–≤:

```{r}
books %>% 
  filter(title == "Emma") %>% 
  unnest_tokens(word, text) %>% 
  mutate(narrative_time = 1:n()) %>% 
  filter(str_detect(word, "knightley$|woodhouse$|churchill$|fairfax$")) %>%  
  ggplot()+
      geom_vline(aes(xintercept = narrative_time))+
  facet_wrap(~word, ncol = 1)
```


## –ü–∞–∫–µ—Ç `udpipe`

–ü–∞–∫–µ—Ç `udpipe` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—é, –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤. –¢—É—Ç–æ—Ä–∏–∞–ª –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](https://bnosac.github.io/udpipe/docs/doc1.html), —Ç–∞–º –∂–µ –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤.

```{r}
library(udpipe)
```


–ú–æ–¥–µ–ª–∏ –∫–∞—á–∞—é—Ç—Å—è –æ—á–µ–Ω—å –¥–æ–ª–≥–æ.
```{r download_en_model, cache=TRUE}
enmodel <- udpipe_download_model(language = "english")
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∫–∞–∫–æ–µ-–Ω–∏–±—É–¥—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:
```{r}
udpipe("The want of Miss Taylor would be felt every hour of every day.", object = enmodel)
```

–°–∫–∞—á–∞–µ–º —Ä—É—Å—Å–∫—É—é –º–æ–¥–µ–ª—å:
```{r  download_ru_model, cache=TRUE}
rumodel <- udpipe_download_model(language = "russian-syntagrus")
```

```{r}
udpipe("–ñ–∏–ª–∞-–±—ã–ª–∞ –Ω–∞ —Å–≤–µ—Ç–µ –∫—Ä—ã—Å–∞ –≤ –º–æ—Ä—Å–∫–æ–º –ø–æ—Ä—Ç—É –í–∞–ª—å–ø–∞—Ä–∞–∏—Å–æ, –Ω–∞ —Å–∫–ª–∞–¥–µ –º—è—Å–∞ –∏ –º–∞–∏—Å–∞, –∫–∞–∫–∞–æ –∏ –≤–∏–Ω–∞.", object = rumodel)
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–∂–Ω–æ —É–∂–µ –∫ –Ω–µ–π –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ –ø–æ –∏–º–µ–Ω–∏:

```{r}
udpipe("–ñ–∏–ª–∞-–±—ã–ª–∞ –Ω–∞ —Å–≤–µ—Ç–µ –∫—Ä—ã—Å–∞ –≤ –º–æ—Ä—Å–∫–æ–º –ø–æ—Ä—Ç—É –í–∞–ª—å–ø–∞—Ä–∞–∏—Å–æ, –Ω–∞ —Å–∫–ª–∞–¥–µ –º—è—Å–∞ –∏ –º–∞–∏—Å–∞, –∫–∞–∫–∞–æ –∏ –≤–∏–Ω–∞.", object = "russian-syntagrus-ud-2.4-190531.udpipe")
```


<!--chapter:end:08-texts.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# –†–∞–±–æ—Ç–∞ —Å –≥–µ–æ–¥–∞–Ω–Ω—ã–º–∏: `leaflet`

```{r, message=FALSE}
library("tidyverse")
```


## –í–µ–∫—Ç–æ—Ä–Ω–∞—è –∏ —Ä–∞—Å—Ç—Ä–æ–≤–∞—è –≥—Ä–∞—Ñ–∏–∫–∞

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ–±—Å—É–∂–¥–∞—Ç—å –∫–∞—Ä—Ç—ã, —Å–ª–µ–¥—É–µ—Ç —Å–Ω–∞—á–∞–ª–∞ –æ–±—Å—É–¥–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –∏ —Ä–∞—Å—Ç—Ä–æ–≤–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π.

* **–†–∞—Å—Ç—Ä–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π, –ø—Ä–æ –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–≤–µ—Ç–µ. –í–µ–∫—Ç–æ—Ä–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–ª—å–∑—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å --- –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç —Å—Ç–∞–Ω—É—Ç –≤–∏–¥–Ω—ã –ø–∏–∫—Å–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤ –∫–∞–∫–æ–º-—Ç–æ —Å–º—ã—Å–ª–µ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–µ–¥–µ–ª–æ–º —É–≤–µ–ª–µ—á–µ–Ω–∏—è. –ù–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ä–∞—Å—Ç—Ä–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: `JPEG`, `GIF`, `PNG`, `BMP`, `TIFF` –∏ –¥—Ä—É–≥–∏–µ.
* –í **–≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö** –∏–Ω–æ—Ä–º–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∫–∞–∫ —Å–æ–±—Ä–∞–Ω–∏ —Ç–æ—á–µ–∫, –ª–∏–Ω–∏–π –∏ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ç–∞–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ —Ç–µ—Ä—è—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ. –ù–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: `PDF`, `SVG`, `EPS` –∏ –¥—Ä—É–≥–∏–µ.

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–µ–¥–∏–Ω—è—Ç—å —Ä–∞—Å—Ç—Ä–æ–≤—ã–µ –∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞. –ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –ø–æ–ø–∞–¥–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã: —Ç–æ—á–∫–∏ (—Å—Ç–æ–ª–∏—Ü—ã –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω), –ª–∏–Ω–∏–∏ (—É–ª–∏—Ü—ã –≤ –∫–∞–∫–æ–º-–Ω–∏–±—É–¥—å –≥–æ—Ä–æ–¥–µ), –ø–æ–ª–∏–≥–æ–Ω—ã (–≥—Ä–∞–Ω–∏—Ü—ã —Å—Ç—Ä–∞–Ω –∏ –º–µ–Ω—å—à–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤) –æ–±—ã—á–Ω–æ –∏–º–µ—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä—É—é –≥–µ–æ–ø—Ä–∏–≤—è–∑–∫—É (–¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –¥–∞–≤–∞–π—Ç–µ —Å—á–∏—Ç–∞—Ç—å —Ç–∞–∫–∏–º–∏, –≤—Å–µ, —á—Ç–æ –∏–º–µ–µ—Ç —à–∏—Ä–æ—Ç—É –∏ –¥–æ–ª–≥–æ—Ç—É), —Ç–∞–∫ —á—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤–µ–∫—Ç–æ—Ä–Ω–æ, –æ–¥–Ω–∞–∫–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω–∏–∫–∞–∫ –ø–æ–¥—Ä—É–≥–æ–º—É, –∫—Ä–æ–º–µ –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä–Ω–æ: —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ —Å–Ω–∏–º–∫–∏, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ/–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ/–∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–µ/–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∏ —Ç. –ø. –∫–∞—Ä—Ç—ã, –≤—ã–¥–∞—á–∞ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ Google Maps. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∑–∞–Ω–∏–º–∞—è—Å—å –ª—é–±—ã–º–∏ —Ç–∏–ø–∞–º–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å –æ —Ä–∞–∑–Ω–∏—Ü–µ **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∏–∑–∞—É–ª–∏–∑–∞—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—É—é –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å, –∏ **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑–º–µ–Ω—è—Ç—å —Å–µ–±—è (—É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –∏ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è, –∫–ª–∏–∫–∞—Ç—å –Ω–∞ —Å–æ–±—Ä–∞–Ω–∏–µ —Ç–æ—á–µ–∫ –∏ –≤–∏–¥–µ—Ç—å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ç. –ø.). –í –¥–∞–Ω–Ω–æ–π –≥–ª–∞–≤–µ, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –º—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ –ø–∞–∫–µ—Ç–µ –¥–ª—è –¥–∏–Ω–∞–º–∏—á—Å–∫–æ–≥–æ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω–∏—è `leaflet`. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ —Ç–µ–º –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç—Ç–æ–π –≥–ª–∞–≤—ã: –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ü–∏–∏, –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞—Å—Ç—Ä–æ–≤—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ –¥—Ä—É–≥–∏–µ (—Å–º., –Ω–∞–ø—Ä–∏–º–µ—Ä, [@lovelace19], –¥–æ—Å—Ç—É–ø–Ω–∞—è [–∑–¥–µ—Å—å](https://geocompr.robinlovelace.net/)).

## –ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã

–í –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–≤–æ–∏ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã:

![](images/10-classes.png)

–≠—Ç–∏ –µ–¥–∏–Ω–∏—Ü—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å –≥–µ–æ—Ä–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏: `sp`, `sf` –∏ –¥—Ä—É–≥–∏–µ. –í –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –Ω–µ –±—É–¥–µ–º —É—á–∏—Ç—å—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è–º —Å —ç—Ç–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ, –≤—ã—á–∏—Ç–∞–Ω–∏–µ –∏ —Ç. –ø., –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –ø–∞–∫–µ—Ç—É `sp` –∏–ª–∏ –≤ —É–∂–µ —É–ø–æ–º—è–Ω–∞–≤—à–µ–π—Å—è –∫–Ω–∏–∂–∫–µ [@lovelace19]).

## `leaflet`

–î–ª—è –Ω–∞—á–∞–ª–∞ –≤–∫–ª—é—á–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É:
```{r, message=FALSE}
library("leaflet")
```

[–ó–¥–µ—Å—å –¥–æ—Å—Ç—É–ø–µ–Ω cheatsheet](https://github.com/rstudio/cheatsheets/raw/master/leaflet.pdf), –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç—É `leaflet`.

### `.csv` —Ñ–∞–π–ª—ã
–ò—Å—Ç–æ—á–Ω–∏–∫–æ–º –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ã—á–Ω—ã–µ –ø—Ä–∏–≤—ã—á–Ω—ã–µ –Ω–∞–º csv —Ñ–∞–π–ª—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç [–∑–¥–µ—Å—å](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/death_of_migrants_and_refugees_from_the_Unwelcomed_project.csv), —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–∞—Ç–∞—Å–µ—Ç –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ [The Unwelcomed](http://alhadaqa.com/2019/08/the_unwelcomed/) –ú–æ—Ö–∞–º–∞–¥–∞ –ê. –í—ç–π–∫–¥–∞ (Mohamad A. Waked), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Å—Ç–µ –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö —Å–º–µ—Ä—Ç–∏ –º–∏–≥—Ä–∞–Ω—Ç–æ–≤ –∏ –±–µ–∂–µ–Ω—Ü–µ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É —Å —è–Ω–≤–∞—Ä—è 2014 –≥–æ–¥–∞ –ø–æ –∏—é–Ω—å 2019 –≥–æ–¥–∞.

```{r, message=FALSE}
unwelcomed <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/death_of_migrants_and_refugees_from_the_Unwelcomed_project.csv")
```

* `id` --- –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä;
* `date` --- –¥–∞—Ç–∞ –ø—Ä–æ–∏—Å—à–µ–¥—à–µ–≥–æ;
* `total_death_missing` --- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≥–∏–±—à–∏—Ö/–ø—Ä–æ–ø–∞–≤—à–∏—Ö;
* `location` --- –º–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—à–µ–¥—à–µ–≥–æ;
* `lat` --- —à–∏—Ä–æ—Ç–∞;
* `lon` --- –¥–æ–ª–≥–æ—Ç–∞;
* `collapsed_region` --- –æ–±–æ–±—â–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏–æ–Ω–µ;
* `region` --- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏–æ–Ω–µ;
* `collapsed_cause` --- –æ–±–æ–±—â–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—á–∏–Ω–µ —Å–º–µ—Ä—Ç–∏;
* `cause_of_death` --- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—á–∏–Ω–µ —Å–º–µ—Ä—Ç–∏.

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∏—Ä–æ—Ç–µ –∏ –¥–æ–ª–≥–æ—Ç–µ –∏–Ω–æ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –≤ –≥—Ä–∞–¥—É—Å–∞—Ö, –º–∏–Ω—É—Ç–∞—Ö –∏ —Å–µ–∫—É–Ω–¥–∞—Ö, –∞ –∏–Ω–æ–≥–¥–∞ –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π –∑–∞–ø–∏—Å–∏, –≤ R –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Å—è—Ç–∏—á–Ω–∞—è –∑–∞–ø–∏—Å—å. –í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã –∏–∑ –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –≤ –¥—Ä—É–≥–æ–π –∏ –æ–±—Ä–∞—Ç–Ω–æ.

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –Ω–∞–Ω–µ—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–π `leaflet() %>% addCircles()`:

```{r}
unwelcomed %>% 
  leaflet() %>% 
  addCircles(lng = ~lon, # –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ—Å–æ–±—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å —Ç–∏–ª—å–¥–æ–π
             lat = ~lat)
```

–ß—Ç–æ–±—ã —Ç–æ—á–∫–∏ –Ω–µ "–≤–∏—Å–µ–ª–∏ –≤ –≤–æ–∑–¥—É—Ö–µ" –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ª–æ–∂–∫—É:

```{r}
unwelcomed %>% 
  leaflet() %>% 
  addTiles() %>% 
  addCircles(lng = ~lon,
             lat = ~lat)
```

–§—É–Ω–∫—Ü–∏—è `addCircles()` –∏–º–µ–µ—Ç –º–∞—Å—Å—É –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

* `radius`
* `color`
* `opacity`
* `fill`
* `fillColor`
* `label`
* `popup`

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ –ø–∞–∫–µ—Ç–µ `leaflet` –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ —É–¥–æ–±–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ç–∞–∫–æ–π –∑–∞–¥–∞—á–∏ –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–π `colorNumeric()`, `colorFactor()`, `colorBin()` –∏–ª–∏ `colorQuantile()`.

```{r}
pal_cat <- colorFactor("Set3", domain = unwelcomed$collapsed_cause)
pal_cat(unwelcomed$collapsed_cause[1])
```

–¢–µ–ø–µ—Ä—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `pal_cat` –∑–∞–ø–∏—Å–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤–∞—Ä—â–∞–µ—Ç —Ü–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤ —Ñ—É–∫–Ω—Ü–∏–π `colorNumeric()`, `colorFactor()`, `colorBin()` –∏–ª–∏ `colorQuantile()` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∞–ª–∏—Ç—Ä–∞, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–¥–∞—Ç—å —Å–∞–º –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ –∏–º–µ—é—â—É—é—Å—è (–∏—Ö –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã `RColorBrewer::display.brewer.all()`):

```{r, fig.height=9}
RColorBrewer::display.brewer.all()
```

–¢–µ–ø–µ—Ä—å –º—ã –≥–æ—Ç–æ–≤—ã —Å–¥–µ–ª–∞—Ç—å –Ω–∞—à—É –ø–µ—Ä–≤—É—é –æ—Å–º—ã—Å–ª–µ–Ω–Ω—É—é –∫–∞—Ä—Ç—É
```{r}
unwelcomed %>% 
  filter(str_detect(date, "2014")) %>% 
  leaflet() %>% 
  addTiles() %>% 
  addCircles(lng = ~lon,
             lat = ~lat,
             label = ~total_death_missing, # –ø—É—Å—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
             color  = ~pal_cat(collapsed_cause), # —ç—Ç–æ –æ–±–æ–±—â–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
             opacity = 0.9,
             popup = ~cause_of_death) %>%  # –∞ —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –º—ã—à–∫–æ–π
  addLegend(pal = pal_cat,
            values = ~collapsed_cause,
            title = "")
```

–í–æ–æ–±—â–µ —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –Ω–µ –æ—á–µ–Ω—å —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –ø–æ–¥–ª–æ–∂–∫–æ–π, —Ç–∞–∫ —á—Ç–æ –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ–¥–ª–æ–∂–∫—É –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `addProviderTiles()` (–≥–∞–ª–ª–µ—Ä–µ—é –ø–æ–¥–ª–æ–∂–µ–∫ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ—Ç [–∑–¥–µ—Å—å](https://leaflet-extras.github.io/leaflet-providers/preview/index.html)):

```{r}
unwelcomed %>% 
  filter(str_detect(date, "2014")) %>% 
  leaflet() %>% 
  addProviderTiles("Stamen.TonerLite") %>% 
  addCircles(lng = ~lon,
             lat = ~lat,
             label = ~total_death_missing, # –ø—É—Å—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
             color  = ~pal_cat(collapsed_cause), # —ç—Ç–æ –æ–±–æ–±—â–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
             opacity = 0.9,
             popup = ~cause_of_death) %>%  # –∞ —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –º—ã—à–∫–æ–π
  addLegend(pal = pal_cat,
            values = ~collapsed_cause,
            title = "")
```

```{block, type = "rmdtask"}
–°—É—â–µ—Å—Ç–≤—É–µ—Ç [–ø—Ä–æ–µ–∫—Ç –ö–∞—Ä—Ç–∞ –î–¢–ü](https://github.com/tadata-ru/dtp-stat), –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–±—Ä–∞–Ω [–¥–∞—Ç–∞—Å–µ—Ç c –¥–æ—Ä–æ–∂–Ω—ã–º–∏ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è–º–∏](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/MVC_Russia.csv) –≤ –†–æ—Å—Å–∏–∏ –∑–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫. –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞. –ß—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –Ω–∞ –ø–æ–ª—É—á–∏–≤—à–µ–π—Å—è –∫–∞—Ä—Ç–µ?
```

```{r, eval = FALSE, echo=FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/MVC_Russia.csv") %>% 
  mutate(longitude = ifelse(longitude < 0, longitude+360, longitude)) %>% 
  leaflet() %>% 
  addTiles() %>% 
  addCircles(lat = ~latitude,
             lng = ~longitude)
```

<details> <summary> üìã —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ ‚û° </summary> 

<details> <summary> üëÅ –í—Å–µ –∑–∞–±—ã—Ç–æ... –ö–∞–∫ —Å–∫–∞—á–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç? ‚û° </summary>
–ù–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `read_csv()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `tidyverse`.
<br>
</details>

<details> <summary> üëÅ –ö–∞—Ä—Ç–∞ –ø–æ–ª—É—á–∏–ª–∞—Å—å, –Ω–æ –µ—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Ç–æ—á–∫–∏ –Ω–∞ –ß—É–∫–æ—Ç–∫–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å—Ç–æ–π —Å—Ç–æ—Ä–æ–Ω—ã... ‚û° </summary>
–î–∞, —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –ß—É–∫–æ—Ç–∫–æ–π. –ü—Ä–∏–±–∞–≤—å—Ç–µ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –¥–æ–ª–≥–æ—Ç—ã 360.
<br>
</details>

<details> <summary> üëÅ –ê –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ß—É–∫–æ—Ç–∫–µ? ‚û° </summary>
–ù—É –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `mutate()`, –∞ –≤ –Ω–µ–π `ifelse()`. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –º–µ–Ω—å—à–µ –Ω—É–ª—è --- –ø—Ä–∏–±–∞–≤–ª—è–µ–º 360, –µ—Å–ª–∏ –±–æ–ª—å—à–µ --- –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å.
<br>
</details>

</details>


### –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∫–∞—Ä—Ç: `leafsync`

–ö–∞—Ä—Ç—ã, –∫–∞–∫ –∏ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –≤ R —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

```{r}
unwelcomed %>% 
  filter(str_detect(date, "2014")) %>% 
  leaflet() %>% 
  addProviderTiles("Stamen.TonerLite") %>% 
  addCircles(lng = ~lon,
             lat = ~lat,
             label = ~total_death_missing, # –ø—É—Å—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
             color  = ~pal_cat(collapsed_cause), # —ç—Ç–æ –æ–±–æ–±—â–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
             opacity = 0.9,
             popup = ~cause_of_death) %>%  # –∞ —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –º—ã—à–∫–æ–π
  addLegend(pal = pal_cat,
            values = ~collapsed_cause,
            title = "2014") ->
  m_2014
```

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `m_2014`, –ø–æ—è–≤–∏—Ç—Å—è –∫–∞—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã —Å–¥–µ–ª–∞–ª–∏. –ù–æ, —á—Ç–æ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä—è–¥–æ–º –∫–∞—Ä—Ç—ã 2014 –≥–æ–¥–∞ –∏ 2015 –≥–æ–¥–∞? –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ñ–∞—Å–µ—Ç–∏–∑–∞—Ü–∏—é? –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ–∞—Å–µ—Ç–∏–∑–∞—Ü–∏–∏ –≤ –ø–∞–∫–µ—Ç–µ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞, –Ω–æ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –µ–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –î–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º –≤—Ç–æ—Ä—É—é –∫–∞—Ä—Ç—É:

```{r}
unwelcomed %>% 
  filter(str_detect(date, "2015")) %>% 
  leaflet() %>% 
  addProviderTiles("Stamen.TonerLite") %>% 
  addCircles(lng = ~lon,
             lat = ~lat,
             label = ~total_death_missing, # –ø—É—Å—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
             color  = ~pal_cat(collapsed_cause), # —ç—Ç–æ –æ–±–æ–±—â–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
             opacity = 0.9,
             popup = ~cause_of_death) %>%  # –∞ —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –º—ã—à–∫–æ–π
  addLegend(pal = pal_cat,
            values = ~collapsed_cause,
            title = "2015") ->
  m_2015
```

–í–∫–ª—é—á–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É:
```{r}
library("leafsync")
```

–ò —Ç–µ–ø–µ—Ä—å —Å–æ–µ–¥–∏–Ω–∏–º –¥–≤–µ –∫–∞—Ä—Ç—ã –≤–æ–µ–¥–∏–Ω–æ:
```{r}
sync(m_2014, m_2015)
```

### –†–∞–±–æ—Ç–∞ —Å `.geojson`

–í –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –±—É–¥–µ–º –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å [–¥–∞—Ç–∞—Å–µ—Ç](https://github.com/agricolamz/DS_for_DH/raw/master/data/countries.geojson), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–∞–Ω–Ω—ã–µ –ø–æ –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∞–º –º–∏—Ä–∞.

```{r}
countries <- jsonlite::read_json("https://github.com/agricolamz/DS_for_DH/raw/master/data/countries.geojson")
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å –≤ —Ä–∞–∑–¥–µ–ª–µ \@ref{lists}, —Ç–∞–∫ –∫–∞–∫ `jsonlite` –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –æ–¥–Ω–æ–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ `tidyverse`, —è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã `library(jsonlite)`, –∞ –æ–±—Ä–∞—â–∞—é—Å—å –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –ø–∞–∫–µ—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è `jsonlite::...()`. 

–í –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –º—ã –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—è –∏ [—É—Ä–æ–≤–µ–Ω—å –¥–æ—Ö–æ–¥–æ–≤](https://ru.wikipedia.org/wiki/–°—Ç—Ä–∞–Ω–∞_—Å_–≤—ã—Å–æ–∫–∏–º_—É—Ä–æ–≤–Ω–µ–º_–¥–æ—Ö–æ–¥–æ–≤).

```{r}
countries$features %>% 
  map("properties") %>% 
  tibble(name = map_chr(., "name"),
         pop_est = map_chr(., "pop_est"),
         income = map_chr(., "income_grp")) %>% 
  select(-1) %>% 
  mutate(pop_est = as.double(pop_est),
         income = as.factor(income)) ->
  country_features
country_features
```

–ï—â–µ –æ–¥–Ω–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —Ñ–æ—Ä–º–∞—Ç–∞ `.geojson` –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –µ–≥–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å github (—Å–º. [–ø—Ä–∏–º–µ—Ä](https://github.com/agricolamz/DS_for_DH/blob/master/data/countries.geojson)).

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `.geojson` —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `addGeoJSON()`, –∫–æ—Ç–æ—Ä–∞—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `.geojson` —Ñ–∞–π–ª.

```{r}
leaflet() %>% 
  addGeoJSON(geojson = countries)
```

–ü—Ä–æ–±–ª–µ–º–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ñ–∞–π–ª `.geojson` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ `style` –∫ –∫–∞–∂–¥–æ–º—É —É–∑–ª—É. 
–í–æ-–ø–µ—Ä–≤—ã—Ö, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ `style` –≤ –∫–æ—Ä–µ–Ω—å —Ñ–∞–π–ª–∞ `.geojson`. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, —ç—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤: 

```{r}
countries$style = list(
  weight = 1,
  color = "#555555",
  opacity = 1,
  fillOpacity = 0.8)

leaflet() %>% 
  addGeoJSON(geojson = countries)
```

–í–æ-–≤—Ç–æ—Ä—ã—Ö, —Å–ª–µ–¥—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø–∞–ª–∏—Ç—Ä—ã –¥–ª—è —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–π `colorNumeric()`, `colorFactor()`, `colorBin()` –∏–ª–∏ `colorQuantile()`.

```{r}
pal_num <- colorNumeric("Greens", domain = c(min(country_features$pop_est),
                                             max(country_features$pop_est)))
pal_cat <- colorFactor("RdYlBu", domain = country_features$income)
```

–°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `pal_num()` –∏ `pal_cat()` —Å–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–∞—Å–∫—Ä–∞—Å–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è:

```{r}
pal_num(country_features$pop_est[1])
pal_cat(country_features$income[1])
```

–í-—Ç—Ä–µ—Ç—å–∏—Ö, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä—ã —Å –Ω–æ–≤—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏:

```{r}
country_features %>% 
  mutate(pop_est_color = pal_num(pop_est),
         income_color = pal_cat(income)) ->
  country_features
country_features
```

–í-—á–µ—Ç–≤–µ—Ä—Ç—ã—Ö, –Ω—É–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –∫–∞–∂–¥–æ–º—É —É–∑–ª—É —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ `style`:

```{r}
map(seq_along(countries$features), function(x){
  countries$features[[x]]$properties$style <- 
    list(fillColor = country_features$income_color[x])
  countries$features[[x]]
}) ->
  countries$features
```

–ò –ø–æ—Å–ª–µ–¥–Ω–∏–π, –ø—è—Ç—ã–π —à–∞–≥, —ç—Ç–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏–≤—à–∏–π `.geojson`:
```{r}
leaflet() %>% 
  addGeoJSON(geojson = countries) %>% 
  addLegend(pal = pal_cat, 
            values = country_features$income, 
            title = "Income")
```

```{block, type = "rmdtask"}
–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 4 –∏ 5 –¥–ª—è —á–∏—Å–ª–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—è) –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞.
```

```{r, eval = FALSE, echo=FALSE}
map(seq_along(countries$features), function(x){
  countries$features[[x]]$properties$style <- list(fillColor = country_features$pop_est_color[x])
  countries$features[[x]]
}) ->
  countries$features

leaflet() %>% 
  addGeoJSON(geojson = countries) %>% 
  addLegend(pal = pal_num, 
            values = country_features$pop_est, 
            title = "Population")
```

<!--chapter:end:09-leaflet.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# –†–∞–±–æ—Ç–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º: `lubridate`

```{r, message=FALSE}
library(tidyverse)
```


–ú—ã –æ–±—Å—É–∂–¥–∞–ª–∏, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ. –û –Ω–∏—Ö, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–ª–µ–¥—É–µ—Ç –¥—É–º–∞—Ç—å –∫–∞–∫ –æ —à–∫–∞–ª–µ:

```{r,echo=FALSE}
types <- c("–∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ", "–ø–æ—Ä—è–¥–∫–æ–≤—ã–µ", "–≤—Ä–µ–º—è", "—á–∏—Å–ª–æ–≤—ã–µ")
examples <- c("–≥–æ–ª—É–±—ã–µ –≥–ª–∞–∑–∞, –∫–∞—Ä–∏–µ –≥–ª–∞–∑–∞, –∑–µ–ª–µ–Ω—ã–µ –≥–ª–∞–∑–∞...", 
              "–º–ª–∞–¥—à–∞—è —à–∫–æ–ª–∞, —Å—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞, —Ç–µ—Ö–Ω–∏–∫—É–º/–∫–æ–ª–ª–µ–¥–∂, –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç...", 
              "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, –≤—Ç–æ—Ä–Ω–∏–∫, —Å—Ä–µ–¥–∞...\n 21 –¥–µ–∫–∞–±—Ä—è 2019, 12 —è–Ω–≤–∞—Ä—è 2020...", 
              "2, -3.2, pi")
tibble(x = factor(types, levels = types),
       caption = factor(examples, levels = examples),
       y = 1.05) %>% 
  ggplot(aes(x, y, label = caption))+
  geom_text(hjust = 0)+
  geom_segment(aes(x=1, xend=4, y=1, yend=1), arrow = arrow(type = "open", ends = "both", length = unit(0.1, "inches"))) +
  ylim(1, 2)+
  theme_minimal()+
  coord_flip()+
  labs(x = "", y = "")+
  theme(axis.text.x = element_blank(), panel.grid.major = element_blank(), panel.grid.minor = element_blank())
```

–ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—Ä–µ–º—è -- –ø—Ä–æ—Å—Ç–æ –æ–±—ã—á–Ω–∞—è —á–∏—Å–ª–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Å–µ –æ–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–∂–µ–Ω–∏—è –≤—ã—á–∏—Ç–∞–Ω–∏—è –∏ —Ç. –ø. –û–¥–Ω–∞–∫–æ —Å—Ç–æ–∏—Ç –¥–µ—Ä–∂–∞—Ç—å –≤ –≥–æ–ª–æ–≤–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–∫—Ç–æ–≤:

* –ù–µ –∫–∞–∂–¥—ã–π –≥–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç 365 –¥–Ω–µ–π. –°—É—â–µ—Å—Ç–≤—É—é—Ç –≤–∏—Å–æ–∫–æ—Å–Ω—ã–µ –≥–æ–¥–∞.
* –ù–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–æ–¥–µ—Ä–∂–∏—Ç 24 —á–∞—Å–∞. –í–æ –º–Ω–æ–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–µ—Ç–Ω–µ–µ –∏ –∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è.
* –ù–µ –≤ –∫–∞–∂–¥–æ–π –º–∏–Ω—É—Ç–µ 60 —Å–µ–∫—É–Ω–¥. –°—É—â–µ—Å—Ç–≤—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ–∫—É–Ω–¥–∞, –∫–æ—Ç–æ—Ä—É—é –¥–æ–±–∞–≤–ª—è—é—Ç —á—Ç–æ–±—ã –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –≤–æ –≤—Ä–∞—â–µ–Ω–∏–∏ –∑–µ–º–ª–∏ (—Ç–æ–≥–¥–∞ –ø–æ—Å–ª–µ —Å–µ–∫—É–Ω–¥—ã 23:59:59 –∏–¥–µ—Ç —Å–µ–∫—É–Ω–¥–∞ 23:59:60).

–í—Å–µ —ç—Ç–æ –º–µ–ª–æ—á–∏ —É—á—Ç–µ–Ω—ã –≤ –ø–∞–∫–µ—Ç–µ lubridate, —Å–æ–∑–¥–∞–Ω–Ω–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤ R ([https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf](cheatsheet), —Ç—É—Ç–æ—Ä–∏–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω [–∑–¥–µ—Å—å](https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html) –∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ `vignette("lubridate")`). –ü–µ—Ä–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏–∑—É—á–∏—Ç—å:

```{r}
library(lubridate)
today()
now()
```

–ö–∞–∫ –≤–∏–¥–Ω–æ, –∏–∑ —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ R –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å –¥–∞—Ç–∞–º–∏, —Ç–∞–∫ –∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º. –í –∫–∞—á–µ—Å—Ç–≤–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç `flights` –∏–∑ –ø–∞–∫–µ—Ç–∞ `nycflights13`, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–µ—Ç–æ–≤ –∏–∑ –ù—å—é –ô–æ—Ä–∫–∞ –≤ 2013 –≥–æ–¥–∞.

```{r}
library(nycflights13)
flights
```

## –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—Ç—ã

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å –¥–∞—Ç—É --- —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ –ø—Ä–æ—Å—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å `y` (year), `m` (month) –∏ `d` (day) –≤ –∫–æ–º–∞–Ω–¥–µ:
```{r}
ymd("2020-01-21")
ymd("20-01-21")
ymd("20.01.21")
ymd("20/01/21")
ymd("200121")
mdy("January 21st, 2020")
dmy("21-Jan-2020")
```

–ö–æ–º–∞–Ω–¥—ã –ø–æ–Ω–∏–º–∞—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (—Ö–æ—Ç—å –∏ —Å —Ç—Ä—É–¥–æ–º):
```{r}
dmy("21 —è–Ω–≤ 2020", locale = "ru_RU.UTF-8")
dmy("21 —è–Ω–≤. 2020", locale = "ru_RU.UTF-8")
dmy("21 —è–Ω 2020", locale = "ru_RU.UTF-8")
dmy("21 —è–Ω–≤–∞ 2020", locale = "ru_RU.UTF-8")
dmy("21 —è–Ω–≤–∞—Ä—è 2020", locale = "ru_RU.UTF-8")
dmy("21 —è–Ω–≤–∞—Ä—å 2020", locale = "ru_RU.UTF-8")
dmy("21 –Ø–Ω–≤–∞—Ä—å 2020", locale = "ru_RU.UTF-8")
```

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–¥–µ–ª–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ `h`, `m`, `s`:
```{r}
hms("20:01:02")
hm("20.01")
ms("23:59")
```

–¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∫–æ–º–∞–Ω–¥–∞ `make_datetime()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –¥–∞—Ç—É –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
```{r}
flights %>% 
  mutate(departure = make_datetime(year, month, day, hour, minute)) %>% 
  select(departure)
```

## –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–∞—Ç—ã

–î–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ `year()`, `month()`, `week()` (–Ω–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏ –≤ –≥–æ–¥—É), `mday()` (day of the month), `wday()` (–Ω–æ–º–µ—Ä –¥–Ω—è –≤ –Ω–µ–¥–µ–ª–µ), `yday()` (–Ω–æ–º–µ—Ä –¥–Ω—è –≤ –≥–æ–¥—É), `hour()`, `minute()` –∏ `second()`:

```{r, include=FALSE}
Sys.setlocale("LC_ALL", "en_US.UTF-8")
```

```{r}
date_example <- flights$time_hour[1]
date_example
year(date_example)
month(date_example)
month(date_example, label = TRUE)
month(date_example, label = TRUE, abbr = FALSE)
month(date_example, label = TRUE, locale = "ru_RU.UTF-8")
week(date_example)
mday(date_example)
wday(date_example)
wday(date_example, label = TRUE)
wday(date_example, label = TRUE, abbr = FALSE)
wday(date_example, label = TRUE, locale = "ru_RU.UTF-8")
yday(date_example)
hour(date_example)
minute(date_example)
second(date_example)
```

–¢–∞–∫ –∂–µ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `leap_year()`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–æ–±—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≥–æ–¥ –≤–∏—Å–æ–∫–æ—Å–Ω—ã–º:
```{r}
leap_year(2019)
leap_year(2020)
```

```{block, type = "rmdtask"}
–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–µ—Ç–æ–≤ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ `flights` –ø–∞–∫–µ—Ç–∞ `nycflights13`.
```

```{r, echo = FALSE}
flights %>% 
  mutate(week_day = wday(time_hour, label = TRUE)) %>% 
  ggplot(aes(week_day))+
  geom_bar()+
  labs(x = "", caption = "–¥–∞–Ω–Ω—ã–µ –∏–∑ RITA, Bureau of transportation statistics")
```

## –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞—Ç–∞–º–∏

–ï—Å–ª–∏ –≤–∑—è—Ç—å –¥–≤–µ –¥–∞—Ç—ã, —Ç–æ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –Ω–∏–º–∏ –∏ —Ç. –ø.:

```{r}
ymd("2020-01-21") - ymd("2020-01-19")
ymd("2020-01-19") - ymd("2020-01-21")
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:
```{r, message=FALSE}
hm("21:00") - hm("18:10")
```

–í–∏–¥–∏–º–æ, –ø–æ—á–µ–º—É-—Ç–æ –≤ —Ç–∞–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å —á–∞—Å–∞–º–∏, –º–∏–Ω—É—Ç–∞–º–∏, –∏ —Å–µ–∫—É–Ω–¥–∞–º–∏, —Ç–∞–∫ —á—Ç–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –º–∏–Ω—É—Ç—ã. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞—Ç—ã, —Ç–æ —ç—Ç–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –Ω–µ—Ç:
```{r}
ymd_hm("2020-01-21, 21:00") - ymd_hm("2020-01-21, 18:10")
ymd_hm("2020-01-21, 21:00") - hm("18:10")
```

–¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è `difftime()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –µ–¥–∏–Ω–∏—Ü—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–¥–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```{r}
difftime(ymd_hm("2020-01-21, 21:00"), ymd_hm("2020-01-21, 18:10"), units = "mins")
difftime(ymd_hm("2020-01-21, 21:00"), ymd_hm("2020-01-21, 18:10"), units = "hours")
```

```{block, type = "rmdtask"}
–£ –º–µ–Ω—è –µ—Å—Ç—å —à–µ–Ω–≥–µ–Ω—Å–∫–∞—è –º—É–ª—å—Ç–∏–≤–∏–∑–∞ –Ω–∞ 90 –¥–Ω–µ–π. –Ø —Å–æ–≤–µ—Ä—à–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–µ–∑–¥–æ–∫ –≤ –ï–≤—Ä–æ–ø—É –∏ –∑–∞–ø–∏—Å–∞–ª –∏—Ö –≤ [—ç—Ç–æ—Ç –¥–∞—Ç–∞—Å–µ—Ç](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/visa_question.csv). –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —è –µ—â–µ –º–æ–≥—É –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ï–≤—Ä–æ—Å–æ—é–∑–µ?
```

```{r, include=FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/visa_question.csv") %>% 
  mutate_all(dmy) %>% 
  summarise(diff = sum(to-from))
# 42
```

–û–¥–Ω–∞–∫–æ –ø—Ä–æ—Å—Ç—ã–µ –¥–∞—Ç—ã, –Ω–µ —è–≤–ª—è—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ—Ç—Ä–µ–∑–∫–∞–º–∏, —Ç–∞–∫ —á—Ç–æ –∏—Ö –Ω–µ–ª—å–∑—è —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å, –≤—ã—á–∏—Ç–∞—Ç—å, —É–º–Ω–æ–∂–∞—Ç—å –∏ —Ç. –¥. –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ `lubridate` –≤–≤–æ–¥–∏—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—É—â–Ω–æ—Å—Ç–µ–π:

* **periods** --- –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏, —Å—Ä–∞–∑—É –ø—Ä–∏–±–∞–≤–ª—è—è 1 –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —Ä–∞–∑—Ä—è–¥—É, –≤–≤–æ–¥—è—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `years()`, `months()`, `weeks()`, `days()`, `hours()`, `minutes()`, `seconds()`, `period()`
* **duration** --- –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–µ —É—á–∏—Ç—ã–≤–∞—é—Ç –Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏, –¥–æ–±–∞–≤–ª—è—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–∏—Ü—ã, –≤–≤–æ–¥—è—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `dyears()`, `dweeks()`, `ddays()`, `dhours()`, `dminutes()`, `dseconds()`, `duration()`

![](images/11-periods-durations.png)

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:

* –≤–∏—Å–æ–∫–æ—Å–Ω—ã–π –≥–æ–¥
```{r}
ymd("2019-03-01")+years(1)
ymd("2019-03-01")+dyears(1)
```

* –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–µ—Ç–Ω–µ–µ –≤—Ä–µ–º—è
```{r}
ymd_hms("2020-03-07 13:00:00", tz = "America/New_York") + days(1)
ymd_hms("2020-03-07 13:00:00", tz = "America/New_York") + ddays(1)
```

* –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è
```{r}
ymd_hms("2020-10-31 13:00:00", tz = "America/New_York") + days(1)
ymd_hms("2020-10-31 13:00:00", tz = "America/New_York") + ddays(1)
```

–ü–æ—Å–ª–µ–¥–Ω—è—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –¥–∞—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—É—é –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º --- –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ:

* `floor_date()` --- –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤ –º–µ–Ω—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É
* `round_date()` --- –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ
* `ceiling_date()` --- –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤ –±–æ–ª—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É

![](images/11-rounding.png)

```{r}
floor_date(ymd("2020-01-16"), unit = "month")
round_date(ymd("2020-01-16"), unit = "month")
round_date(ymd("2020-01-17"), unit = "month")
ceiling_date(ymd("2020-01-16"), unit = "month")
ceiling_date(ymd("2020-01-16"), unit = "year")
```

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏: –¥–∞–Ω–Ω—ã–µ –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞

–ü–∞–∫–µ—Ç `tidyverse` –ø–æ–Ω–∏–º–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∏–ø–∞ –¥–∞—Ç–∞, –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –í–æ–∑—å–º–µ–º –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ [–¥–∞—Ç–∞—Å–µ—Ç](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/death_of_migrants_and_refugees_from_the_Unwelcomed_project.csv) –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ [The Unwelcomed](http://alhadaqa.com/2019/08/the_unwelcomed/) –ú–æ—Ö–∞–º–∞–¥–∞ –ê. –í—ç–π–∫–¥–∞ (Mohamad A. Waked), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Å—Ç–µ –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö —Å–º–µ—Ä—Ç–∏ –º–∏–≥—Ä–∞–Ω—Ç–æ–≤ –∏ –±–µ–∂–µ–Ω—Ü–µ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É —Å —è–Ω–≤–∞—Ä—è 2014 –≥–æ–¥–∞ –ø–æ –∏—é–Ω—å 2019 –≥–æ–¥–∞.

```{r, message=FALSE}
unwelcomed <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/death_of_migrants_and_refugees_from_the_Unwelcomed_project.csv")
unwelcomed %>% 
  mutate(date = dmy(date)) %>% 
  ggplot(aes(date, total_death_missing, color = collapsed_cause))+
  geom_point()+
  scale_y_log10()+
  labs(y = "number of death/missing")

unwelcomed %>% 
  mutate(date = dmy(date)) %>% 
  filter(date < dmy("1-1-2016")) %>% 
  ggplot(aes(date, total_death_missing, color = collapsed_cause))+
  geom_point()+
  scale_y_log10()+
  labs(y = "number of death/missing")
```

–û–¥–Ω–∞–∫–æ –∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º —Å–æ –≤—Ä–º–µ–Ω–µ–º –Ω–µ –≤—Å–µ–≥–¥–∞ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≥—Ä–∞—Ñ–∏–∫ —Å —Å–∞–π—Ç–∞ –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞ --- —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –Ω–µ–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–æ–¥–∏—Ç —Å–æ—Ü–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–≥—Ä–∞—Ñ–∏–∫ –≤–∑—è—Ç [–æ—Ç—Å—é–¥–∞](https://www.levada.ru/indikatory/otnoshenie-k-stranam/)):

![](images/11-levada.png)

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥, –≤ —ç—Ç–æ–º –≥—Ä–∞—Ñ–∏–∫–µ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ, –æ–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –ø—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è –∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Å–∞–π—Ç–µ –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞, –º–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, —á—Ç–æ –Ω–∞ –∏–¥—É—â–∏–µ –ø–æ–¥—Ä—è–¥ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, 05.2014, 07.2014, 11.2014. –í–æ—Ç [–∑–¥–µ—Å—å](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/2019.01_levada_countries.csv) –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Å—Ç—Ä–æ–∏–ª—Å—è —ç—Ç–æ—Ç –≥—Ä–∞—Ñ–∏–∫. –í–æ—Ç –∫–∞–∫ –æ–Ω –≤—ã–≥–ª—è–¥–∏—Ç, –µ—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∫–∞–∫ –≤—Ä–µ–º—è

```{r, warning=FALSE,message=FALSE}
levada <- read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/2019.01_levada_countries.csv")
levada %>% 
  mutate(date = str_c("1-", date),
         date = dmy(date)) %>% 
  filter(towards == "USA") %>% 
  pivot_longer(names_to = "answer", values_to = "number", good:bad) %>% 
  ggplot(aes(date, number, color = answer))+
  geom_line()+
  labs(x = "", y = "", caption = "–¥–∞–Ω–Ω—ã–µ –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞")+
  scale_y_continuous(limits = c(0, 100))+
  theme(legend.position = c(0.1, 0.9), legend.title = element_blank())
```

–ù–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–ª–∏—Å—å –æ–ø—Ä–æ—Å—ã: –≤ –Ω–∞—á–∞–ª–µ 90-—ã—Ö –æ–ø—Ä–æ—Å—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏—Å—å —Ä–µ–∂–µ, –ø–æ—Ç–æ–º —á–∞—Å—Ç–æ, –ø–æ—Ç–æ–º –≤ —Ä–∞–π–æ–Ω–µ 2010 –≥–æ–¥–∞ –±—ã–ª –ø–µ—Ä–µ—Ä—ã–≤. –ì—Ä–∞—Ñ–∏–∫ –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞ –º–æ–∂–Ω–æ –æ–ø—Ä–∞–≤–¥–∞—Ç—å —Ç–µ–º, —á—Ç–æ –æ–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –∑–∞–º–µ—Ä–∞ –∫ –∑–∞–º–µ—Ä—É, —Ç–∞–∫ —á—Ç–æ –ø–æ –æ—Å–∏ x –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–∞–∫ –±—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ `–∑–∞–º–µ—Ä 05.2014`, `–∑–∞–º–µ—Ä 07.2014`, `–∑–∞–º–µ—Ä 11.2014` –∏ —Ç. –¥. –û–¥–Ω–∞–∫–æ —ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ –∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞.

```{block, type = "rmdtask"}
–ò—Å–ø–æ–ª—å–∑—É—è –≤–µ—Å—å –¥–∞—Ç–∞—Å–µ—Ç –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞, –ø–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –≥—Ä–∞—Ñ–∏–∫.
```

```{r, echo=FALSE, warning=FALSE}
levada %>% 
  mutate(date = str_c("1-", date),
         date = dmy(date)) %>% 
  pivot_longer(names_to = "answer", values_to = "number", good:no_answer) %>% 
  ggplot(aes(date, number, color = answer))+
  geom_line()+
  labs(x = "", y = "", caption = "–¥–∞–Ω–Ω—ã–µ –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞")+
  scale_y_continuous(limits = c(0, 100))+
  theme(legend.position = "bottom", legend.title = element_blank())+
  facet_wrap(~towards, scales = "free")
```

<!--chapter:end:10-lubridate.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞: `rvest`

```{r, message=FALSE}
library(tidyverse)
```

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ö–æ–¥—è—Ç —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –≤ –≥–æ—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã `.csv` –∏–ª–∏ `.json`. –ò–Ω–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ –Ω–∞ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–±–ª–∏—Ü—ã –õ–µ–≤–∞–¥–∞-—Ü–µ–Ω—Ç—Ä–∞ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–Ω—è—Ç–∏—è). –ê –∏–Ω–æ–≥–¥–∞ –Ω–∏–∫—Ç–æ –∏ –Ω–µ –¥—É–º–∞–ª, —á—Ç–æ —á—Ç–æ-—Ç–æ —Å—Ç–∞–Ω–µ—Ç –¥–∞–Ω–Ω—ã–º–∏: –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–∫—Å—Ç—ã –Ω–æ–≤–æ—Å—Ç–µ–π, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Ç–≤–∏—Ç—ã –∏ —Ç. –ø. –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –æ–±—Å—É–¥–∏–º –æ—Å–Ω–æ–≤—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–µ–±—Å—Ç—Ä–∞–Ω–∏—Ü.

## –í–≤–µ–¥–µ–Ω–∏–µ

–õ—é–±–∞—è `html`-–¥–æ–∫—É–º–µ–Ω—Ç --- —ç—Ç–æ –æ–±—ã—á–Ω—ã–π xml —Ñ–∞–π–ª. –û–±—ã—á–Ω–æ —Å–∞–º—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–∑–µ–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `html`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –¥–≤–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–∞ `head` –∏ `body`. –ö–∞–∂–¥—ã–π html-–¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —á—Ç–æ –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –Ω—É–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å, –Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –º—ã –º–æ–∂–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –±—Ä–∞—É–∑–µ—Ä–æ–≤ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à `Ctrl+U`, –≤ Apple Safari --- `Cmd+Option+U`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ –µ—Å—Ç—å —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –Ω–∞–≤–æ–¥–∏—Ç—å –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ —É–∑–Ω–∞–≤–∞—Ç—å –∫–∞–∫–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ –µ–º—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç (—ç—Ç–æ—Ç —Ä–µ–∂–∏–º –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å, –Ω–∞–∂–∞–≤ `F12` –∏–ª–∏ `Ctrl+Shift+I`, –≤ Apple Safari –≤—Ä–æ–¥–µ –Ω–µ—Ç –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à –∏ –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∫–∞–∫-—Ç–æ –∏–∑ –º–µ–Ω—é). –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —É–∑–ª–æ–≤ `html`-–¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ—Å—Ç–æ—è—Ç –∏–∑

* —Ç–µ–≥ —É–∑–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `p`
* –∑–Ω–∞—á–µ–Ω–∏—è —É–∑–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `–ñ–∏–ª–∏-–±—ã–ª–∏ —Ç—Ä–∏ –º–µ–¥–≤–µ–¥—è.`
* `id` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ `html`-–¥–æ–∫—É–º–µ–Ω—Ç–µ), `class` (–Ω–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ `html`-–¥–æ–∫—É–º–µ–Ω—Ç–µ) –∏ –¥—Ä—É–≥–∏–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã —É–∑–ª–∞

–ù–∞–ø—Ä–∏–º–µ—Ä:

```
<p class="story" some_atribute = 42>–ñ–∏–ª–∏-–±—ã–ª–∏ —Ç—Ä–∏ –º–µ–¥–≤–µ–¥—è.</p>
```

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ `html`-–¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ JavaScript'–∞. –≠—Ç–æ –¥–∏–Ω–∞–º–∏—á–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç–æ–π, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∏—à—å –≤–∏–¥–∏—Ç, –∫–∞–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∞ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≤—è–∑–∞–Ω–∞ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å–æ–±–∏—Ä–∞—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º —Ö–≤–∞—Ç–∏—Ç –ø–∞–∫–µ—Ç–∞ `rvest`. C –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Å–∞–π—Ç–∞–º–∏ –≤—Å–µ –∏–Ω–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–∂–Ω–µ–µ. –ò–Ω–æ–≥–¥–∞ –Ω–∞ –¥–∏–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö, –ø–æ—Å–º–æ—Ç—Ä–µ–≤ –≤–∫–ª–∞–¥–∫—É `Network` –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–≤–µ–¥—å –æ—Ç–∫—É–¥–∞-—Ç–æ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –ø—Ä–∞–≤–¥–∞?). –ò–Ω–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–µ–ª–∞—Ç—å `POST` –∏ `GET` –∑–∞–ø—Ä–æ—Å—ã, —Ö—Ä–∞–Ω–∏—Ç—å cookies, –∏ —Ç. –ø. --- –≤—Å–µ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–∞–∫–µ—Ç–∞ [`httr`](https://cran.r-project.org/web/packages/httr/vignettes/quickstart.html), –∞ –≤ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (–∫–æ–≥–¥–∞ JavaScript JavaScript –ø–æ–≥–æ–Ω—è–µ—Ç) –ø–æ–º–æ–∂–µ—Ç –ø–∞–∫–µ—Ç [`RSelenium`](https://docs.ropensci.org/RSelenium/).

## –†–∞–±–æ—Ç–∞ —Å –ø–∞–∫–µ—Ç–æ–º `rvest`

[–ü–∞–∫–µ—Ç `rvest`](http://rvest.tidyverse.org/index.html) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ø–æ—Ç–æ–º –∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å. –í–∫–ª—é—á–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É:

```{r}
library(rvest)
```

### –ü—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π

–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–∞–π—Ç –¶–µ–Ω—Ç—Ä–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –ù–ò–£ –í–®–≠:

```{r}
source <- read_html("https://hum.hse.ru/digital")
```

–û–±—ä–µ–∫—Ç `source` —è–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç `html`-—Å—Ç—Ä–∞–Ω–∏—Ü—É. –î–∞–≤–∞–π—Ç–µ –¥–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ –º—ã —Ö–æ—Ç–µ–º —Å–∫–∞—á–∞—Ç—å –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π, —Ç. –µ. –Ω–∞–º –Ω—É–∂–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö —É–∑–ª–æ `h2`. –§—É–Ω–∫—Ü–∏—è `html_nodes()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—á–ª–µ–Ω–∏—Ç—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —É–∑–ª—ã —Å –∫–∞–∫–∏–º-—Ç–æ —Ç–µ–≥–æ–º –∏–∑ –≤—Å–µ–≥–æ `xml`-—Ñ–∞–π–ª–∞.

```{r}
source %>% 
  html_nodes("h2")
```

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º —ç—Ç–∏—Ö —É–∑–ª–æ–≤, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `html_text()`

```{r}
source %>% 
  html_nodes("h2") %>% 
  html_text()
```

–ï—Å–ª–∏ –º—ã –æ—Ç–∫—Ä–æ–µ–º –ø—Ä–µ–≤—å—é —É–∑–ª–∞ `h2` (–∫–æ–º–∞–Ω–¥–∞ `View()`), —Ç–æ –º—ã —É–≤–∏–¥–∏–º —á—Ç–æ-—Ç–æ —Ç–∞–∫–æ–µ:

![](images/12_title_preview.png)

–≠—Ç–∞ —Å—Ö–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π —É–∑–µ–ª `h2` —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∑–µ–ª `a` –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–∏ –∞—Ç—Ä–∏–±—É—Ç–∞: `title` –∏ `href`. –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–Ω–∞–∫–æ–º `>`, –∞ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º –º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `html_attr()`:

```{r}
source %>% 
  html_nodes("h2 > a") %>% 
  html_attr("title") ->
  titles

source %>% 
  html_nodes("h2 > a") %>% 
  html_attr("href") ->
  links

tibble(titles, links)
```

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø–æ–ª—É—á–∏–≤—à–µ–π—Å—è —Ç–∞–±–ª–∏—Ü—ã, –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–∞–π—Ç–∞ –≤—Å–µ–≥–æ 10 –Ω–æ–≤–æ—Å—Ç–µ–π. –ê —á—Ç–æ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º —Å–∫–∞—á–∞—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏? –ò—Å—Å–ª–µ–¥–æ–≤–∞–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¶–µ–Ω—Ç—Ä–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –≤—Å–µ –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–µ–Ω–µ—Ä—è—Ç—Å—è –ø–æ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω—É: 

* <https://hum.hse.ru/digital/news/page2.html>
* <https://hum.hse.ru/digital/news/page3.html>
* ...
* <https://hum.hse.ru/digital/news/page6.html>
* –∏ –¥–∞–∂–µ –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –º—ã –ø–æ–ø–∞–ª–∏ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–º—É –∞–¥—Ä–µ—Å—É <hum.hse.ru/digital>, –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–æ–ø–∞—Å—Ç—å –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É <https://hum.hse.ru/digital/news/page1.html>

–°–≥–µ–Ω–µ—Ä–∏–º —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü:
```{r}
str_c("https://hum.hse.ru/digital/news/page", 1:6, ".html")
```

–ê —Ç–µ–ø–µ—Ä—å —Å–¥–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Ö–æ–¥–∏—Ç –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –∏ –≤—Å–µ —Å–æ–±–∏—Ä–∞–µ—Ç
```{r, cache=TRUE}
map_dfr(str_c("https://hum.hse.ru/digital/news/page", 1:6, ".html"), function(x){
  source <- read_html(x)  
  
  source %>% 
    html_nodes("h2 > a") %>% 
    html_attr("title") ->
    titles
  
  source %>% 
    html_nodes("h2 > a") %>% 
    html_attr("href") ->
    links
  
  tibble(titles, links)
}) ->
  df_news

df_news
```

```{block, type = "rmdtask"}
–°–æ–∑–¥–∞–π—Ç–µ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–∏ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã [–ú–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã ¬´–¶–∏—Ñ—Ä–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –Ω–∞—É–∫–∞—Ö¬ª](https://www.hse.ru/ma/dh).
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ `class`

–î–æ–ø—É—Å—Ç–∏–º, –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¶–µ–Ω—Ç—Ä–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π. –ò—Å—Å–ª–µ–¥–æ–≤–∞–≤ —Å–∞–π—Ç, –ª–µ–≥–∫–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, —á—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–µ–≥–µ `span`. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –º—ã –ø–æ–ø—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏—à—å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Ç–æ –º—ã –ø–æ–ª—É—á–∏–º –º–Ω–æ–≥–æ –ª–∏—à–Ω–µ–≥–æ:

```{r}
source %>% 
  html_nodes("span") %>% 
  html_text() %>% 
  head(20)
```

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ–≥ `span` –∏–º–µ–µ—Ç—Å—è —É –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –ø—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –Ω–∞—Ö–æ–¥–∏–º –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

![](images/12_developer_mode.png)

–ï—Å–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–¥, —Ç–æ –º—ã —É–≤–∏–¥–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:

```{html}
...
<span class="post__date"> 17 –¥–µ–∫–∞–±—Ä—è, 2019 –≥.</span>
...
```

–ß—Ç–æ–±—ã –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç–∞–∫–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—á–∫—É:

```{r}
source %>% 
  html_nodes("span.post__date") %>% 
  html_text()
```

–ü–æ—á–∏—Å—Ç–∏–º:
```{r}
source %>% 
  html_nodes("span.post__date") %>% 
  html_text() %>% 
  str_remove_all("\\n|\\t")
```

```{block, type = "rmdtask"}
–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –¶–µ–Ω—Ç—Ä–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –∑–∞ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü.
```

```{r, echo = FALSE, message=FALSE, cache=TRUE}
library(lubridate)
map_dfr(str_c("https://hum.hse.ru/digital/news/page", 1:6, ".html"), function(x){
  source <- read_html(x)  
  
  source %>% 
    html_nodes("h2 > a") %>% 
    html_attr("title") ->
    titles
  
  source %>% 
    html_nodes("h2 > a") %>% 
    html_attr("href") ->
    links
  
  source %>% 
    html_nodes("span.post__date") %>% 
    html_text() %>% 
    str_remove_all("\\n|\\t") ->
    date
  
  tibble(titles, links, date)
}) ->
  with_dates
  
with_dates %>% 
  mutate(date = lubridate::dmy(date, locale = "ru_RU.UTF-8"), 
         date = make_datetime(year = year(date),
                              month = month(date),
                              day = 1)) %>% 
  count(date) %>% 
  ggplot(aes(date, n))+
  geom_col()+
  scale_y_continuous(breaks = 0:12)+
  labs(x = "", y = "", 
       title = "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –¶–µ–Ω—Ç—Ä–∞ –¶–ì–ò –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü", 
       caption = "–¥–∞–Ω–Ω—ã–µ —Å —Å–∞–π—Ç–∞ https://hum.hse.ru/digital")
```

### –ß—Ç–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

–¢–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ `html`-—Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–∂–Ω–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞–∫ —Ç–∞–±–ª–∏—Ü—ã (–∞, –Ω–µ –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—Ç—Ä–æ—á–Ω–æ). –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–∫–ª–∞–¥–∫—É "–ß–∏—Å–ª–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –≤–∞–∫–∞–Ω—Ç–Ω—ã–µ –º–µ—Å—Ç–∞" –Ω–∞ —Å–∞–π—Ç–µ –ú–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã ¬´–¶–∏—Ñ—Ä–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –Ω–∞—É–∫–∞—Ö¬ª:

```{r}
source <- read_html("https://www.hse.ru/ma/dh/vacant")

source %>% 
  html_node("table") %>% 
  html_table()
```

–§—É–Ω–∫—Ü–∏—è `html_node()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—É—é —Ç–∞–±–ª–∏—Ü—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é `html_nodes()`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –≤—Å–µ —É–∑–ª—ã —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏:

```{r}
source %>% 
  html_nodes("table") %>% 
  html_table() ->
  l
str(l)
```

–ü–æ–ª—É—á–∏–ª—Å—è —Å–ø–∏—Å–æ–∫ (–æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `list`), –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –¢–∞–∫ —á—Ç–æ, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é —Å–ø–∏—Å–∫–æ–≤:

```{r}
l[[1]]
```


### –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–µ—Ç—ã

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—Å—É—Ä—Å—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞—Ç—å –∏–∑ –Ω–∏—Ö –¥–∞–Ω–Ω—ã–µ. –û–±—ã—á–Ω–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–¥–∏—Ç, —á—Ç–æ —Å –∫–∞–∫–æ–≥–æ-—Ç–æ IP –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø, –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ DDoS –∞—Ç–∞–∫—É. –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–¥–∞–µ—Ç –≤–∞–º –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ—Ç–¥–∞–µ—Ç, –Ω–æ —Ä–∞–∑ –≤ –∫–∞–∫–æ–π-—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫, —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –æ–∂–∏–¥–∞–Ω–∏–µ (–∫–æ–º–∞–Ω–¥–∞ `Sys.sleep()`). –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∞–π—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –í–∏–∫–∏–ø–µ–¥–∏—è, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –ª—é–¥–∏ –Ω–µ –ø—ã—Ç–∞–ª–∏—Å—å –µ–µ –æ–±–∫–∞—á–∞—Ç—å: [–≤–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞](https://en.wikipedia.org/wiki/Wikipedia:Database_download), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —ç—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ.

<!--chapter:end:11-rvest.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---

–í–æ—Ç cheatsheet –ø–æ [—Ç–µ–æ—Ä–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏](https://github.com/wzchen/probability_cheatsheet/raw/master/probability_cheatsheet.pdf).

# –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

```{r, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
theme_set(theme_bw())
```


```{r}
library(tidyverse)
```

–ú—ã –æ–±—Å—É–∂–¥–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

```{r,echo=FALSE}
types <- c("–∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ", "–ø–æ—Ä—è–¥–∫–æ–≤—ã–µ", "–≤—Ä–µ–º—è", "—á–∏—Å–ª–æ–≤—ã–µ")
examples <- c("–≥–æ–ª—É–±—ã–µ –≥–ª–∞–∑–∞, –∫–∞—Ä–∏–µ –≥–ª–∞–∑–∞, –∑–µ–ª–µ–Ω—ã–µ –≥–ª–∞–∑–∞...", 
              "–º–ª–∞–¥—à–∞—è —à–∫–æ–ª–∞, —Å—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞, —Ç–µ—Ö–Ω–∏–∫—É–º/–∫–æ–ª–ª–µ–¥–∂, –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç...", 
              "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, –≤—Ç–æ—Ä–Ω–∏–∫, —Å—Ä–µ–¥–∞...\n 21 –¥–µ–∫–∞–±—Ä—è 2019, 12 —è–Ω–≤–∞—Ä—è 2020...", 
              "2, -3.2, pi")
tibble(x = factor(types, levels = types),
       caption = factor(examples, levels = examples),
       y = 1.05) %>% 
  ggplot(aes(x, y, label = caption))+
  geom_text(hjust = 0)+
  geom_segment(aes(x=1, xend=4, y=1, yend=1), arrow = arrow(type = "open", ends = "both", length = unit(0.1, "inches"))) +
  ylim(1, 2)+
  theme_minimal()+
  coord_flip()+
  labs(x = "", y = "")+
  theme(axis.text.x = element_blank(), panel.grid.major = element_blank(), panel.grid.minor = element_blank())
```

–í –¥–∞–Ω–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏ –º—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –∏ —á–∏—Å–ª–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

## –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ --- —ç—Ç–æ –æ–±—â–∏–π —Ç–µ—Ä–º–∏–Ω, –≤ –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞—é—Ç –ø–æ–Ω—è—Ç–∏—è –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –æ—Ü–µ–Ω–∏—Ç—å —Ç—Ä–µ–Ω–¥ –≤ –¥–∞–Ω–Ω—ã—Ö.

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–î–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ –Ω–µ —Ç–∞–∫ –º–Ω–æ–≥–æ:

* –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
* —á–∞—Å—Ç–æ—Ç—ã
* —ç–Ω—Ç—Ä–æ–ø–∏—è

–í–æ–∑—å–º–µ–º –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç `starwars`. –ú—ã –ª–µ–≥–∫–æ –º–æ–∂–µ–º –ø–æ—Å—á–∏—Ç–∞—Ç—å **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** —Å—É—â–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω—ã—Ö —Ä–∞—Å—Å:

```{r}
starwars %>% 
  count(species, sort = TRUE)
```

–ú—ã —Ç–∞–∫–∂–µ –ª–µ–≥–∫–æ –º–æ–∂–µ–º –ø–æ—Å—á–∏—Ç–∞—Ç—å **–¥–æ–ª—é** —Å—É—â–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω—ã—Ö —Ä–∞—Å—Å:

```{r}
starwars %>% 
  count(species, sort = TRUE) %>% 
  mutate(ratio = n/sum(n))
```

–î–æ–ª—é –ª–µ–≥–∫–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ **–ø—Ä–æ—Ü–µ–Ω—Ç—ã**:

```{r}
starwars %>% 
  count(species, sort = TRUE) %>% 
  mutate(ratio = n/sum(n)*100)
```

–ú—ã —Ç–∞–∫–∂–µ –ª–µ–≥–∫–æ –º–æ–∂–µ–º –ø–æ—Å—á–∏—Ç–∞—Ç—å **—ç–Ω—Ç—Ä–æ–ø–∏—é**. –í —Ç–æ–º –≤–∏–¥–µ, –∫–∞–∫ –µ–µ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–ª –ö–ª–æ–¥ –®–µ–Ω–Ω–æ–Ω, —Ñ–æ—Ä–º—É–ª–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

$$H_b = -\sum_{i=1}^n p_i\times\log_2(p_i),\ –≥–¥–µ$$

* $H_b$ --- —ç–Ω—Ç—Ä–æ–ø–∏—è
* $p_i$ --- –¥–æ–ª—è $i$-—Ç–æ–≥–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –∏—Å—Ö–æ–¥–∞ –∏–∑ –≤—Å–µ—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏—Å—Ö–æ–¥–æ–≤

```{r}
starwars %>% 
  count(species, sort = TRUE) %>% 
  mutate(ratio = n/sum(n)) %>% 
  summarise(entropy = -sum(ratio*log2(ratio)))
```

–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–∞ –º–µ—Ä–∞? –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π —Ç–∏–±–±–ª:

```{r}
tibble(x = c("a", "a", "a", "a", "a", "a", "a", "a", "a", "a", "a", "b", "a", "b", "b", "c", "a", "a"),
       group = rep(c("first", "second", "third"), each = 6),
       id = rep(1:6, 3)) %>% 
  pivot_wider(names_from = group, values_from = x)
```

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å—á–∏—Ç–∞–µ–º —ç–Ω—Ç—Ä–æ–ø–∏—é –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã:
```{r}
tibble(x = c("a", "a", "a", "a", "a", "a", "a", "a", "a", "a", "a", "b", "a", "b", "b", "c", "a", "a"),
       group = rep(c("first", "second", "third"), each = 6)) %>% 
  count(group, x, sort = TRUE) %>% 
  group_by(group) %>% 
  mutate(ratio = n/sum(n)) %>% 
  summarise(entropy = -sum(ratio*log2(ratio)))
```

–ö–∞–∫ –≤–∏–¥–Ω–æ, —á–µ–º –±–æ–ª–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–∞ –≥—Ä—É–ø–ø–∞, —Ç–µ–º –≤—ã—à–µ —ç–Ω—Ç—Ä–æ–ø–∏—è. –ü–æ—Å–º–æ—Ç—Ä–∏–º –µ—â–µ –Ω–∞ —Ç–∞–∫–æ–π —Ç–∏–±–ª:

```{r}
tibble(x = c("a", "a", "b", "a", "—Å", "a", "a", "b", "b", "c", "a", "a", "a", "b", "b", "c", "—Å", "a"),
       group = rep(c("first", "second", "third"), each = 6),
       id = rep(1:6, 3)) %>% 
  pivot_wider(names_from = group, values_from = x)
tibble(x = c("a", "a", "b", "a", "—Å", "a", "a", "b", "b", "c", "a", "a", "a", "b", "b", "c", "—Å", "a"),
       group = rep(c("first", "second", "third"), each = 6)) %>% 
  count(group, x, sort = TRUE) %>% 
  group_by(group) %>% 
  mutate(ratio = n/sum(n)) %>% 
  summarise(entropy = -sum(ratio*log2(ratio)))
```

–ö–∞–∫ –≤–∏–¥–Ω–æ, —á–µ–º "–æ–¥–Ω–æ—Ä–æ–¥–Ω–µ–µ" –≥—Ä—É–ø–ø—ã, —Ç–µ–º –≤—ã—à–µ —ç–Ω—Ç—Ä–æ–ø–∏—è.

```{block, type = "rmdtask"}
–í–ª–∏—è–µ—Ç –ª–∏ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –≤–µ–∫—Ç–æ—Ä–µ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–Ω—Ç—Ä–æ–ø–∏–∏?
```

```{r, echo = FALSE, results='asis'}
library(checkdown)
check_question(answer = "–Ω–µ—Ç", 
                   options = c("–¥–∞", "–Ω–µ—Ç"),
                   right = "–ø—Ä–∞–≤–∏–ª—å–Ω–æ", 
                   wrong = "—É –º–µ–Ω—è –¥—Ä—É–≥–æ–π –æ—Ç–≤–µ—Ç")
```

```{block, type = "rmdtask"}
–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–Ω—Ç—Ä–æ–ø–∏–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `clarity`, `color` –∏ `cut` –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ `diamonds`. –£ –∫–∞–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∑–Ω–∞—á–µ–Ω–∏–µ —ç–Ω—Ç—Ä–æ–ø–∏–∏ –Ω–∞–∏–±–æ–ª—å—à–µ–µ?
```

```{r, include = FALSE}
diamonds %>% 
  count(clarity, sort = TRUE) %>% 
  mutate(ratio = n/sum(n)) %>% 
  summarise(entropy = -sum(ratio*log2(ratio)))

diamonds %>% 
  count(color, sort = TRUE) %>% 
  mutate(ratio = n/sum(n)) %>% 
  summarise(entropy = -sum(ratio*log2(ratio)))

diamonds %>% 
  count(cut, sort = TRUE) %>% 
  mutate(ratio = n/sum(n)) %>% 
  summarise(entropy = -sum(ratio*log2(ratio)))
```

```{r, echo = FALSE, results='asis'}
check_question(answer = "color", 
                   options = c("clarity", "color", "cut"), 
                   right = "–ø—Ä–∞–≤–∏–ª—å–Ω–æ", 
                   wrong = "—É –º–µ–Ω—è –¥—Ä—É–≥–æ–π –æ—Ç–≤–µ—Ç")
```

### –ß–∏—Å–ª–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–î–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ü–µ–ª–æ–º –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ:

```{r}
diamonds %>% 
  summarise(mean = mean(price),
            median = median(price),
            quantile_0.5 = quantile(price, 0.5), # –∫–≤–∞–Ω—Ç–∏–ª—å
            quantile_0.25 = quantile(price, 0.25),
            quantile_0.1 = quantile(price, 0.1),
            min = min(price),
            max = max(price),
            var = var(price), # –¥–∏—Å–ø–µ—Ä—Å–∏—è
            sd = sd(price)) # c—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
```

–°–º–µ—â–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –≤—ã–±–æ—Ä–∫–∏ $X = {x_1, x_2, ..., x_n}$:

$$\sigma^2 = \frac{1}{n}\sum_{i = 1}^n(x_i - \mu)^2,\ –≥–¥–µ$$

* $x_i$ --- i-—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤—ã–±–æ—Ä–∫–∏ X
* $\mu$ --- —Å—Ä–µ–¥–Ω–µ–µ

–ù–µ—Å–º–µ—â–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –≤—ã–±–æ—Ä–∫–∏ $X = {x_1, x_2, ..., x_n}$:

$$\sigma^2 = \frac{1}{n-1}\sum_{i = 1}^n(x_i - \mu)^2$$

–í–æ—Ç [—Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ](https://www.youtube.com/watch?v=Cn0skMJ2F3c&feature=youtu.be), –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è, –ø–æ—á–µ–º—É –ø–µ—Ä–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–º–µ—â–µ–Ω–Ω–∞—è.

## –û—Ç —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏ –∫ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
–í–æ–∑—å–º–µ–º –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –ø—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π –¥–≤—É—Ö –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏—Ö –∏—Å—Ö–æ–¥–æ–≤.

```{block, type = "rmdtask"}
–ö–∞–∫–∞—è –¥–æ–ª—è –∏–º–µ–Ω –≥–µ—Ä–æ–µ–≤ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ `starwars` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ –±—É–∫–≤—É `B`? –û—Ç–≤–µ—Ç –æ–∫—Ä—É–≥–ª–∏—Ç–µ –¥–æ 3 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.
```

```{r, echo = FALSE, results='asis'}
check_question(answer = 0.103, 
               right = "–ø—Ä–∞–≤–∏–ª—å–Ω–æ", 
               wrong = "—É –º–µ–Ω—è –¥—Ä—É–≥–æ–π –æ—Ç–≤–µ—Ç")
```

–ú—ã –ø–æ–ª—É—á–∏–ª–∏ —Ç–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ 9 —É—Å–ø–µ—Ö–æ–≤ –∏–∑ 87 –Ω–∞–±–ª—é–¥–µ–Ω–∏–π. –ù–æ, —á—Ç–æ –µ—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—â–µ —á–µ–≥–æ-—Ç–æ –Ω–∞—Å–Ω–∏–º–∞—é—Ç? –ö–∞–∫–æ–≤–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –≤ –Ω–æ–≤–æ–º —Ñ–∏–ª—å–º–µ –±—É–¥–µ—Ç –≥–µ—Ä–æ–π –Ω–∞ "B", –µ—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ —Å–æ–∑–¥–∞—Ç–µ–ª–∏ —Å—Ç–∞—Ä–∞—é—Ç—Å—è –¥–µ—Ä–∂–∞—Ç—å —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ? 0.103? –ù–æ –µ—Å–ª–∏ —Ç–∞–º –±—É–¥–µ—Ç 13 –Ω–æ–≤—ã—Ö –≥–µ—Ä–æ–µ–≤, —Ç–æ –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –Ω–∞–º–∏ –¥–æ–ª—è –Ω–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–º—ã—Å–ª–∞, –≤–µ–¥—å 13*0.103 = `r 13*0.103`. –î–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Ç–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ.

$$P(k | n, p) = \frac{n!}{k!(n-k)!} \times p^k \times (1-p)^{n-k} =  {n \choose k} \times p^k \times (1-p)^{n-k}$$ 

$$ 0 \leq p \leq 1; n, k > 0,\ –≥–¥–µ$$

* n --- –æ–±—â–µ–µ —á–∏—Å–ª–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π
* k --- —á–∏—Å–ª–æ —É—Å–ø–µ—Ö–æ–≤
* p --- –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞

```{r, echo = FALSE}
tibble(x = seq(0, 13),
       y = dbinom(x, size = 13, 0.103)) %>% 
  ggplot(aes(x, y))+
  geom_col()
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –º—ã —Å—á–∏—Ç–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 0.103 –≤–µ—Ä–Ω–æ–π –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, —Ç–æ —Ç–æ–≥–¥–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–µ —É–≤–∏–¥–µ—Ç—å –Ω–æ–≤—ã—Ö –≥–µ—Ä–æ–µ–≤ –Ω–∞ –±—É–∫–≤—É "B" –≤–µ—Ä–æ—è—Ç–Ω–µ–µ, —á–µ–º —É–≤–∏–¥–µ—Ç—å 3 –∏–ª–∏ 5:

```{r, echo = FALSE}
tibble(x = seq(0, 13),
       y = dbinom(x, size = 13, 0.103),
       z = ifelse(x %in% c(0, 3, 5), TRUE, NA)) %>% 
  ggplot(aes(x, y, fill = z))+
  geom_col(show.legend = FALSE)
```

–¢–µ–ø–µ—Ä—å –º—ã —Å–¥–µ–ª–∞–ª–∏ —à–∞–≥ –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏: –≤—Å–µ —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, —á—Ç–æ —Å–ª—É—á–∞–∏ –¥–≤—É—Ö –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏—Ö –∏—Å—Ö–æ–¥–æ–≤ —Å–ª–µ–¥—É–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –±–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

### –ß–∏—Å–ª–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

–° —á–∏—Å–ª–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—Å–µ —É—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º: –¥–æ—Ç–ø–ª–æ—Ç, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞, —Ñ—É–Ω–∫—Ü–∏—è –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏.

```{r, warning=FALSE}
starwars %>% 
  ggplot(aes(height))+
  geom_dotplot(method="histodot")

starwars %>% 
  ggplot(aes(height))+
  geom_histogram(alpha = 0.5)+
  geom_dotplot(method="histodot")

starwars %>% 
  ggplot(aes(height))+
  geom_histogram(alpha = 0.5, binwidth = 20)+
  geom_dotplot(method="histodot")

starwars %>% 
  ggplot(aes(height))+
  geom_histogram(alpha = 0.5, binwidth = 30)+
  geom_dotplot(method="histodot")

starwars %>% 
  ggplot(aes(height, y =..density..))+
  geom_histogram(alpha = 0.5, binwidth = 30)+
  geom_density()
```

–ú—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º.

$$P(x) = \frac{1}{\sigma\sqrt{2\pi}}\times e^{-\frac{\left(x-\mu\right)^2}{2\sigma^2}}$$

$$\mu \in \mathbb{R}; \sigma^2 > 0,\ –≥–¥–µ$$

* $\mu$ --- —Å—Ä–µ–¥–Ω–µ–µ
* $\sigma^2$ --- —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ

```{r, echo=FALSE, warning=FALSE}
starwars %>% 
  ggplot(aes(height))+
  geom_density()+
  stat_function(fun = dnorm, args = list(mean = 174, sd = 30), 
                color = "red", linetype = 2)+
  labs(title = "–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (Œº = 174, œÉ = 30)")
```

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

–í R –≤—Å—Ç—Ä–æ–µ–Ω–æ –∫–∞–∫–æ–µ-—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π. –í—Å–µ –æ–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —á–µ—Ç—ã—Ä—å–º—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏: 

* `d...` (—Ñ—É–Ω–∫—Ü–∏—è –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏, probability density function),
* `p...` (—Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, cumulative distribution function) --- [–∏–Ω—Ç–µ–≥—Ä–∞–ª –ø–ª–æ—â–∞–¥–∏ –ø–æ–¥ –∫—Ä–∏–≤–æ–π –∏–ª–∏ —Å—É–º–º–∞ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π] –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–≤–∞–Ω—Ç–∏–ª–∏
* `q...` (–æ–±—Ä–∞—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, inverse cumulative distribution function) --- –∑–Ω–∞—á–µ–Ω–∏–µ *p*-—Ç–æ–π –∫–≤–∞–Ω—Ç–∏–ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
* –∏ `r...` (—Ä–∞–Ω–¥–æ–º–Ω—ã–µ —á–∏—Å–ª–∞ –∏–∑ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è).

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤—Å–µ —ç—Ç–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.


```{r, message=FALSE}
tibble(x = 1:100,
       PDF = dnorm(x = x, mean = 50, sd = 10)) %>% 
  ggplot(aes(x, PDF))+
  geom_point()+
  labs(title = "PDF –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Œº = 50, œÉ = 10)")

tibble(x = 1:100,
       CDF = pnorm(x, mean = 50, sd = 10)) %>% 
  ggplot(aes(x, CDF))+
  geom_point()+
  labs(title = "CDF –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Œº = 50, œÉ = 10)")

tibble(quantiles = seq(0, 1, by = 0.01),
       value = qnorm(quantiles, mean = 50, sd = 10)) %>% 
  ggplot(aes(quantiles, value))+
  geom_point()+
  labs(title = "inverse CDF –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Œº = 50, œÉ = 10)")

tibble(sample = rnorm(100, mean = 50, sd = 10)) %>% 
  ggplot(aes(sample))+
  geom_histogram()+
  labs(title = "–≤—ã–±–æ—Ä–∫–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª (Œº = 50, œÉ = 10)")
```

–ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `set.seed()`, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ç–æ—Ä–∞ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å.

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `dbinom()`, `pbinom()`, `qbinom()` –∏ `rbinom()` –¥–ª—è –±–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ `..t()` –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –°—Ç—å—é–¥–µ–Ω—Ç–∞, `...chisq()` –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ö–∏-–∫–≤–∞–¥—Ä–∞—Ç –∏ —Ç. –ø.

–ë–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–µ –∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–¥—É–º–∞–ª–∏ –ª—é–¥–∏:

* –≤–æ—Ç [—Ä–µ—Å—É—Ä—Å](http://www.math.wm.edu/~leemis/chart/UDR/UDR.html), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å–¥–µ–ª–∞–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏;
* –≤–æ—Ç [–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](https://ben18785.shinyapps.io/distribution-zoo/), –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

```{block, type = "rmdtask"}
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä—É—é –æ–±—Å—É–∂–¥–∞–ª–∏ –≤—ã—à–µ —Å –∏–º–µ–Ω–∞–º–∏ –≥–µ—Ä–æ–µ–≤ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ `strawars`. –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –≤ —Ç–æ—á–∫–µ 3 –¥–ª—è –±–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —É—Å–ø–µ—Ö–∞ 0.103. (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 3 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π).
```

```{r, echo = FALSE, results='asis'}
check_question(answer = round(dbinom(x = 3, 13, prob = 0.103), 3), 
               right = "–ø—Ä–∞–≤–∏–ª—å–Ω–æ", 
               wrong = "—É –º–µ–Ω—è –¥—Ä—É–≥–æ–π –æ—Ç–≤–µ—Ç")
```

### –î–∞–≤–∞–π—Ç–µ –ø–æ—Å—á–∏—Ç–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏

–ö–∞–∫–æ–≤–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –º—ã –≤ –Ω–æ–≤–æ–º —Ñ–∏–ª—å–º–µ –±—É–¥–µ—Ç 3 –∏ –±–æ–ª–µ–µ –Ω–æ–≤—ã—Ö –≥–µ—Ä–æ–µ–≤ –Ω–∞ "B"?

```{r, echo=FALSE}
tibble(x = seq(0, 13),
       y = dbinom(x, size = 13, 0.103),
       z = ifelse(x %in% 3:13, TRUE, NA)) %>% 
  ggplot(aes(x, y, fill = z))+
  geom_col(show.legend = FALSE)
```

–≠—Ç–æ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `dbinom()`, `pbinom()`:
```{r}
sum(dbinom(3:13, size = 13, prob = 0.103))
1-pbinom(2, size = 13, prob = 0.103)
```

–ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ —Ä–æ—Å—Ç –≥–µ—Ä–æ–µ–≤ –ó–≤–µ–∑–¥–Ω—ã—Ö –≤–æ–π–Ω –ø–æ—Å—Ç–æ—è–Ω–µ–Ω –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å–æ —Å—Ä–µ–¥–Ω–∏–º 174 –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–∞–Ω–µ–Ω–∏–µ–º 30, –∫–∞–∫–æ–≤–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —á—Ç–æ –≤ –Ω–æ–≤–æ–º —Ñ–∏–ª—å–º–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –≥–µ—Ä–æ–π —Ä–æ—Å—Ç–æ–º –º–µ–∂–¥—É 200 –∏ 230?

```{r, echo = FALSE}
starwars %>% 
  ggplot(aes(height)) +
  geom_histogram(aes(y = ..density..), alpha = 0.2)+
  stat_function(fun = function(x) dnorm(x, 174, 30))+
  stat_function(fun = function(x) dnorm(x, 174, 30), 
                xlim = c(200,230), 
                geom = "area",
                fill = "lightblue")+
  labs(title = "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≥–ª–∞—Å–Ω—ã—Ö –≤ —è–∑—ã–∫–∞—Ö –º–∏—Ä–∞ (—Ñ—ç–π–∫)")
```

```{r}
integrate(function(x){dnorm(x, mean = 174, sd = 30)}, lower = 200, upper = 230)
pnorm(230, mean = 174, sd = 30) - pnorm(200, mean = 174, sd = 30)
```


<!--chapter:end:12-distributions.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –≥–∏–ø–æ—Ç–µ–∑

```{r, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
theme_set(theme_bw())
```

## –û —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Å—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ –º–∏—Ä–µ. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –ø–æ–Ω—è—Ç–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ --- **–≥–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å**, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–∞–∫–æ–π-–ª–∏–±–æ –≥—Ä—É–ø–ø—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ—Ç–æ—Ä–æ–π –º—ã —Ö–æ—Ç–∏–º –æ—Ü–µ–Ω–∏—Ç—å:

* –≤—Å–µ –∂–∏—Ç–µ–ª–∏ –†–§ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ —Ä–æ—Å—Ç–∞;
* –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –ø–∏—Å–∞—Ç–µ–ª—è (—Ä–µ–∞–ª—å–Ω—ã–µ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ) –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ —á–∞—Å—Ç–æ—Ç—ã –≤—Å—Ç—Ä–µ—á–∞–µ–º–æ—Å—Ç–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤;
* –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ü–µ–Ω–∏—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –∑–∞–≤—Ç—Ä–∞;
* –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ü–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–º–µ–Ω –≤ —Å—Ç—Ä–∞–Ω–∞—Ö –º–∏—Ä–∞
* –∏ —Ç. –¥.

–í–µ—Å—å —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ **–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –æ —Å–≤–æ–π—Å—Ç–≤–∞—Ö –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏** –∏ **–Ω–µ–∫–æ—Ç–æ—Ä–æ–π –≤—ã–±–æ—Ä–∫–∏ –∏–∑ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–∫—É–ø–Ω–æ—Å—Ç–∏**. –¢–∞–∫ –µ—Å–ª–∏ –º—ã –Ω–µ –º–æ–∂–µ–º –≤–∑—è—Ç—å –≤—Å—é –≥–µ–Ω–µ—Ä–∞–ª—å–Ω—É—é —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å –∏ –æ—Ü–µ–Ω–∏—Ç—å –µ–µ –ø–∞—Ä–∞–º–µ—Ç—Ä Œ∏ (—Å—Ä–µ–¥–Ω–∏–π —Ä–æ—Å—Ç, –¥–æ–ª—è –≤—Å—Ç—Ä–µ—á–∞–µ–º–æ—Å—Ç–∏ –≥–ª–∞—Å–Ω—ã—Ö –≤ —Ç–µ–∫—Å—Ç–∞—Ö –ø–∏—Å–∞—Ç–µ–ª—è –∏ —Ç. –¥.), —Ç–æ –º—ã –±–µ—Ä–µ–º —Å–ª—É—á–∞–π–Ω—É—é –≤—ã–±–æ—Ä–∫—É –∏–∑ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ –∏ –æ—Ü–µ–Ω–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä –≤—ã–±–æ—Ä–∫–∏ Œ∏ÃÇ –∏ –¥–µ–ª–∞–µ–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ —Ç–æ–º, –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç—Ä–æ–µ–Ω –≤ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ –≤—ã–±–æ—Ä–∫–∞, –∫–æ—Ç–æ—Ä–æ–π –º—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω—É—é —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å, —Ç–æ –Ω—É–∂–¥–∞ –æ—Ü–µ–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–∞–∑–∞–ª–æ—Å—å –±—ã –æ—Ç–ø–∞–¥–∞–µ—Ç (–≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∑–∞–¥–∞—á–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –æ–±–ª–∞—Å—Ç—å —Ç–µ–æ—Ä–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π):

* –ö–∞–∫–∞—è –¥–æ–ª—è —Å–ª–æ–≤ "–Ω–µ" –≤ –∫–æ—Ä–ø—É—Å–µ —Ç–µ–∫—Å—Ç–æ–≤ –ü—É—à–∫–∏–Ω–∞?

–û–¥–Ω–∞–∫–æ –±—ã–≤–∞—é—Ç –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–∂–µ –æ–±–ª–∞–¥–∞—è –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç—å—é, –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ:

* –ö–∞–∫–∞—è –¥–æ–ª—è —Å–ª–æ–≤ "–Ω–µ" –±—É–¥–µ—Ç –≤ —Å–≤–µ–∂–µ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–µ –ü—É—à–∫–∏–Ω–∞ –¥–ª–∏–Ω—ã $n$?
* –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –∫–∞–∂–¥—ã–π –≥–æ–¥ –µ–∑–¥–∏—Ç –Ω–∞ –æ—Å—Ç—Ä–æ–≤ –°—É–º–∞—Ç—Ä–∞ –∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –≥–æ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –Ω–∞—É–∫–µ –≤–∏–¥–æ–≤ —è—â–µ—Ä–∏—Ü. –° –∫–∞–∂–¥—ã–π –≥–æ–¥–æ–º –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω–∞—É–∫–µ –≤–∏–¥—ã —è—â–µ—Ä–∏—Ü –≤—Å–µ —Ä–µ–∂–µ –∏ —Ä–µ–∂–µ. –ú–æ–∂–µ–º –ª–∏ –º—ã –æ—Ü–µ–Ω–∏—Ç—å —Å–∫–æ–ª—å–∫–æ —è—â–µ—Ä–∏—Ü –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –≤–∏–¥–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ—Ç –≤ —ç—Ç–æ–º –≥–æ–¥—É?

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∫–æ–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞: —Ñ—Ä–∏–∫–≤–µ–Ω—Ç–∏—Å—Ç—Å–∫–∞—è –∏ –±–∞–π–µ—Å–æ–≤—Å–∫–∞—è. –ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–∞–º–∫–∞—Ö —Ñ—Ä–∏–∫–≤–µ–Ω—Ç–∏—Å—Ç—Å–∫–æ–π.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω—É–ª–µ–≤–æ–π –≥–∏–ø–æ—Ç–µ–∑—ã

–¢–µ–ø–µ—Ä—å –º—ã –æ–±—Å—É–¥–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç—Ä—é–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª –±–æ–ª—å—à—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤ XX –≤–µ–∫–µ, –∏ —Å–µ–π—á–∞—Å –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –≠—Ç–æ—Ç —Ç—Ä—é–∫, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø–æ–º–æ–≥–∞–µ—Ç –ª–∏—à—å –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —á—Ç–æ-—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è, —Ç–∞–∫ —á—Ç–æ –º—ã –Ω–µ–º–Ω–æ–∂–∫–æ –ø–µ—Ä–µ–∏–Ω–∞—á–∏–º –Ω–∞—à–∏ –∑–∞–¥–∞—á–∏.

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ, —á—Ç–æ —è –∏—Å—Å–ª–µ–¥—É—é –≥–µ—Ä–æ–µ–≤ –ó–≤–µ–∑–¥–Ω—ã—Ö –≤–æ–π–Ω. –Ø –≤–µ—Ä—é, —á—Ç–æ –≥–µ—Ä–æ–∏ —Å –∏–º–µ–Ω–µ–º –Ω–∞ "B" –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –ó–≤–µ–∑–¥–Ω—ã—Ö –≤–æ–π–Ω–∞—Ö —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 0.103. –í –Ω–æ–≤–æ–º —Ñ–∏–ª—å–º–µ –∏–∑ 13 –Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π 4 –∏–º–µ—é—Ç –∏–º—è –Ω–∞ "B", —Ç. –µ. –º—ã –Ω–∞–±–ª—é–¥–∞–µ–º –¥–æ–ª—é 0.31. –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è–º–∏ 0.31 –∏ –æ–∂–∏–¥–∞–Ω–∏—è–º–∏ 0.103 —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π?

–°–æ–∑–¥–∞–¥–∏–º –¥–≤–µ –≥–∏–ø–æ—Ç–µ–∑—ã:

* $H_0$ --- (–Ω—É–ª–µ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞) —Ä–∞–∑–Ω–∏—Ü–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π, —Ç. –µ. –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∏–∑ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.
* $H_1$ --- (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞) —Ä–∞–∑–Ω–∏—Ü–∞ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π, —Ç. –µ. –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–æ–≥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∏–∑ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

–ù—É–ª–µ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞ --- —ç—Ç–æ –≥–∏–ø–æ—Ç–µ–∑–∞, –∫–æ—Ç–æ—Ä—É—é –∫–∞–∂–¥—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ—Ç–≤–µ—Ä–≥–Ω—É—Ç—å, –∏ –ø—Ä–∏–Ω—è—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é. –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è (–∫–∞–∂–¥—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∞, –∞ –≤—ã–±–æ—Ä —Ç–µ—Å—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö) –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç—å —Ç–∞–∫–æ–π –∏–ª–∏ –±–æ–ª–µ–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –µ—Å–ª–∏ –≤–µ—Ä–Ω–∞ –Ω—É–ª–µ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞ (**p-value, p-—É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏**):

```{r, echo=FALSE}
tibble(x = seq(0, 13),
       y = dbinom(x, size = 13, 0.103),
       z = ifelse(x %in% 4:13, TRUE, NA)) %>% 
  ggplot(aes(x, y, fill = z))+
  geom_col(show.legend = FALSE)
```

```{r}
sum(dbinom(4:13, size = 13, prob = 0.103))
```

–≠—Ç–æ –∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Å–ª–µ–¥—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏:

```{r}
binom.test(x = 4, n = 13, p = 0.103, alternative = "greater")
```

–î–∞–ª—å—à–µ –≤ —Ä–∞–∑–Ω—ã—Ö –Ω–∞—É–∫–∞—Ö –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ 0.05), –∏ –µ—Å–ª–∏ p-value –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–≤–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —Ç–æ–≥–¥–∞ —Ä–∞–∑–Ω–∏—Ü–∞ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π.

![If all else fails, use "significant at a p>0.05 level" and hope no one notices (https://xkcd.com/1478/)](https://imgs.xkcd.com/comics/p_values.png)

## –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±–æ—Ä–æ–∫

* –û–¥–Ω–æ–≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (one-sample tests)

```{r, echo = FALSE, message=FALSE}
set.seed(42)
tibble(x = rnorm(100, mean = 80, sd = 10)) %>% 
  ggplot(aes(x)) +
  geom_dotplot()+
  geom_vline(xintercept = 55, linetype = 2, size = 2, color = "darkgreen")+
  scale_y_continuous(breaks = c())+
  labs(y = "")
```


* –î–≤—É—Ö–≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (two-sample tests)

```{r, echo = FALSE, message=FALSE}
set.seed(42)
tibble(x = rnorm(100, mean = 80, sd = 10),
       y = rnorm(100, mean = 65, sd = 10)) %>% 
  pivot_longer(names_to = "dataset", values_to = "value", x:y) %>% 
  group_by(dataset) %>% 
  mutate(mean = mean(value)) %>% 
  ggplot(aes(value, fill = dataset)) +
  geom_dotplot(show.legend = FALSE, alpha = 0.8)+
  geom_vline(aes(xintercept = mean, color = dataset), linetype = 2, size = 2, show.legend = FALSE)+
  scale_y_continuous(breaks = c())+
  labs(y = "")
```

* –º–Ω–æ–≥–æ–≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (multiple-sample tests)

```{r, echo = FALSE, message=FALSE}
set.seed(42)
tibble(x = rnorm(100, mean = 80, sd = 10),
       y = rnorm(100, mean = 65, sd = 8),
       z = rnorm(100, mean = 95, sd = 6)) %>% 
  pivot_longer(names_to = "dataset", values_to = "value", x:z) %>% 
  group_by(dataset) %>% 
  mutate(mean = mean(value)) %>% 
  ggplot(aes(value, fill = dataset)) +
  geom_dotplot(show.legend = FALSE, alpha = 0.8)+
  geom_vline(aes(xintercept = mean, color = dataset), linetype = 2, size = 2, show.legend = FALSE)+
  scale_y_continuous(breaks = c())+
  labs(y = "")
```

### –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

* –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ
```{r,echo=FALSE}
tibble(x = -10:110) %>% 
  ggplot(aes(x)) +
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10))+
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10), 
                geom = 'area', xlim = c(qnorm(0.95, 60, 10), 110), fill = 'lightblue')

tibble(x = -10:110) %>% 
  ggplot(aes(x)) +
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10))+
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10), 
                geom = 'area', xlim = c(-10, qnorm(0.05, 60, 10)), fill = 'lightblue')
```

* –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ

```{r,echo=FALSE}
tibble(x = -10:110) %>% 
  ggplot(aes(x)) +
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10))+
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10), 
                geom = 'area', xlim = c(-10, qnorm(0.025, 60, 10)), fill = 'lightblue') +
  stat_function(fun = dnorm, args = c(mean = 60, sd = 10), 
                geom = 'area', xlim = c(qnorm(0.975, 60, 10), 110), fill = 'lightblue') 
```


### –ü–∞—Ä–Ω—ã–µ vs. –Ω–µ–ø–∞—Ä–Ω—ã–µ

* –Ω–µ–ø–∞—Ä–Ω—ã–µ --- –µ—Å–ª–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ (–º—É–∂—á–∏–Ω—ã vs. –∂–µ–Ω—â–∏–Ω—ã, –ø–æ–∂–∏–ª—ã–µ vs. –º–æ–ª–æ–¥—ã–µ? –∏ —Ç. –¥.)
* –ø–∞—Ä–Ω—ã–µ --- –µ—Å–ª–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É —Å–æ–±–æ–π (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–æ –ø–∞—Ä—ã R –∏ –ø–æ—Å–ª–µ, –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –æ–±—ã—á–Ω—ã–º –∏ –∏–Ω—Ñ—Ä–∞–∫—Ä–∞—Å–Ω—ã–º —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–º, –∏ —Ç. –ø.)

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ vs. –Ω–µ–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è–º–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è: –Ω–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

| —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ  | —Ç–∏–ø –≥—Ä—É–ø–ø—ã           | # –≥—Ä—É–ø–ø | —Ç–µ—Å—Ç                           |
|----------------|----------------------|:-------:|--------------------------------|
| –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ | —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º |    1    | –±–∏–Ω–æ–º–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç, œá¬≤          |
| –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ | –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ          |    2    | œá¬≤, —Ç–µ—Å—Ç –§–∏—à–µ—Ä–∞                |
| –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ | –∑–∞–≤–∏—Å–∏–º—ã–µ            |    2    | –∫—Ä–∏—Ç–µ—Ä–∏–π –ú–∞–∫-–ù–∏–º–∞—Ä–∞            |
| –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ     | —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º |    1    | –æ–¥–Ω–æ–≤—ã–±–æ—Ä–æ—á–Ω—ã–π t-test          |
| –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ     | –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ          |    2    | t-test –¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤—ã–±–æ—Ä–æ–∫ |
| –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ     | –∑–∞–≤–∏—Å–∏–º—ã–µ            |    2    | –ø–∞—Ä–Ω—ã–π t-test                  |
| –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ  | —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º |    1    | –∫—Ä–∏—Ç–µ—Ä–∏–π –£–∏–ª–∫–æ–∫—Å–æ–Ω–∞            |
| –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ  | –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ          |    2    | –∫—Ä–∏—Ç–µ—Ä–∏–π –ú–∞–Ω–Ω–∞-–£–∏—Ç–Ω–∏           |
| –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ  | –∑–∞–≤–∏—Å–∏–º—ã–µ            |    2    | –∫—Ä–∏—Ç–µ—Ä–∏–π –£–∏–ª–∫–æ–∫—Å–æ–Ω–∞            |

## –û–¥–Ω–æ–≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –ë–∏–Ω–æ–º–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç

–ú—ã —É–∂–µ –æ–±—Å—É–¥–∏–ª–∏ –±–∏–Ω–æ–º–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –≤—ã—à–µ. –í —á–∞—Å—Ç–æ—Ç–Ω–æ–º —Å–ª–æ–≤–∞—Ä–µ [–õ—è—à–µ–≤—Å–∫–∞—è –®–∞—Ä–æ–≤ 2009], —Å–æ–∑–¥–∞–Ω–Ω–æ–º –Ω–∞ –±–∞–∑–µ –∫–æ—Ä–ø—É—Å–∞ –æ–±—ä–µ–º–æ–º 92 –º–ª–Ω. —Å–ª–æ–≤–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π, —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ *–∫–µ–Ω–≥—É—Ä—É* –∏–º–µ–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—É—é —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å 0.0000021, –∞ –ø—Ä–µ–¥–ª–æ–≥ *–∫* --- 0.005389 (–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç *–∫–æ* –≤ —Ä–∞—Å—á–µ—Ç –Ω–µ –±–µ—Ä–µ—Ç—Å—è). –í –Ω–µ–∫–æ—Ç–æ—Ä–æ–º —Ç–µ–∫—Å—Ç–µ –¥–ª–∏–Ω–æ–π 61981 —Å–ª–æ–≤ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ –∫–µ–Ω–≥—É—Ä—É –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è 58 —Ä–∞–∑, –∞ –ø—Ä–µ–¥–ª–æ–≥ –∫ --- 254. –ú–æ–∂–µ–º –ª–∏ –º—ã —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –Ω–∏—á–µ–º –Ω–µ –ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?

```{r}
# –∫–µ–Ω–≥—É—Ä—É
binom.test(x = 58, n = 61981, p = 0.0000021)
# –∫
binom.test(x = 254, n = 61981, p = 0.005389)
```


```{block, type = "rmdtask"}
–ú—ã –ø–æ—Å—á–∏—Ç–∞–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É–∫–≤ *–∞* –≤ —Ä–∞—Å—Å–∫–∞–∑–µ –ê. –ü. –ß–µ—Ö–æ–≤–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ 58 –±—É–∫–≤ –∏–∑ —Ä–∞—Å—Å–∫–∞–∑–∞ –¥–ª–∏–Ω–Ω–æ–π 699 –±—É–∫–≤ (–ø—Ä–æ–±–µ–ª—ã –∏ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –≤—ã–∫–∏–Ω—É—Ç—ã). –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º, –µ—Å–ª–∏ –º—ã –æ–∂–∏–¥–∞–ª–∏ –¥–æ–ª—é 0.08. –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ p-value —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 2 –∑–Ω–∞–∫–æ–º –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.
```

```{r, echo = FALSE, results='asis'}
library(checkdown)
check_question(answer = round(binom.test(x = 58, n = 699, p = 0.08)$p.value, 2))
```

### –û–¥–Ω–æ–≤—ã–±–æ—Ä–æ—á–Ω—ã–π t-—Ç–µ—Å—Ç

–ò–∑ —Å—Ç–∞—Ç—å–∏ –°. –°—Ç–µ–ø–∞–Ω–æ–≤–æ–π 2011 –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ –Ω–æ—Å–∏—Ç–µ–ª–∏ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –≤ —Å—Ä–µ–¥–Ω–µ–º –≥–æ–≤–æ—Ä—è—Ç 5.31 —Å–ª–æ–≥–∞ –≤ —Å–µ–∫—É–Ω–¥—É —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 1,93 (–º—É–∂—á–∏–Ω—ã 5.46 —Å–ª–æ–≥–∞ –≤ —Å–µ–∫—É–Ω–¥—É —Å–æ —Å—Ä–µ–¥–Ω–∏–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 2.02, –∂–µ–Ω—â–∏–Ω—ã 5.23 —Å–ª–æ–≥–∞ –≤ —Å–µ–∫—É–Ω–¥—É —Å–æ —Å—Ä–µ–¥–Ω–∏–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 1.84, –¥–µ—Ç–∏ 3.86 —Å–ª–æ–≥–∞ –≤ —Å–µ–∫—É–Ω–¥—É —Å–æ —Å—Ä–µ–¥–Ω–∏–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 1.67). –ú—ã –æ–ø—Ä–æ—Å–∏–ª–∏ 30 –Ω–æ—Å–∏—Ç–µ–ª–µ–π –¥–µ—Ä–µ–≤–Ω–∏ N –∏ –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ —Å—Ä–µ–¥–Ω—è—è —Ä–∞–≤–Ω–∞ 7, –∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 2. –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π?

```{r, message=FALSE}
set.seed(42)
data <- rnorm(n = 30, mean = 7, sd = 2)
tibble(data) %>% 
  ggplot(aes(data))+
  geom_dotplot()+
  geom_vline(xintercept = mean(data), size = 2, linetype = 2)+
  geom_vline(xintercept = 5.31, size = 2, linetype = 2, color = "red")+
  annotate(geom = "text", x = 3, color = "red", y = 0.75, label = "—Å—Ä–µ–¥–Ω–µ–µ —Å–æ–≥–ª–∞—Å–Ω–æ\n[–°—Ç–µ–ø–∞–Ω–æ–≤–∞ 2011]", size = 5)
```

```{r}
t.test(data, mu = 5.31)
```

```{block, type = "rmdtask"}
–°–æ–∑–¥–∞–π—Ç–µ 30 –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π —Å–æ —Å—Ä–µ–¥–Ω–∏–º 6 –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 2, –∏—Å–ø–æ–ª—å–∑—É—è `set.seed(42)` –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –°—Ç–µ–ø–∞–Ω–æ–≤–æ–π. –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π? –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ p-value —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 2 –∑–Ω–∞–∫–æ–º –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.
```

```{r, echo = FALSE, results='asis'}
set.seed(42)
my_data <- rnorm(n = 30, mean = 6, sd = 2)
check_question(answer = round(t.test(my_data, mu = 5.31)$p.value, 2))
```

t-—Ç–µ—Å—Ç –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:

* –Ω–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö 
* –≥–æ–º–æ—Å–∫–µ–¥–æ—Å—Ç–∏—á–Ω–æ—Å—Ç—å (–≥–æ–º–æ–≥–µ–Ω–Ω–æ—Å—Ç—å) –¥–∏—Å–ø–µ—Ä—Å–∏–∏

### –¢–µ—Å—Ç –£–∏–ª–∫–æ–∫—Å–æ–Ω–∞

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—Ä–∏—Ç–µ—Ä–∏–π –£–∏–ª–∫–æ–∫—Å–æ–Ω–∞

```{r, message=FALSE}
set.seed(42)
data <- rlnorm(n = 30, mean = 1.8, sd = 0.1)
tibble(data) %>% 
  ggplot(aes(data))+
  geom_dotplot()+
  geom_vline(xintercept = mean(data), size = 2, linetype = 2)+
  geom_vline(xintercept = 5.31, size = 2, linetype = 2, color = "red")+
  annotate(geom = "text", x = 4.9, color = "red", y = 0.75, label = "—Å—Ä–µ–¥–Ω–µ–µ —Å–æ–≥–ª–∞—Å–Ω–æ\n[–°—Ç–µ–ø–∞–Ω–æ–≤–∞ 2011]", size = 5)
wilcox.test(data, mu = 5.31)
```

## –î–≤—É—Ö–≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –î–≤—É—Ö–≤—ã–±–æ—Ä–æ—á–Ω—ã–π t-—Ç–µ—Å—Ç

–õ–æ–≥–∏–∫–∞ –¥–≤—É—Ö–≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Ç–∞–∫–∞—è –∂–µ –∫–∞–∫ –æ–¥–Ω–æ–≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ:

```{r, message=FALSE}
set.seed(42)
sample_1 <- rnorm(25, mean = 40, sd = 5)
sample_2 <- rnorm(25, mean = 50, sd = 4.5)

tibble(sample_1, sample_2) %>% 
  pivot_longer(names_to = "dataset", values_to = "values", sample_1:sample_2) %>% 
  group_by(dataset) %>% 
  mutate(mean = mean(values)) %>% 
  ggplot(aes(values, fill = dataset))+
  geom_dotplot(show.legend = FALSE)+
  geom_vline(aes(xintercept = mean, color = dataset), size = 2, linetype = 2, show.legend = FALSE)

t.test(sample_1, sample_2)
```

```{block, type = "rmdtask"}
–í —Ä–∞–±–æ—Ç–µ (Coretta 2017, https://goo.gl/NrfgJm) —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≥–ª–∞—Å–Ω–æ–≥–æ –∏ –ø—Ä–∏–¥—ã—Ö–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ–≥–æ. –ê–≤—Ç–æ—Ä —Å–æ–±—Ä–∞–ª –¥–∞–Ω–Ω—ã–µ 5 –Ω–æ—Å–∏—Ç–µ–ª–µ–π –∏—Å–ª–∞–Ω–¥—Å–∫–æ–≥–æ. –î–∞–ª—å—à–µ –æ–Ω –∏–∑–≤–ª–µ–∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–ª–∞—Å–Ω–æ–≥–æ, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–∏ –ø—Ä–∏–¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –Ω–µ–ø—Ä–∏–¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ. –°–∫–∞—á–∞–π—Ç–µ [–¥–∞–Ω–Ω—ã–µ](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/icelandic.csv) –∏ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–¥–∞ –ª–∏, —á—Ç–æ –≥–ª–∞—Å–Ω—ã–µ –ø–µ—Ä–µ–¥ –∞—Å–ø–∏—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ–º —Å–æ–≥–ª–∞—Å–Ω—ã–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–ª–∏ –∑–Ω–∞—á–∏–º–æ –∫–æ—Ä–æ—á–µ –≥–ª–∞—Å–Ω—ã—Ö –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–ø—Ä–∏–¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –Ω–æ—Å–∏—Ç–µ–ª—è. –í –æ—Ç–≤–µ—Ç–µ –ø—Ä–∏–≤–µ–¥–∏—Ç–µ t-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É c —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ —Ç—Ä–µ—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.
```

### –î–≤—É—Ö–≤—ã–±–æ—Ä–æ—á–Ω—ã–π –ø–∞—Ä–Ω—ã–π t-—Ç–µ—Å—Ç

```{r, message=FALSE}
set.seed(42)
sample_1 <- rnorm(25, mean = 40, sd = 5)
sample_2 <- sample_1 - rnorm(25, mean = 5)

tibble(sample_1, sample_2) %>% 
  pivot_longer(names_to = "dataset", values_to = "values", sample_1:sample_2) %>% 
  group_by(dataset) %>% 
  mutate(mean = mean(values)) %>% 
  ggplot(aes(values, fill = dataset))+
  geom_dotplot(show.legend = FALSE)+
  geom_vline(aes(xintercept = mean, color = dataset), size = 2, linetype = 2, show.legend = FALSE)

t.test(sample_1, sample_2, paired = TRUE)
```


### –ö—Ä–∏—Ç–µ—Ä–∏–π –ú–∞–Ω–Ω–∞-–£–∏—Ç–Ω–∏

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—Ä–∏—Ç–µ—Ä–∏–π –ú–∞–Ω–Ω–∞-–£–∏—Ç–Ω–∏ (–ø–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏ –µ–≥–æ —Ç–æ–∂–µ –Ω–∞–∑—ã–≤–∞—é—Ç Wilcoxon test).

```{r,  message=FALSE}
set.seed(42)
data_1 <- rlnorm(n = 30, mean = 1.8, sd = 0.1)
data_2 <- rlnorm(n = 30, mean = 1.6, sd = 0.1)

tibble(data_1, data_2) %>% 
  pivot_longer(names_to = "dataset", values_to = "values", data_1:data_2) %>% 
  group_by(dataset) %>% 
  mutate(mean = mean(values)) %>% 
  ggplot(aes(values, fill = dataset))+
  geom_dotplot(show.legend = FALSE)+
  geom_vline(aes(xintercept = mean, color = dataset), size = 2, linetype = 2, show.legend = FALSE)

wilcox.test(data_1, data_2)
```

### œá¬≤, —Ç–µ—Å—Ç –§–∏—à–µ—Ä–∞

### –ö—Ä–∏—Ç–µ—Ä–∏–π –ú–∞–∫ –ù–µ–º–∞—Ä–∞


## –û–± —ç—Ñ—Ñ–µ–∫—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏–π


## –í–µ–ª–µ—á–∏–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞

## –ü–æ—Å–ª–µ—Å–ª–æ–≤–∏–µ

P-value –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Ä—É–≥–∞—é—Ç

* –∑–∞ —Ç–æ, —á—Ç–æ –µ–≥–æ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –ø–æ–Ω–∏–º–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ [Gigerenzer 2004], [Goodman 2008]
* –∑–∞ —Ç–æ, —á—Ç–æ —Å–∞–º–æ –ø–æ —Å–µ–±–µ p-value < 0.05 —Å–ª–∞–±—ã–π –¥–æ–≤–æ–¥ [Sterne, Smith 2001], [Nuzzo et al. 2014], [Wasserstein, Lazar 2016]

> Q: Why do so many colleges and grad schools teach p = 0.05?

> A: Because that's still what the scientific community and journal editors use.

> Q: Why do so many people still use p = 0.05?

> A: Because that's what they were taught in college or grad school

  [Wasserstein, Lazar 2016]

–í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º, —Å–µ–π—á–∞—Å –º–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å

* –±–æ–ª—å—à–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ p-value vs. –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
* –≤—Å–µ –Ω–∞—Ä–∞—Å—Ç–∞—é—â—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –ë–∞–π–µ—Å–æ–≤—Å–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

<!--chapter:end:13-NHST.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---

# –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∏ —Ä–µ–≥—Ä–µ—Å—Å–∏—è

```{r, message=FALSE, echo = FALSE}
library(tidyverse)
theme_set(theme_bw())
```

## –î–∏—Å–ø–µ—Ä—Å–∏—è –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ

**–î–∏—Å–ø–µ—Ä—Å–∏—è** --- –º–µ—Ä–∞ —Ä–∞–∑–±—Ä–æ—Å–∞ –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥–Ω–µ–≥–æ. 

$$\sigma^2_X = \frac{\sum_{i = 1}^n(x_i - \bar{x})^2}{n - 1},$$

–≥–¥–µ

* $x_1, ..., x_n$ --- –Ω–∞–±–ª—é–¥–µ–Ω–∏—è;
* $\bar{x}$ --- —Å—Ä–µ–¥–Ω–µ–µ –≤—Å–µ—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $X$ --- –≤–µ–∫—Ç–æ—Ä –≤—Å–µ—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $n$ --- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π.

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:

```{r, echo=FALSE}
set.seed(42)
df <- tibble(x = sort(rnorm(20, mean = 50, sd = 10)), 
             y = seq_along(x))
df %>% 
  ggplot(aes(x))+
  geom_point(y = 0)+
  ggrepel::geom_text_repel(aes(label = y), y = 0)+
  labs(x = "–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π x")
```

–¢–æ–≥–¥–∞ –¥–∏—Å–ø–µ—Ä—Å–∏—è --- —ç—Ç–æ —Å—É–º–º–∞ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –æ—Ç –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –¥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ –≤—ã–±–æ—Ä–∫–∏ (–ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è) —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π - 1 (–ø–æ –¥—É—Ö—É —ç—Ç–∞ –º–µ—Ä–∞ --- –æ–±—ã—á–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ, –Ω–æ –µ—Å–ª–∏ –≤–∞—Å –∏–Ω–µ—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–∞–∑–Ω–∏—Ü–∞ —Å–º–µ—â–µ–Ω–Ω–æ–π –∏ –Ω–µ—Å–º–µ—â–µ–Ω–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –¥–∏—Å–ø–µ—Ä—Å–∏–∏, —Å–º. [–≤–∏–¥–µ–æ](https://youtu.be/Cn0skMJ2F3c)).

```{r, echo = FALSE}
df %>% 
  mutate(positive_negative = x > mean(x)) %>% 
  ggplot(aes(x, y))+
  geom_vline(aes(xintercept = mean(x)), linetype = 2)+
  geom_linerange(aes(xmin = x, 
                     xmax = mean(x), 
                     color = positive_negative),
                 show.legend = FALSE) + 
  annotate(geom = "text", x = 56, y = 1, label = "—Å—Ä–µ–¥–Ω–µ–µ x")+
  geom_point()+
  scale_y_continuous(breaks = df$y)+
  labs(y = "–Ω–æ–º–µ—Ä –Ω–∞–±–ª—é–¥–µ–Ω–∏–π x",
       x = "–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π x")
```

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–µ–µ, —á—Ç–æ —Ç–∞–∫–æ–µ –¥–∏—Å–ø–µ—Ä—Å–∏—è, –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞—Å—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ —Å—Ä–µ–¥–Ω–∏–º, –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ –¥–∏—Å–ø–µ—Ä—Å–∏—è–º–∏:

```{r, echo=FALSE, message=FALSE}
set.seed(42)
map_dfr(1:5*5, function(x){
  tibble(x = rnorm(20, mean = 50, sd = sqrt(x)),
         var = round(var(x)))
}) %>% 
  group_by(var) %>% 
  mutate(x = x - mean(x)+50) %>% 
  ggplot(aes(x, factor(var)))+
  geom_point()+
  ggridges::geom_density_ridges(alpha = 0.2)+
  geom_vline(aes(xintercept = mean(x)), linetype = 2)+
  labs(x = "–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π",
       y = "–¥–∏—Å–ø–µ—Ä—Å–∏—è –Ω–∞–±–ª—é–¥–µ–Ω–∏–π")
```

–í R –¥–∏—Å–ø–µ—Ä—Å–∏—é –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `var()`.

```{r}
set.seed(42)
x <- rnorm(20, mean = 50, sd = 10)
var(x)
```

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞–µ—Ç —Ç–æ –∂–µ, —á—Ç–æ –º—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤ —Ñ–æ—Ä–º—É–ª–µ.

```{r}
var(x) == sum((x - mean(x))^2)/(length(x)-1)
```

–¢–∞–∫ –∫–∞–∫ –¥–∏—Å–ø–µ—Ä—Å–∏—è —è–≤–ª—è–µ—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–æ–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è, —Ç–æ —á–∞—Å—Ç–æ –≤–º–µ—Å—Ç–æ –Ω–µ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ $\sigma$ --- –∫–æ—Ä–µ–Ω—å –∏–∑ –¥–∏—Å–ø–µ—Ä—Å–∏–∏. –í R –µ–µ –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `sd()`:

```{r}
sd(x)
sd(x) == sqrt(var(x))
```

```{block, type = "rmdtask"}
–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –¥–∏—Å–ø–µ—Ä—Å–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `sleep_total` –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ `msleep`, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ `tidyverse`. –û—Ç–≤–µ—Ç –æ–∫—Ä—É–≥–ª–∏—Ç–µ –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.
```

```{r, results='asis', echo = FALSE}
library(checkdown)
check_question(answer = round(var(msleep$sleep_total), 2))
```

```{block, type = "rmdtask"}
–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `sleep_total` –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ `msleep`, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ `tidyverse`. –û—Ç–≤–µ—Ç –æ–∫—Ä—É–≥–ª–∏—Ç–µ –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(answer = round(sd(msleep$sleep_total), 2))
```

## z-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

**z-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ** (–µ—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ—Ä–º–∏–Ω **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**) --- —ç—Ç–æ —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ, –∏–∑–º–µ—Ä—è–µ–º—ã—Ö –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –µ–≥–æ –ø–æ–ª—É—á–∏—Ç—å, –Ω—É–∂–Ω–æ –∏–∑ –∫–∞–∂–¥–æ–≥–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –≤—ã—á–µ—Å—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ.

$$x_i = \frac{x_i - \bar{x}}{\sigma_X}$$

–ï—Å–ª–∏ –≤—Å–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è z-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å, —Ç–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å —Å—Ä–µ–¥–Ω–∏–º –≤ 0 –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º 1 (–∏–ª–∏ –æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ –∫ –Ω–∏–º).

```{r, echo = FALSE}
set.seed(42)
x <- rnorm(40, mean = 50, sd = 10)
tibble(x = x) %>% 
  mutate(scale = (x - mean(x))/sd(x)) %>% 
  pivot_longer(names_to = "type", values_to = "value", x:scale) %>% 
  mutate(type = ifelse(type == "scale", "–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ", "x")) %>% 
  group_by(type) %>% 
  mutate(mean = mean(value),
         sd = mean + sd(value)) %>% 
  ggplot(aes(value))+
  geom_vline(aes(xintercept = mean), linetype = 2)+
  geom_vline(aes(xintercept = sd), linetype = 4, color = "darkgreen")+
  geom_text(x = 68, y = 0.005, label = "—Å—Ç.\n –æ—Ç–∫–ª–æ–Ω.", alpha = 0.05, color = "darkgreen")+
  geom_text(x = 1.5, y = 0.05, label = "—Å—Ç.\n –æ—Ç–∫–ª–æ–Ω.", alpha = 0.05, color = "darkgreen")+
  geom_text(x = 42, y = 0.005, label = "—Å—Ä–µ–¥–Ω–µ–µ", alpha = 0.05)+
  geom_text(x = -0.6, y = 0.05, label = "—Å—Ä–µ–¥–Ω–µ–µ", alpha = 0.05)+
  geom_rug()+
  geom_density()+
  facet_wrap(~type, scale = "free")
```

–°–∞–º–æ –ø–æ —Å–µ–±–µ $z$-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –Ω–∞–º –ø—Ä–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ "–æ–±—â–µ–º—É –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—é" —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –¢. –µ. —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–∏—á–µ–≥–æ –Ω–∞–º –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

–í R z-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `scale()`. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–≤–∑—Ä–∞—â–∞–µ—Ç –º–∞—Ç—Ä–∏—Ü—É, –ø–æ—ç—Ç–æ–º—É —è –∏—Å–ø–æ–ª—å–∑—É—é –∏–Ω–¥–µ–∫—Å `[,1]`, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª –≤–µ–∫—Ç–æ—Ä–æ–º.

```{r}
set.seed(42)
x <- rnorm(20, mean = 50, sd = 10)
scale(x)[,1]
```

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞–µ—Ç —Ç–æ –∂–µ, —á—Ç–æ –º—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤ —Ñ–æ—Ä–º—É–ª–µ.

```{r}
scale(x)[,1] == (x-mean(x))/sd(x)
```

```{block, type = "rmdtask"}
–û–¥–Ω–∞–∂–¥—ã–π —è –∑–∞–ø–æ–ª—É—á–∏–ª –≥—Ä–∞–¥—É—Å–Ω–∏–∫ —Å–æ —à–∫–∞–ª–æ–π –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞ –∏ —Ü–µ–ª—ã–π –≥–æ–¥ –∏–∑–º–µ—Ä—è–ª —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤ –ú–æ—Å–∫–≤–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≥—Ä–∞–¥—É—Å–Ω–∏–∫–æ–≤ —Å —à–∫–∞–ª–æ–π –§–∞—Ä–∏–Ω–≥–µ–π—Ç–∞ –∏ –¶–µ–ª—å—Å–∏—è. [–í –¥–∞—Ç–∞—Å–µ—Ç](https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/moscow_average_temperature.csv) –∑–∞–ø–∏—Å–∞–Ω—ã —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π. –ß—Ç–æ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–∞–º–∏?
```

```{r, echo=FALSE, message=FALSE}
read_csv("https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/moscow_average_temperature.csv") %>% 
  group_by(type) %>% 
  mutate(normalised = scale(non_normalised)) %>% 
  pivot_longer(names_to = "normalisation", values_to = "value", non_normalised:normalised) %>% 
  ggplot(aes(value, color = type))+
  geom_density()+
  geom_rug()+
  facet_wrap(~normalisation, scales = "free")
```


## –ö–æ–≤–∞—Ä–∏–∞—Ü–∏—è

**–ö–æ–≤–∞—Ä–∏–∞—Ü–∏—è** --- —ç—Ç–∞ –º–µ—Ä–∞ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

$$cov(X, Y) = \frac{\sum_{i = 1}^n(x_i - \bar{x})(y_i-\bar{y})}{n - 1},$$

–≥–¥–µ

* $(x_1, y_1), ..., (x_n, y_n)$ --- –ø–∞—Ä—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $\bar{x}, \bar{y}$ --- —Å—Ä–µ–¥–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $X, Y$ --- –≤–µ–∫—Ç–æ—Ä—ã –≤—Å–µ—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $n$ --- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π.

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:

```{r, echo=FALSE}
set.seed(42)
tibble(x = rnorm(30, mean = 50, sd = 10), 
       y = x + rnorm(30, sd = 10)) %>% 
  mutate(x = x - mean(x)+ 50,
         y = y - mean(y)+ 55) ->
  df

df %>% 
  ggplot(aes(x, y))+
  geom_point()
```

–¢–æ–≥–¥–∞, —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–æ—Ä–º—É–ª–µ, –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –ø–ª–æ—â–∞–¥—å (–ø—É–∫—Ç–∏—Ä–Ω—ã–º–∏ –ª–∏–Ω–∏—è–º–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã —Å—Ä–µ–¥–Ω–∏–µ):

```{r, echo = FALSE}
df %>% 
  ggplot(aes(x, y))+
  geom_hline(aes(yintercept = mean(y)), linetype = 2)+
  geom_vline(aes(xintercept = mean(x)), linetype = 2)+
  geom_rect(aes(ymin = mean(y), ymax = y[which.max(x)], 
                xmin = mean(x), xmax = max(x)), 
            fill = "red", alpha = 0.01, show.legend = FALSE)+
  geom_text(aes(x = mean(x)+4), y = 26, label = "—Å—Ä–µ–¥–Ω–µ–µ x", alpha = 0.05)+
  geom_text(aes(y = mean(y)+2), x = 25, label = "—Å—Ä–µ–¥–Ω–µ–µ y", alpha = 0.05)+
  geom_point()
```

–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è $x_i$ –∏ $y_i$ –∫–∞–∫–æ–π-—Ç–æ —Ç–æ—á–∫–∏ –ª–∏–±–æ –æ–±–∞ –±–æ–ª—å—à–µ, –ª–∏–±–æ –æ–±–∞ –º–µ–Ω—å—à–µ —Å—Ä–µ–¥–Ω–∏—Ö $\bar{x}$ –∏ $\bar{y}$, —Ç–æ –ø–æ–ª—É—á–∏–≤—à–µ–µ—Å—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞–∫ `+`, –µ—Å–ª–∏ –∂–µ –Ω–∞–æ–±–æ—Ä–æ—Ç --- –∑–Ω–∞–∫ `-`. –ù–∞ –≥—Ä–∞—Ñ–∏–∫–µ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ —Ü–≤–µ—Ç–æ–º.

```{r, echo=FALSE}
df %>% 
  mutate(fill_color = (x > mean(x) & y > mean(y)) | (!x > mean(x) & !y > mean(y)),
         fill_color = !fill_color) %>% 
  ggplot(aes(x, y))+
  geom_rect(aes(xmin = mean(x), xmax = x, 
                ymin = mean(y), ymax = y, fill = fill_color, color = fill_color),
            alpha = 0.1, show.legend = FALSE)+
  geom_hline(aes(yintercept = mean(y)), linetype = 2)+
  geom_vline(aes(xintercept = mean(x)), linetype = 2)+
  geom_text(aes(x = mean(x)+4), y = 26, label = "—Å—Ä–µ–¥–Ω–µ–µ x", alpha = 0.05)+
  geom_text(aes(y = mean(y)+2), x = 25, label = "—Å—Ä–µ–¥–Ω–µ–µ y", alpha = 0.05)+
  geom_point()
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –º–Ω–æ–≥–æ –∫—Ä–∞—Å–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É–º–º—ã –±—É–¥–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏ –æ–±–æ–∑–Ω–∞—á–∞—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Å–≤—è–∑—å (—á–µ–º –±–æ–ª—å—à–µ $x$, —Ç–µ–º –±–æ–ª—å—à–µ $y$), –∞ –µ—Å–ª–∏ –±—É–¥–µ—Ç –º–Ω–æ–≥–æ —Å–∏–Ω–∏–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É–º–º—ã –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∏ –æ–±–æ–∑–Ω–∞—á–∞—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Å–≤—è–∑—å (—á–µ–º –±–æ–ª—å—à–µ $x$, —Ç–µ–º –º–µ–Ω—å—à–µ $y$). –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–∏ –Ω–µ –æ—á–µ–Ω—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–ª—å–Ω–æ –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç –¥–∞—Ç–∞—Å–µ—Ç–∞ –∫ –¥–∞—Ç–∞—Å–µ—Ç—É.

–í R –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `cov()`.

```{r}
set.seed(42)
x <- rnorm(10, mean = 50, sd = 10)
y <-  x + rnorm(10, sd = 10)
cov(x, y)
cov(x, -y*2)
```

–ö–∞–∫ –≤–∏–¥–Ω–æ, –ø—Ä–æ—Å—Ç–æ–µ —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ —É–¥–≤–æ–∏–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –Ω–µ —Å—Ç–æ–∏—Ç.

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞–µ—Ç —Ç–æ –∂–µ, —á—Ç–æ –º—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤ —Ñ–æ—Ä–º—É–ª–µ.

```{r}
cov(x, y) == sum((x-mean(x))*(y - mean(y)))/(length(x)-1)
```


## –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è

**–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è** --- —ç—Ç–æ –º–µ—Ä–∞ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏/—Å–≤—è–∑–∏ –¥–≤—É—Ö —á–∏—Å–ª–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –±—ã—Ç–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Ü–≤–µ—Ç–∞ –≥–ª–∞–∑ –∏ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å –Ω–∞ –∑–∞–Ω—è—Ç–∏—è—Ö –ø–æ R) –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

### –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ü–∏—Ä—Å–æ–Ω–∞

**–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ü–∏—Ä—Å–æ–Ω–∞** --- –±–∞–∑–æ–≤—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –æ–¥–Ω–∞–∫–æ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –æ–Ω –¥–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É, –µ—Å–ª–∏ —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –Ω–µ–ª–∏–Ω–µ–π–Ω–∞.

$$\rho_{X,Y} = \frac{cov(X, Y)}{\sigma_X\times\sigma_Y} = \frac{1}{n-1}\times\sum_{i = 1}^n\left(\frac{x_i-\bar{x}}{\sigma_X}\times\frac{y_i-\bar{y}}{\sigma_Y}\right),$$

–≥–¥–µ 

* $(x_1, y_1), ..., (x_n, y_n)$ --- –ø–∞—Ä—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $\bar{x}, \bar{y}$ --- —Å—Ä–µ–¥–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $X, Y$ --- –≤–µ–∫—Ç–æ—Ä—ã –≤—Å–µ—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π;
* $n$ --- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π.

–ü–æ—Å–ª–µ–¥–Ω–µ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ü–∏—Ä—Å–æ–Ω–∞ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–µ (—Å –ø–æ–ø—Ä–∞–≤–∫–æ–π, –ø–æ—ç—Ç–æ–º—É $n-1$, –∞ –Ω–µ $n$) –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ $z$-–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

```{r, echo=FALSE}
df %>% 
  mutate_all(scale) %>% 
  mutate(fill_color = (x > mean(x) & y > mean(y)) | (!x > mean(x) & !y > mean(y)),
         fill_color = !fill_color) %>% 
  ggplot(aes(x, y))+
  geom_rect(aes(xmin = mean(x), xmax = x, 
                ymin = mean(y), ymax = y, fill = fill_color, color = fill_color),
            alpha = 0.1, show.legend = FALSE)+
  geom_hline(aes(yintercept = mean(y)), linetype = 2)+
  geom_vline(aes(xintercept = mean(x)), linetype = 2)+
  geom_text(aes(x = mean(x)+0.8), y = -2, label = "–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ x", alpha = 0.05)+
  geom_text(aes(y = mean(y)+0.1), x = -1.6, label = "–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ y", alpha = 0.05)+
  geom_point()
```

–≠—Ç–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ 

* –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏–º–µ—é—Ç —Ç–µ –∂–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∑–Ω–∞–∫–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —á—Ç–æ –∏ –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—è:
    * –µ—Å–ª–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π (—Ç. –µ. –º–Ω–æ–≥–æ –∫—Ä–∞—Å–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤) --- —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è (—á–µ–º **–±–æ–ª—å—à–µ** $x$, —Ç–µ–º **–±–æ–ª—å—à–µ** $y$), 
    * –µ—Å–ª–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π (—Ç. –µ. –º–Ω–æ–≥–æ —Å–∏–Ω–∏—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤) --- —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è (—á–µ–º **–±–æ–ª—å—à–µ** $x$, —Ç–µ–º **–º–µ–Ω—å—à–µ** $y$);
* –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏–º–µ–µ–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ—Ç —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Ç–∞—Ü–∏—è:
    * –µ—Å–ª–∏ –º–æ–¥—É–ª—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –±–ª–∏–∑–æ–∫ –∫ 1 –∏–ª–∏ –µ–º—É —Ä–∞–≤–µ–Ω --- —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–∏–ª—å–Ω–∞—è,
    * –µ—Å–ª–∏ –º–æ–¥—É–ª—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –±–ª–∏–∑–æ–∫ –∫ 0 –∏–ª–∏ –µ–º—É —Ä–∞–≤–µ–Ω --- —Å–≤—è–∑—å –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–ª–∞–±–∞—è.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–µ–µ, —á—Ç–æ —Ç–∞–∫–æ–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è, –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞—Å—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏:

```{r, message = FALSE, warning=FALSE, echo = FALSE}
set.seed(42)
map_dfr(c(-0.5, -0.75, -0.95, 0.5, 0.75, 0.95), function(i){
  MASS::mvrnorm(n=100, 
                mu=rep(50,2), 
                Sigma=matrix(i, nrow=2, ncol=2) + diag(2)*(1-i)) %>% 
    as_tibble() %>% 
    mutate(id = i) %>% 
    rename(x = V1,
           y = V2)}) %>% 
  group_by(id) %>% 
  mutate(cor = round(cor(x, y), 3)) %>%
  ggplot(aes(x, y))+
  geom_smooth(method = "lm", se = FALSE, color = "gray80")+
  geom_point()+
  facet_wrap(~cor, nrow = 2, scales = "free")+
  labs(x = "", y = "")
```

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —ç—Ç–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞, —á–µ–º –±–ª–∏–∂–µ –º–æ–¥—É–ª—å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∫ 1, —Ç–µ–º –±–æ–ª–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —Ç–æ—á–∫–∏ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É, —á–µ–º –±–ª–∏–∂–µ –∫ 0, —Ç–µ–º –±–æ–ª–µ–µ —Ä–∞—Å—Å–µ—è–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–µ–≥–∫–æ –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∫–æ—ç—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –Ω–∞ –≥–ª–∞–∑, –ø–æ–∏–≥—Ä–∞–≤ 2--5 –º–∏–Ω—É—Ç –≤ –∏–≥—Ä—É "–£–≥–∞–¥–∞–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é" [–∑–¥–µ—Å—å](http://guessthecorrelation.com/) –∏–ª–∏ [–∑–¥–µ—Å—å](https://cheng-dsdp.shinyapps.io/CorApp/).

–í R –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ü–∏—Ä—Å–æ–Ω–∞ –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `cor()`.

```{r}
set.seed(42)
x <- rnorm(15, mean = 50, sd = 10)
y <-  x + rnorm(15, sd = 10)
cor(x, y)
```

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞–µ—Ç —Ç–æ –∂–µ, —á—Ç–æ –º—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤ —Ñ–æ—Ä–º—É–ª–µ.

```{r}
cor(x, y) == cov(x, y)/(sd(x)*sd(y))
cor(x, y) == sum(scale(x)*scale(y))/(length(x)-1)
```

### –†–∞–Ω–≥–æ–≤—ã–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –°–ø–∏—Ä–º–∞–Ω–∞ –∏ –ö–µ–Ω–¥–∞–ª–∞

## –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–§–æ—Ä–º—É–ª–∞ –ø—Ä—è–º–æ–π –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–≤—É—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–ª–µ–Ω–∞ (intercept) –∏ —É–≥–ª–æ–≤–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ (slope).

```{r, echo=FALSE}
set.seed(42)
tibble(x = rnorm(100)+1,
       y = rnorm(100)+3) %>% 
  ggplot(aes(x, y))+
  geom_point(alpha = 0)+
  geom_hline(yintercept = 0)+
  geom_vline(xintercept = 0)+
  geom_abline(intercept = 1, slope = 1, color = "red")+
  geom_abline(intercept = 2, slope = 2, color = "darkgreen")+
  geom_abline(intercept = 3, slope = -1, color = "navy")+
  scale_x_continuous(breaks = -2:4)+
  scale_y_continuous(breaks = 0:5)+
  coord_equal()
```

```{block, type = "rmdtask"}
–£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –¥–ª—è –∫—Ä–∞—Å–Ω–æ–π –ø—Ä—è–º–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(1, options = -2:4, type = "radio", alignment = TRUE)
```

```{block, type = "rmdtask"}
–£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –¥–ª—è –∑–µ–ª–µ–Ω–æ–π –ø—Ä—è–º–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(2, options = -2:4, type = "radio", alignment = TRUE)
```

```{block, type = "rmdtask"}
–£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –¥–ª—è —Å–∏–Ω–µ–π –ø—Ä—è–º–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(3, options = -2:4, type = "radio", alignment = TRUE)
```

```{block, type = "rmdtask"}
–£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–≥–ª–æ–≤–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –∫—Ä–∞—Å–Ω–æ–π –ø—Ä—è–º–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(1, options = -2:4, type = "radio", alignment = TRUE)
```

```{block, type = "rmdtask"}
–£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–≥–ª–æ–≤–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –∑–µ–ª–µ–Ω–æ–π –ø—Ä—è–º–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(2, options = -2:4, type = "radio", alignment = TRUE)
```

```{block, type = "rmdtask"}
–£–∫–∞–∂–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–≥–ª–æ–≤–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è —Å–∏–Ω–µ–π –ø—Ä—è–º–æ–π.
```

```{r, results='asis', echo = FALSE}
check_question(-1, options = -2:4, type = "radio", alignment = TRUE)
```

–ö–æ–≥–¥–∞ –º—ã –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π $Y$ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –¥—Ä—É–≥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π $X$, –º—ã –ø–æ–ª—É—á–∞–µ–º –ø–æ—Ö–æ–∂—É—é —Ñ–æ—Ä–º—É–ª—É:

$$y_i = \hat\beta_0 + \hat\beta_1 \times x_i + \epsilon_i,$$
–≥–¥–µ

* $x_i$ --- $i$-—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–π $X$;
* $y_i$ --- $i$-—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–π $Y$;
* $\hat\beta_0$ --- –æ—Ü–µ–Ω–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–ª–µ–Ω–∞ (intercept);
* $\hat\beta_1$ --- –æ—Ü–µ–Ω–∫–∞ —É–≥–ª–æ–≤–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ (slope);
* $\epsilon_i$ --- $i$-—ã–π –æ—Å—Ç–∞—Ç–æ–∫, —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –æ—Ü–µ–Ω–∫–æ–π –º–æ–¥–µ–ª–∏ ($\hat\beta_0 + \hat\beta_1 \times x_i$) –∏ —Ä–µ–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º $y_i$; –≤–µ—Å—å –≤–µ–∫—Ç–æ—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç —Å–ª—É—á–∞–π–Ω—ã–º —à—É–º–æ–º.

–ó–∞–¥–∞—á–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ --- –æ—Ü–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã $\hat\beta_0$ –∏ $\hat\beta_1$, –µ—Å–ª–∏ –Ω–∞–º –∏–∑–≤–µ—Å—Ç–Ω—ã –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è $x_i$ –∏ $y_i$.

$$\hat\beta_1 = \frac{(\sum_{i=1}^n x_i\times y_i)-n\times\bar x \times \bar y}{\sum_{i = 1}^n(x_i-\bar x)^2}$$

$$\hat\beta_0 = \bar y - \hat\beta_1\times\bar x$$

<!--chapter:end:14-regression.Rmd-->

---
output: html_document
editor_options: 
  chunk_output_type: console
---
# –†–∞–±–æ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞

```{r, message=FALSE}
library("tidyverse")
```

```{r, include=FALSE}
theme_set(theme_bw())
```

## –í–≤–µ–¥–µ–Ω–∏–µ

–î–æ —Å–∏—Ö –ø–æ—Ä –º—ã –ª–∏—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å. –û–¥–Ω–∞–∫–æ —á–∞—Å—Ç–æ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–∫–ª–∞–¥–∫–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏—Ö –∫–∞–∫ –¥–∞–Ω–Ω–æ—Å—Ç—å, –Ω–∞–¥–µ—è—Å—å —á—Ç–æ —Å–æ—Ñ—Ç –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ—Å—á–∏—Ç–∞–ª. –ó–¥–µ—Å—å –µ—Å—Ç—å –¥–≤–µ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –≤–æ-–ø–µ—Ä–≤—ã—Ö, –±—ã–≤–∞—é—Ç –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏; –≤–æ-–≤—Ç–æ—Ä—ã—Ö, –ª—é–¥–∏ —á–∞—Å—Ç–æ –æ—à–∏–±–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (–∏ –≤–∏–¥–∏–º–æ, —ç—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è —á–∞—â–µ). –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å—Ç—ã–µ —Å–ª—É—á–∞–∏, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —á—Ç–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ –≤—Ä–µ–º—è —Ä–µ–≤—å—é —Å—Ç–∞—Ç–µ–π —É—á–µ–Ω—ã—Ö –∏ –¥–∞—Ç–∞ –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–æ–≤) –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –∫ –¥–∞–Ω–Ω—ã–º –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞. –î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –≤–¥–æ—Ö–Ω–∞–≤–ª–µ–Ω –ª–µ–∫—Ü–∏–µ–π [–ö—Ä–∏—Å—Ç–∏–Ω –°–∞–π–Ω–∞–Ω–∏](http://learn.stanford.edu/WBN-MED-STATS-On-Demand-2020-02-05_LP-OD-Registration-2020-02-11.html?utm_source=coursera&utm_medium=email&utm_campaign=med-stats).

## –í–æ–∑–º–æ–∂–Ω–æ –ª–∏ —Ç–∞–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ?

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –ø—Ä–æ–≤–µ–ª —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –±–∏–Ω–æ–º–∏–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—á–∏—Ç–∞–ª –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ *–Ω–µ* –≤ —Ä–∞—Å—Å–∫–∞–∑–µ –ê. –ü. –ß–µ—Ö–æ–≤–∞ –¥–ª–∏–Ω–Ω–æ–π  322 —Å–ª–æ–≤–∞ "–ñ–∏–∑–Ω—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞!" –∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª —Å—Ä–µ–¥–Ω–µ–µ 0.095. –í–æ–∑–º–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ?

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

```{r}
tibble(ratio = round(1:322/322, 3)) %>% 
  ggplot()+
  geom_vline(aes(xintercept = ratio), color = "lightblue")+
  geom_vline(xintercept = 0.095, color = "red")
```

–¢–∞–∫ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–∏–¥–Ω–æ, –¥–∞–≤–∞–π—Ç–µ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø—Ä–æ–º–µ–∂—É–∫–µ –æ—Ç 0.085 –¥–æ 0.1, –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∏—Ç –∑–∞–≤—è–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 0.095, –∏ –¥–æ–±–∞–≤–∏–º –ø–æ–¥–ø–∏—Å–∏:

```{r, warning=FALSE}
tibble(ratio = round(1:322/322, 3)) %>% 
  ggplot()+
  geom_vline(aes(xintercept = ratio), color = "lightblue")+
  geom_vline(xintercept = 0.095, color = "red")+
  geom_label(aes(x = ratio, label = ratio), y = 0.5)+
  xlim(0.085, 0.1)
```

–ú—ã –≤–∏–¥–∏–º, —á—Ç–æ –∫—Ä–∞—Å–Ω—ã–µ –ª–∏–Ω–∏–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 0.03 –∏ —á—Ç–æ —Å–∏–Ω—è—è –ª–∏–Ω–∏—è —è–≤–Ω–æ –Ω–µ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω. –ú–æ–∂–µ—Ç –±—ã—Ç—å –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥—Ä—É–≥–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ?

```{r, warning=FALSE}
tibble(ratio = round(1:322/322, 5)) %>% 
  ggplot()+
  geom_vline(aes(xintercept = ratio), color = "lightblue")+
  geom_vline(xintercept = 0.095, color = "red")+
  geom_label(aes(x = ratio, label = ratio), y = 0.5)+
  xlim(0.085, 0.1)
```

–ï—Å–ª–∏ –±—ã —á–∏—Å–ª–∞ –æ–∫—Ä—É–≥–ª—è–ª–∏—Å—å –≤–≤–µ—Ä—Ö, –Ω–∞ –º–µ—Å—Ç–µ 0.09317 –º—ã –±—ã —É–≤–∏–¥–µ–ª–∏ 0.094. –ï—Å–ª–∏ –±—ã —á–∏—Å–ª–∞ –æ–∫—Ä—É–≥–ª—è–ª–∏—Å—å –≤–Ω–∏–∑, –Ω–∞ –º–µ—Å—Ç–µ 0.09627 –º—ã –±—ã —É–≤–∏–¥–µ–ª–∏ 0.096. –¢–∞–∫ —á—Ç–æ –¥–æ–ª—è *–Ω–µ* –≤ —Ä–∞—Å—Å–∫–∞–∑–µ –¥–ª–∏–Ω–Ω–æ–π 322 –Ω–∏–∫–∞–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0.095. –ú–æ–∂–µ—Ç –±—ã—Ç—å –∞–≤—Ç–æ—Ä –æ—à–∏–±—Å—è —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ª–æ–≤? 

```{r}
200:400*0.095
```

–°—Ä–µ–¥–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —á–∏—Å–ª–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö 200 –∏ 400. –¢–∞–∫ —á—Ç–æ, –µ—Å–ª–∏ –∞–≤—Ç–æ—Ä –∏ –æ—à–∏–±—Å—è –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–ª–æ–≤, —Ç–æ —Å–ª–∏—à–∫–æ–º –º–∞—Å—à—Ç–∞–±–Ω–æ. –ï—â–µ –∞–≤—Ç–æ—Ä –º–æ–≥ –æ—à–∏–±–∏—Ç—å—Å—è –∏ —Ç–∞–º, –∏ —Ç–∞–º. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å:

```{r}
round(200:400*0.095) == 200:400*0.095
```

## Granularity-Related Inconsistent Means (GRIM) test

## –ü–∞–∫–µ—Ç `statcheck`

–ü–∞–∫–µ—Ç `statcheck` –Ω–∞–ø–∏—Å–∞–Ω –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –≤ —Å—Ç–∞—Ç—å—è—Ö. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∏ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ t-—Ç–µ—Å—Ç–æ–≤:

```{r}
t.test(data = mtcars, qsec ~ am)
t.test(data = mtcars, qsec ~ am, alternative = "greater")
```

–ó–∞–ø—É—Å—Ç–∏–º –≤ —Ñ—É–Ω–∫—Ü–∏—é `statcheck()` —Ç—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

* —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Ç–µ—Å—Ç–∞;
* —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Ç–µ—Å—Ç–∞;
* —Å–æ–≤—Å–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

```{r, message = FALSE}
library("statcheck")
s <- statcheck(c("t(25.534) = 1.2878, p = 0.21", 
                 "t(25.534) = 1.2878, p = 0.10",
                 "t(22.716) = 3.7671, p < 0.01"))
s
```

–¢–µ–ø–µ—Ä—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `s` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–∞—Ç–∞—Ñ—Ä–µ–π–º —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

* `Source`
* `Statistic`
* `df1`
* `df2` 
* `Test.Comparison` 
* `Value` 
* `Reported.Comparison` 
* `Reported.P.Value` 
* `Computed` 
* `Raw` 
* `Error` 
* `DecisionError` 
* `OneTail` 
* `OneTailedInTxt` 
* `APAfactor`

–§—É–Ω–∫—Ü–∏—è `statcheck()` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–º–∏: $t$-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, $F$-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–º—ã –µ–µ –≤–∏–¥–µ–ª–∏ –≤ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏), –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏, —Ö–∏-–∫–≤–∞–¥—Ä–∞—Ç –∏ $z$-score (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ z-—Ç–µ—Å—Ç–µ).

–í [–º–∞–Ω—É–∞–ª–µ](https://rpubs.com/michelenuijten/statcheckmanual) –∫ –ø–∞–∫–µ—Ç—É –æ–ø–∏—Å–∞–Ω—ã –º–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–∑ —Å—Ç–∞—Ç—å–∏, –∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ .pdf –∏–ª–∏ .html.

## –ü–∞–∫–µ—Ç `digitize`

–ò–Ω–æ–≥–¥–∞ –Ω–∞–º –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤–∏–∑—É–∞–ª—å–Ω–æ:

```{r}
set.seed(42)
tibble(x = rnorm(20, mean = 40, sd = 10),
       y = x + rnorm(20, mean = 0, sd = 5)) %>% 
  ggplot(aes(x, y))+
  geom_point()+
  annotate(geom = "text", x = 20, y = 60, label = "r = 0.92", size = 8)
```

–ö–∞–∫ –±—ã –Ω–∞–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é –ü–∏—Ä—Å–æ–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ? –î–ª—è —ç—Ç–æ–≥–æ –º—ã –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –ø–∞–∫–µ—Ç–æ–º `digitize` (–æ–¥–Ω–∞–∫–æ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ [–æ–Ω–ª–∞–π–Ω](https://apps.automeris.io/wpd/)). –ù–∞ –ø–µ—Ä–≤–æ–º —à–∞–≥–µ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã. –ü—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `ReadAndCal()` —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–º–µ—Ç—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –æ—Å–∏ x, –∑–∞—Ç–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –æ—Å–∏ —Ö, –∑–∞—Ç–µ–º –æ—Ç–º–µ—Ç—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –æ—Å–∏ y, –∑–∞—Ç–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –æ—Å–∏ y:

```{r, eval=FALSE}
library(digitize)
calibration <-  ReadAndCal('images/test_correlaton.png')
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –æ—Ç–º–µ—Ç–∏—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ—è–≤—è—Ç—Å—è —Å–∏–Ω–∏–µ –∫—Ä–µ—Å—Ç–∏–∫–∏:

![](images/test_correlation_calibration.png)

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ --- —ç—Ç–æ –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `DigitData()` (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É `Finish` –Ω–∞–≤–µ—Ä—Ö—É –∏–ª–∏ –∫–ª–∞–≤–∏—à—É `Esc`):

```{r, eval=FALSE}
data.points <- DigitData(col = 'red')
```

–¢–µ–ø–µ—Ä—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∏–Ω–∏–µ –∫—Ä–µ—Å—Ç–∏–∫–∏, –Ω–æ –∏ –∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏:

![](images/test_correlation_points.png)

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `Calibrate()`, —á—Ç–æ–±—ã –æ—Ç–∫–∞–ª–∏–±—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏:

```{r, eval=FALSE}
df <- Calibrate(data.points, calibration, 
                15, # –º–∏–Ω–∏–º—É–º –ø–æ –æ—Å–∏ x
                60, # –º–∞–∫—Å–∏–º—É–º –ø–æ –æ—Å–∏ x
                20, # –º–∏–Ω–∏–º—É–º –ø–æ –æ—Å–∏ y
                60) # –º–∞–∫—Å–∏–º—É–º –ø–æ –æ—Å–∏ y
```

```{r, include=FALSE}
df <- read_csv("data/test_correlation_dataset.csv")
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫ —Ç–æ—á–∫–∏ —Å–æ–æ—Ç–Ω–æ—Å—è—Ç—Å—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º: 
```{r}
df$type <- "obtained"

set.seed(42)
tibble(x = rnorm(20, mean = 40, sd = 10),
       y = x + rnorm(20, mean = 0, sd = 5),
       type = "original") %>% 
  bind_rows(df) %>% 
  ggplot(aes(x, y, color = type))+
  geom_point()
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–ª–∏–∑–∫–∏–π, –¥–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏:

```{r}
cor(df$x, df$y)
```

–ò –≤–æ—Ç –º—ã –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ü–∏—Ä—Å–æ–Ω–∞ –Ω–∞ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–≤–µ–Ω `0.95`, —á—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∑–∞—è–≤–ª–µ–Ω–Ω—ã—Ö `0.92`.

–£ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∫–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å –æ—á–µ–≤–∏–¥–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ—á–µ–∫ –º–µ—Ç–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ç—Ä—É–¥–æ–µ–º–∫–∏–º;
* —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å —Ç—ã–∫–∞–Ω–∏—è –ø–ª–æ—Ö–æ –≤–µ—Ä–µ—Ñ–∏—Ü–∏—Ä—É–µ–º, –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ —Ç–∫–Ω—É—Ç—å –¥–≤–∞ —Ä–∞–∑–∞ –Ω–∞ –æ–¥–Ω—É —Ç–æ—á–∫—É –∏–ª–∏ –æ—Ç–º–µ—Ç–∏—Ç—å –¥–≤–∞ —Ä–∞–∑–∞ –≥—Ä—É–ø–ø—É —Ç–æ—á–µ–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ–º—É –ø–æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ —Ä–∞–Ω—å—à–µ –æ–Ω —ç—Ç—É –≥—Ä—É–ø–ø—É –Ω–µ –æ—Ç–º–µ—á–∞–ª;
* –¥–∞–∂–µ –ø—Ä–∏ –º–∞–ª–µ–Ω—å–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ—á–µ–∫ –º—ã –Ω–µ –º–æ–∂–µ–º –∑–∞–º–µ—Ç–∏—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂–∏. –¢. –µ. –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–µ —Ç–æ—á–∫–∏, –∞ –¥–µ—Ç–µ–∫—Ç–∏–≤ –ø–æ—Å—Ç–∞–≤–∏—Ç –ª–∏—à—å –æ–¥–Ω—É;
* –µ—Å–ª–∏ –í–∞—à–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–æ, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.

<!--chapter:end:15-statistical-detective.Rmd-->

# –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è

<!--chapter:end:16-clusterization.Rmd-->

# –ú–µ—Ç–æ–¥—ã —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–µ–π

<!--chapter:end:17-PCA.Rmd-->

# –ó–∞–¥–∞–Ω–∏—è {#tasks}

```{r include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

## –í–µ–∫—Ç–æ—Ä {#vec_task_1}

- –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ª–æ–≥–∞—Ä–∏—Ñ–º –æ—Ç 8912162342 –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é 6

```{r}
log(8912162342, 6)

```

- –¢–µ–ø–µ—Ä—å –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –ª–æ–≥–∞—Ä–∏—Ñ–º 10 –∏ —É–º–Ω–æ–∂—å—Ç–µ –µ–≥–æ –Ω–∞ 5

```{r}
log(10)*5
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –æ—Ç 1 –¥–æ 20

```{r}
1:20
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –æ—Ç 20 –¥–æ 1

```{r}
20:1
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –æ—Ç 1 –¥–æ 20 –∏ —Å–Ω–æ–≤–∞ –¥–æ 1. –ß–∏—Å–ª–æ 20 –¥–æ–ª–∂–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!

```{r}
c(1:20, 19:1)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä 2, 4, 6,  ... , 18, 20

```{r}
seq(2,20, 2)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –∏–∑ –æ–¥–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã, –¥–≤—É—Ö –¥–≤–æ–µ–∫, —Ç—Ä–µ—Ö —Ç—Ä–æ–µ–∫, .... , –¥–µ–≤—è—Ç–∏ –¥–µ–≤—è—Ç–æ–∫

```{r}
rep(1:9, 1:9)
```

- –°–¥–µ–ª–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä vec, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–µ–¥–∏–Ω–∏—Ç–µ `3`, –∞ —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏—è `"–ú–æ–π"` –∏ `"–≤–µ–∫—Ç–æ—Ä"`.

```{r}
vec <- c(3, "–ú–æ–π", "–≤–µ–∫—Ç–æ—Ä")
vec
```

- –í—ã—á–µ—Å—Ç—å `TRUE` –∏–∑ 10

```{r}
10 - TRUE
```

- –°–æ–µ–¥–∏–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `10` –∏ `TRUE` –≤ –≤–µ–∫—Ç–æ—Ä `vec`

```{r}
vec <- c(10, TRUE)
vec
```

- –°–æ–µ–¥–∏–Ω–∏—Ç–µ –≤–µ–∫—Ç–æ—Ä `vec` –∏ –∑–Ω–∞—á–µ–Ω–∏–µ `"r"`:

```{r}
c(vec, "r")
```

- –°–æ–µ–¥–∏–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è `10`, `TRUE`, `"r"`  –≤ –≤–µ–∫—Ç–æ—Ä.

```{r}
c(10, TRUE, "r")
```

## –í–µ–∫—Ç–æ—Ä. –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ {#vec_op}

–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä `p`, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π 4, 5, 6, 7, –∏ –≤–µ–∫—Ç–æ—Ä `q`, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ 0, 1, 2, 3. 

```{r}
p <- 4:7
p
q <- 0:3
q
```

–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω—É—é —Å—É–º–º—É –≤–µ–∫—Ç–æ—Ä–æ–≤ `p` –∏ `q`:

```{r}
p + q
```

–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É `p` –∏ `q`:

```{r}
p - q
```

–ü–æ–¥–µ–ª–∏—Ç–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `p` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –µ–º—É —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `q`:

> –û, –¥–∞, –í–∞–º –Ω—É–∂–Ω–æ –¥–µ–ª–∏—Ç—å –Ω–∞ 0!

```{r}
p/q
```

–í–æ–∑–≤–µ–¥–∏—Ç–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `p` –≤ —Å—Ç–µ–ø–µ–Ω—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –µ–º—É —ç–ª–µ–º–µ–Ω—Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞ `q`:

```{r}
p^q
```


–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 10:

```{r}
(1:10)^2
```

–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä 0, 2, 0, 4, ... , 18, 0, 20

```{r}
1:20 * 0:1
```

## –í–µ–∫—Ç–æ—Ä. –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ {#vec_task_2}

–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä `vec1`:

```{r, echo = TRUE}
vec1 <- c(3, 5, 2, 1, 8, 4, 9, 10, 3, 15, 1, 11)
```

- –ù–∞–π–¥–∏—Ç–µ –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `vec1`:

```{r}
vec1[2]
```

- –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `vec1`

```{r}
vec1[length(vec1)]
```

- –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ `vec1`, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ 4

```{r}
vec1[vec1>4]
```

- –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ vec1, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ 4, –Ω–æ –º–µ–Ω—å—à–µ 10

```{r}
vec1[vec1>4 & vec1<10]
```

- –í–æ–∑–≤–µ–¥–∏—Ç–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ `vec1`

```{r}
vec1^2
```

- –í–æ–∑–≤–µ–¥–∏—Ç–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç –∫–∞–∂–¥–æ–µ –Ω–µ—á–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –∏ –∏–∑–≤–ª–µ–∫–∏—Ç–µ –∫–æ—Ä–µ–Ω—å –∫–∞–∂–¥–æ–≥–æ —á–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `vec1`

```{r}
vec1 ^ c(2, 0.5)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä `vec2`, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è `vec1`, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—å—à–µ 10 –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `NA`.

```{r}
vec2 <- vec1
vec2[vec2<10] <- NA
vec2
```


- –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ —Å—É–º–º—É `vec2` —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `sum()`. –û—Ç–≤–µ—Ç `NA` –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è!

```{r}
sum(vec2, na.rm = TRUE)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä 2, 4, 6,  ... , 18, 20 –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 –Ω–æ–≤—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏

> –ó–Ω–∞—é, —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º, –Ω–æ —ç—Ç–æ –æ—á–µ–Ω—å –±–∞–∑–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏. –ß–µ–º –±–æ–ª—å—à–µ —Å–ø–æ—Å–æ–±–æ–≤ –í—ã –∑–Ω–∞–µ—Ç–µ, —Ç–µ–º –ª—É—á—à–µ!

```{r}
(1:20)[c(F,T)]
#(1:10)*2
```

## –°–ø–∏—Å–∫–∏ {#list_ta}

–î–∞–Ω —Å–ø–∏—Å–æ–∫ `list_1`:

```{r, echo = TRUE}
list_1 = list(numbers = 1:5, letters = letters, logic = TRUE)
list_1
```

- –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–∫–æ–º.

```{r}
list_1[1]
```

- –¢–µ–ø–µ—Ä—å –Ω–∞–π–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–º.

```{r}
list_1[[1]]
list_1$numbers
```

–¢–µ–ø–µ—Ä—å –≤–æ–∑—å–º–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–º.

```{r}
list_1[[1]][1]
```

–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ `list_2`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤ —Å–µ–±–µ –¥–≤–∞ —Å–ø–∏—Å–∫–∞ `list_1` —Å –∏–º–µ–Ω–∞–º–∏ `pupa` –∏ `lupa`.

```{r}
list_2 = list(pupa = list_1, lupa = list_1)
list_2
```

–ò–∑–≤–ª–µ–∫–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞, –∏–∑ –Ω–µ–≥–æ - –≤—Ç–æ—Ä–æ–π –ø–æ–ª—ç–ª–µ–º–µ–Ω—Ç, –∞ –∏–∑ –Ω–µ–≥–æ - —Ç—Ä–µ—Ç—å–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```{r}
list_2[[1]][[2]][3]
```

## –ú–∞—Ç—Ä–∏—Ü—ã {#t}

- –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ç—Ä–∏—Ü—É 4—Ö4, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ –µ–¥–∏–Ω–∏—Ü. –ù–∞–∑–æ–≤–∏—Ç–µ –µ–µ `M`

```{r}
M <- matrix(rep(1, 16), ncol = 4)
M
```

- –ü–æ–º–µ–Ω—è–π—Ç–µ –≤—Å–µ –Ω–µ–∫—Ä–∞–π–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Ç—Ä–∏—Ü—ã `M` (—Ç–æ –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ö [2,2], [2,3], [3,2] –∏ [3,3]) –Ω–∞ —á–∏—Å–ª–æ 2.

```{r}
M[2:3, 2:3] <- 2
M
```

- –í—ã–¥–µ–ª–∏—Ç–µ –≤—Ç–æ—Ä–æ–π –∏ —Ç—Ä–µ—Ç–∏–π —Å—Ç–æ–ª–±–∏–∫ –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã `M`

```{r}
M[,2:3]
```

- –°—Ä–∞–≤–Ω–∏—Ç–µ (`==`) –≤—Ç–æ—Ä—É—é –∫–æ–ª–æ–Ω–∫—É –∏ –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ—á–∫—É –º–∞—Ç—Ä–∏—Ü—ã `M`
```{r}
M[,2] == M[2,]
```


- –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —É–º–Ω–æ–∂–µ–Ω–∏—è (9—Ö9) –≤ –≤–∏–¥–µ –º–∞—Ç—Ä–∏—Ü—ã. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `tab`:

```{r}
tab <- matrix(rep(1:9, rep(9,9))*(1:9), nrow = 9)
tab

#–ï—â–µ
#outer(1:9, 1:9, "*")
#1:9 %o% 1:9
```

- –ò–∑ –º–∞—Ç—Ä–∏—Ü—ã `tab` –≤—ã–¥–µ–ª–∏—Ç–µ –ø–æ–¥–º–∞—Ç—Ä–∏—Ü—É, –≤–∫–ª—é—á–∞—é—â—É—é –≤ —Å–µ–±—è —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ—á–∫–∏ —Å 6 –ø–æ 8 –∏ —Å—Ç–æ–ª–±—Ü—ã —Å 3 –ø–æ 7.

```{r}
tab[6:8, 3:7]
```

- –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ç—Ä–∏—Ü—É —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –≥–¥–µ `TRUE`, –µ—Å–ª–∏ –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü–µ —É–º–Ω–æ–∂–µ–Ω–∏—è (`tab`) –¥–≤—É–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ –∏ `FALSE`, –µ—Å–ª–∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–µ.

> –ú–∞—Ç—Ä–∏—Ü–∞ - —ç—Ç–æ –ø–æ—á—Ç–∏ –≤–µ–∫—Ç–æ—Ä. –ö –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º.

```{r}
tab>=10
```

- –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ç—Ä–∏—Ü—É `tab2`, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è `tab` –º–µ–Ω—å—à–µ 10 –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ 0.

```{r}
tab2 <- tab
tab2[tab<10] <- 0
tab2
```


## –î–∞—Ç–∞—Ñ—Ä–µ–π–º {#df_task}

- –ö—Ç–æ —è–≤–ª—è–µ—Ç—Å—è 274—ã–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –≤ `got` –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–µ? –ò–∑ –∫–∞–∫–æ–≥–æ –æ–Ω –¥–æ–º–∞?

```{r}
got[274, 1:2]
```

- –ù–∞–π–¥–∏—Ç–µ –∏–º–µ–Ω–∞ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏–∑ –¥–æ–º–∞ (`Allegiances`) `"Tyrell"` –∏ `"House Tyrell"`.

```{r}
got[got$Allegiances %in% c("Tyrell", "House Tyrell"), "Name"]
```

- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–∞—Ç–∞—Ñ—Ä–µ–π–º `greyjoy_women`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è —Ç–æ–ª—å–∫–æ –∂–µ–Ω—â–∏–Ω –ì—Ä–µ–π–¥–∂–æ–µ–≤ (`"Greyjoy"`, `"House Greyjoy"`)

```{r}
greyjoy_women <- got[got$Allegiances %in% c("Greyjoy", "House Greyjoy") & got$Gender == 0, ]
greyjoy_women
```

- –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∂–µ–Ω—Å–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –∫–Ω–∏–≥–∞—Ö "–ü–µ—Å–Ω–∏ –ª—å–¥–∞ –∏ –ø–ª–∞–º–µ–Ω–∏"?

```{r}
sum(got$Gender == 0)
```

- –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∂–µ–Ω—Å–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –¥–≤–æ—Ä—è–Ω—Å–∫–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∫–Ω–∏–≥–∞—Ö "–ü–µ—Å–Ω–∏ –ª—å–¥–∞ –∏ –ø–ª–∞–º–µ–Ω–∏"?

```{r}
sum((got$Gender == 0) & (got$Nobility == 1))
```


- –ü–æc—á–∏—Ç–∞—Ç–π–µ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é (!) –¥–æ–ª—é –∑–Ω–∞—Ç–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (`Nobility`) –≤ `Night's Watch`.

```{r}
mean(got[got$Allegiances == "Night's Watch", "Nobility"])*100
```

- –ü–æc—á–∏—Ç–∞—Ç–π–µ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é (!) –¥–æ–ª—é –∑–Ω–∞—Ç–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (`Nobility`) —É `Lannister`.

```{r}
mean(got[got$Allegiances == "Lannister", "Nobility"])*100
```

- –ö–∞–∫–∞—è –∏–∑ –∫–Ω–∏–≥ —Ü–∏–∫–ª–∞ —Å–∞–º–∞—è –∫—Ä–æ–≤–∞–≤–∞—è? –î–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —á–∞—Å—Ç–æ—Ç –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏ `got$Book.of.Death`:

> –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `table()`, –Ω–æ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –í—ã —É–∑–Ω–∞–µ—Ç–µ –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã - –ø–æ–¥–æ–±–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ.

```{r}
table(got$Book.of.Death)
```


<!--chapter:end:18-tasks.Rmd-->



# –†–µ—à–µ–Ω–∏—è_–∑–∞–¥–∞–Ω–∏–π {#solutions}

```{r include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

## –í–µ–∫—Ç–æ—Ä {#solvvec_task_1}

- –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ª–æ–≥–∞—Ä–∏—Ñ–º –æ—Ç 8912162342 –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é 6

```{r}
log(8912162342, 6)

```

- –¢–µ–ø–µ—Ä—å –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –ª–æ–≥–∞—Ä–∏—Ñ–º 10 –∏ —É–º–Ω–æ–∂—å—Ç–µ –µ–≥–æ –Ω–∞ 5

```{r}
log(10)*5
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –æ—Ç 1 –¥–æ 20

```{r}
1:20
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –æ—Ç 20 –¥–æ 1

```{r}
20:1
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –æ—Ç 1 –¥–æ 20 –∏ —Å–Ω–æ–≤–∞ –¥–æ 1. –ß–∏—Å–ª–æ 20 –¥–æ–ª–∂–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!

```{r}
c(1:20, 19:1)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä 2, 4, 6,  ... , 18, 20

```{r}
seq(2,20, 2)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –∏–∑ –æ–¥–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã, –¥–≤—É—Ö –¥–≤–æ–µ–∫, —Ç—Ä–µ—Ö —Ç—Ä–æ–µ–∫, .... , –¥–µ–≤—è—Ç–∏ –¥–µ–≤—è—Ç–æ–∫

```{r}
rep(1:9, 1:9)
```

- –°–¥–µ–ª–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä vec, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–µ–¥–∏–Ω–∏—Ç–µ `3`, –∞ —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏—è `"–ú–æ–π"` –∏ `"–≤–µ–∫—Ç–æ—Ä"`.

```{r}
vec <- c(3, "–ú–æ–π", "–≤–µ–∫—Ç–æ—Ä")
vec
```

- –í—ã—á–µ—Å—Ç—å `TRUE` –∏–∑ 10

```{r}
10 - TRUE
```

- –°–æ–µ–¥–∏–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `10` –∏ `TRUE` –≤ –≤–µ–∫—Ç–æ—Ä `vec`

```{r}
vec <- c(10, TRUE)
vec
```

- –°–æ–µ–¥–∏–Ω–∏—Ç–µ –≤–µ–∫—Ç–æ—Ä `vec` –∏ –∑–Ω–∞—á–µ–Ω–∏–µ `"r"`:

```{r}
c(vec, "r")
```

- –°–æ–µ–¥–∏–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è `10`, `TRUE`, `"r"`  –≤ –≤–µ–∫—Ç–æ—Ä.

```{r}
c(10, TRUE, "r")
```

## –í–µ–∫—Ç–æ—Ä. –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ {#solvvec_op}

–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä `p`, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π 4, 5, 6, 7, –∏ –≤–µ–∫—Ç–æ—Ä `q`, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ 0, 1, 2, 3. 

```{r}
p <- 4:7
p
q <- 0:3
q
```

–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω—É—é —Å—É–º–º—É –≤–µ–∫—Ç–æ—Ä–æ–≤ `p` –∏ `q`:

```{r}
p + q
```

–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É `p` –∏ `q`:

```{r}
p - q
```

–ü–æ–¥–µ–ª–∏—Ç–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `p` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –µ–º—É —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `q`:

> –û, –¥–∞, –í–∞–º –Ω—É–∂–Ω–æ –¥–µ–ª–∏—Ç—å –Ω–∞ 0!

```{r}
p/q
```

–í–æ–∑–≤–µ–¥–∏—Ç–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `p` –≤ —Å—Ç–µ–ø–µ–Ω—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –µ–º—É —ç–ª–µ–º–µ–Ω—Ç–∞ –≤–µ–∫—Ç–æ—Ä–∞ `q`:

```{r}
p^q
```


–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ —á–∏—Å–µ–ª –æ—Ç 1 –¥–æ 10:

```{r}
(1:10)^2
```

–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä 0, 2, 0, 4, ... , 18, 0, 20

```{r}
1:20 * 0:1
```

## –í–µ–∫—Ç–æ—Ä. –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ {#solvvec_task_2}

–°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä `vec1`:

```{r, echo = TRUE}
vec1 <- c(3, 5, 2, 1, 8, 4, 9, 10, 3, 15, 1, 11)
```

- –ù–∞–π–¥–∏—Ç–µ –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `vec1`:

```{r}
vec1[2]
```

- –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤–µ–∫—Ç–æ—Ä–∞ `vec1`

```{r}
vec1[length(vec1)]
```

- –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ `vec1`, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ 4

```{r}
vec1[vec1>4]
```

- –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–∞ vec1, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ 4, –Ω–æ –º–µ–Ω—å—à–µ 10

```{r}
vec1[vec1>4 & vec1<10]
```

- –í–æ–∑–≤–µ–¥–∏—Ç–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ `vec1`

```{r}
vec1^2
```

- –í–æ–∑–≤–µ–¥–∏—Ç–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç –∫–∞–∂–¥–æ–µ –Ω–µ—á–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –∏ –∏–∑–≤–ª–µ–∫–∏—Ç–µ –∫–æ—Ä–µ–Ω—å –∫–∞–∂–¥–æ–≥–æ —á–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `vec1`

```{r}
vec1 ^ c(2, 0.5)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä `vec2`, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è `vec1`, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—å—à–µ 10 –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `NA`.

```{r}
vec2 <- vec1
vec2[vec2<10] <- NA
vec2
```


- –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ —Å—É–º–º—É `vec2` —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `sum()`. –û—Ç–≤–µ—Ç `NA` –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è!

```{r}
sum(vec2, na.rm = TRUE)
```

- –°–æ–∑–¥–∞–π—Ç–µ –≤–µ–∫—Ç–æ—Ä 2, 4, 6,  ... , 18, 20 –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 –Ω–æ–≤—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏

> –ó–Ω–∞—é, —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º, –Ω–æ —ç—Ç–æ –æ—á–µ–Ω—å –±–∞–∑–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏. –ß–µ–º –±–æ–ª—å—à–µ —Å–ø–æ—Å–æ–±–æ–≤ –í—ã –∑–Ω–∞–µ—Ç–µ, —Ç–µ–º –ª—É—á—à–µ!

```{r}
(1:20)[c(F,T)]
#(1:10)*2
```

## –°–ø–∏—Å–∫–∏ {#solvlist_ta}

–î–∞–Ω —Å–ø–∏—Å–æ–∫ `list_1`:

```{r, echo = TRUE}
list_1 = list(numbers = 1:5, letters = letters, logic = TRUE)
list_1
```

- –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–∫–æ–º.

```{r}
list_1[1]
```

- –¢–µ–ø–µ—Ä—å –Ω–∞–π–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–º.

```{r}
list_1[[1]]
list_1$numbers
```

–¢–µ–ø–µ—Ä—å –≤–æ–∑—å–º–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–º.

```{r}
list_1[[1]][1]
```

–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ `list_2`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤ —Å–µ–±–µ –¥–≤–∞ —Å–ø–∏—Å–∫–∞ `list_1` —Å –∏–º–µ–Ω–∞–º–∏ `pupa` –∏ `lupa`.

```{r}
list_2 = list(pupa = list_1, lupa = list_1)
list_2
```

–ò–∑–≤–ª–µ–∫–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞, –∏–∑ –Ω–µ–≥–æ - –≤—Ç–æ—Ä–æ–π –ø–æ–ª—ç–ª–µ–º–µ–Ω—Ç, –∞ –∏–∑ –Ω–µ–≥–æ - —Ç—Ä–µ—Ç—å–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```{r}
list_2[[1]][[2]][3]
```

## –ú–∞—Ç—Ä–∏—Ü—ã {#solvt}

- –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ç—Ä–∏—Ü—É 4—Ö4, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ –µ–¥–∏–Ω–∏—Ü. –ù–∞–∑–æ–≤–∏—Ç–µ –µ–µ `M`

```{r}
M <- matrix(rep(1, 16), ncol = 4)
M
```

- –ü–æ–º–µ–Ω—è–π—Ç–µ –≤—Å–µ –Ω–µ–∫—Ä–∞–π–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Ç—Ä–∏—Ü—ã `M` (—Ç–æ –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ö [2,2], [2,3], [3,2] –∏ [3,3]) –Ω–∞ —á–∏—Å–ª–æ 2.

```{r}
M[2:3, 2:3] <- 2
M
```

- –í—ã–¥–µ–ª–∏—Ç–µ –≤—Ç–æ—Ä–æ–π –∏ —Ç—Ä–µ—Ç–∏–π —Å—Ç–æ–ª–±–∏–∫ –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã `M`

```{r}
M[,2:3]
```

- –°—Ä–∞–≤–Ω–∏—Ç–µ (`==`) –≤—Ç–æ—Ä—É—é –∫–æ–ª–æ–Ω–∫—É –∏ –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ—á–∫—É –º–∞—Ç—Ä–∏—Ü—ã `M`
```{r}
M[,2] == M[2,]
```


- –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —É–º–Ω–æ–∂–µ–Ω–∏—è (9—Ö9) –≤ –≤–∏–¥–µ –º–∞—Ç—Ä–∏—Ü—ã. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `tab`:

```{r}
tab <- matrix(rep(1:9, rep(9,9))*(1:9), nrow = 9)
tab

#–ï—â–µ
#outer(1:9, 1:9, "*")
#1:9 %o% 1:9
```

- –ò–∑ –º–∞—Ç—Ä–∏—Ü—ã `tab` –≤—ã–¥–µ–ª–∏—Ç–µ –ø–æ–¥–º–∞—Ç—Ä–∏—Ü—É, –≤–∫–ª—é—á–∞—é—â—É—é –≤ —Å–µ–±—è —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ—á–∫–∏ —Å 6 –ø–æ 8 –∏ —Å—Ç–æ–ª–±—Ü—ã —Å 3 –ø–æ 7.

```{r}
tab[6:8, 3:7]
```

- –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ç—Ä–∏—Ü—É —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –≥–¥–µ `TRUE`, –µ—Å–ª–∏ –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü–µ —É–º–Ω–æ–∂–µ–Ω–∏—è (`tab`) –¥–≤—É–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ –∏ `FALSE`, –µ—Å–ª–∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–µ.

> –ú–∞—Ç—Ä–∏—Ü–∞ - —ç—Ç–æ –ø–æ—á—Ç–∏ –≤–µ–∫—Ç–æ—Ä. –ö –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º.

```{r}
tab>=10
```

- –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ç—Ä–∏—Ü—É `tab2`, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è `tab` –º–µ–Ω—å—à–µ 10 –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ 0.

```{r}
tab2 <- tab
tab2[tab<10] <- 0
tab2
```


## –î–∞—Ç–∞—Ñ—Ä–µ–π–º {#solvdf_task}

- –ö—Ç–æ —è–≤–ª—è–µ—Ç—Å—è 274—ã–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –≤ `got` –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–µ? –ò–∑ –∫–∞–∫–æ–≥–æ –æ–Ω –¥–æ–º–∞?

```{r}
got[274, 1:2]
```

- –ù–∞–π–¥–∏—Ç–µ –∏–º–µ–Ω–∞ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏–∑ –¥–æ–º–∞ (`Allegiances`) `"Tyrell"` –∏ `"House Tyrell"`.

```{r}
got[got$Allegiances %in% c("Tyrell", "House Tyrell"), "Name"]
```

- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–∞—Ç–∞—Ñ—Ä–µ–π–º `greyjoy_women`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è —Ç–æ–ª—å–∫–æ –∂–µ–Ω—â–∏–Ω –ì—Ä–µ–π–¥–∂–æ–µ–≤ (`"Greyjoy"`, `"House Greyjoy"`)

```{r}
greyjoy_women <- got[got$Allegiances %in% c("Greyjoy", "House Greyjoy") & got$Gender == 0, ]
greyjoy_women
```

- –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∂–µ–Ω—Å–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –∫–Ω–∏–≥–∞—Ö "–ü–µ—Å–Ω–∏ –ª—å–¥–∞ –∏ –ø–ª–∞–º–µ–Ω–∏"?

```{r}
sum(got$Gender == 0)
```

- –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∂–µ–Ω—Å–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –¥–≤–æ—Ä—è–Ω—Å–∫–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∫–Ω–∏–≥–∞—Ö "–ü–µ—Å–Ω–∏ –ª—å–¥–∞ –∏ –ø–ª–∞–º–µ–Ω–∏"?

```{r}
sum((got$Gender == 0) & (got$Nobility == 1))
```


- –ü–æc—á–∏—Ç–∞—Ç–π–µ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é (!) –¥–æ–ª—é –∑–Ω–∞—Ç–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (`Nobility`) –≤ `Night's Watch`.

```{r}
mean(got[got$Allegiances == "Night's Watch", "Nobility"])*100
```

- –ü–æc—á–∏—Ç–∞—Ç–π–µ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é (!) –¥–æ–ª—é –∑–Ω–∞—Ç–∏ –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (`Nobility`) —É `Lannister`.

```{r}
mean(got[got$Allegiances == "Lannister", "Nobility"])*100
```

- –ö–∞–∫–∞—è –∏–∑ –∫–Ω–∏–≥ —Ü–∏–∫–ª–∞ —Å–∞–º–∞—è –∫—Ä–æ–≤–∞–≤–∞—è? –î–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —á–∞—Å—Ç–æ—Ç –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏ `got$Book.of.Death`:

> –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `table()`, –Ω–æ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –í—ã —É–∑–Ω–∞–µ—Ç–µ –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã - –ø–æ–¥–æ–±–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ.

```{r}
table(got$Book.of.Death)
```

<!--chapter:end:19-solutions.Rmd-->

`r if (knitr::is_html_output()) '
# –°—Å—ã–ª–∫–∏ –Ω–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—É {-}
'`

<!--chapter:end:20-references.Rmd-->

